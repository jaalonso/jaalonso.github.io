<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
<head>
<!-- 03 de junio del 2022 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tema 7: Aplicaciones: Grafos, reinas y mapas</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="José A. Alonso" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../../../css/estilo-org.css" />
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="preamble" class="status">
<p><a href="/"><i class="fa fa-home"></i></a> |
   <a href="/materias/PLconProlog/">Inicial</a> |
   <a href="/materias/PLconProlog/temas.html">Temas  </a> |
   <a href="/materias/PLconProlog/sistemas.html">Sistemas </a> |
   <a href="/materias/PLconProlog/cursos.html">Cursos </a> |
   <a href="/materias/PLconProlog/doc.html">Documentación  </a>
</p>
</div>
<div id="content">
<h1 class="title">Tema 7: Aplicaciones: Grafos, reinas y mapas</h1>
<div id="table-of-contents">
<h2>&Iacute;ndice</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org0a5c0c9">1. Grafos</a>
<ul>
<li><a href="#orgecf951f">1.1. Representación de los grafos</a></li>
<li><a href="#orga881780">1.2. Caminos en grafos</a></li>
<li><a href="#orga749575">1.3. Caminos hamiltonianos</a></li>
<li><a href="#org135886d">1.4. Generacion de grafos completos</a></li>
<li><a href="#orga6b53f3">1.5. Generación de grafos aleatorios</a></li>
</ul>
</li>
<li><a href="#org0fb1b67">2. El problema de las reinas</a>
<ul>
<li><a href="#org16fae0e">2.1. Enunciado del problema de las reinas</a></li>
<li><a href="#org933e1c9">2.2. 1ª solución del problema de las N reinas.</a></li>
<li><a href="#org2fbec9a">2.3. 2ª solución del problema de las N reinas</a></li>
<li><a href="#org3d3eb7e">2.4. 3ª solución del problema de las N reinas</a></li>
<li><a href="#org51c2736">2.5. Comparación de eficiencia</a></li>
</ul>
</li>
<li><a href="#orgf63f7c5">3. Coloreado de mapas</a></li>
<li><a href="#orgaec9744">4. Ejercicios</a></li>
<li><a href="#org8d6d773">5. Bibliografía</a></li>
</ul>
</div>
</div>

<div id="outline-container-org0a5c0c9" class="outline-2">
<h2 id="org0a5c0c9"><span class="section-number-2">1.</span> Grafos</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgecf951f" class="outline-3">
<h3 id="orgecf951f"><span class="section-number-3">1.1.</span> Representación de los grafos</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>Un grafo (no orientado y sin nodos aislados) se representa mediante la
definición del predicado <code>grafo(G,A)</code> que se verifica si <code>G</code> es el nombre del
grafo y <code>A</code> es la lista de arcos de <code>G</code> (cada uno representado mediante un
término <code>X-Y</code>).</li>

<li><p>
La representación del siguiente grafo
</p>
<div class="org-src-container">
<pre class="src src-txt">    b
  / | \
 /  |  \
a   |   c
    |  /
    | /
    |/
    d
</pre>
</div>
<p>
es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">grafo</span><span style="color: #707183;">(</span>ejemplo1,<span style="color: #7388d6;">[</span>a-b,b-c,b-d,c-d<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
El grafo de las conexiones entre ciudades andaluzas vecinas es <br />
<img src="./fig/tema-7-andalucia.png" alt="tema-7-andalucia.png" />
y su representación es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">grafo</span><span style="color: #707183;">(</span>andaluc&#237;a, <span style="color: #7388d6;">[</span>almer&#237;a-granada,
                  almer&#237;a-ja&#233;n,
                  c&#225;diz-huelva,
                  c&#225;diz-m&#225;laga,
                  c&#225;diz-sevilla,
                  c&#243;rdoba-granada,
                  c&#243;rdoba-ja&#233;n,
                  c&#243;rdoba-m&#225;laga,
                  c&#243;rdoba-sevilla,
                  granada-ja&#233;n,
                  granada-m&#225;laga,
                  huelva-sevilla,
                  m&#225;laga-sevilla<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
<code>arcos(G,L)</code> se verifica si <code>L</code> es la lista de arcos del grafo <code>G</code>. Por
ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- arcos<span style="color: #707183;">(</span>ejemplo1,L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span>a-b, b-c, b-d, c-d<span style="color: #707183;">]</span>.
?- arcos<span style="color: #707183;">(</span>andaluc&#237;a,L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span>almer&#237;a-granada,
     almer&#237;a-ja&#233;n,
     c&#225;diz-huelva,
     c&#225;diz-m&#225;laga,
     c&#225;diz-sevilla,
     c&#243;rdoba-granada,
     c&#243;rdoba-ja&#233;n,
     c&#243;rdoba-m&#225;laga,
     ... - ...|...<span style="color: #707183;">]</span>.
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">arcos</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">A</span><span style="color: #707183;">)</span> :-
   grafo<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">A</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
<code>adyacente(G,X,Y)</code> se verifica si <code>X</code> e <code>Y</code> son adyacentes en el grafo
<code>G</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-prolog">?- adyacente<span style="color: #707183;">(</span>ejemplo1,d,<span style="color: #a0522d;">X</span><span style="color: #707183;">)</span>.
<span style="color: #a0522d;">X</span> = b <span style="color: #a020f0;">;</span>
<span style="color: #a0522d;">X</span> = c.
?- adyacente<span style="color: #707183;">(</span>andaluc&#237;a,almer&#237;a,<span style="color: #a0522d;">X</span><span style="color: #707183;">)</span>.
<span style="color: #a0522d;">X</span> = granada <span style="color: #a020f0;">;</span>
<span style="color: #a0522d;">X</span> = ja&#233;n <span style="color: #a020f0;">;</span>
false.
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">adyacente</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #707183;">)</span> :-
   arcos<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,
   <span style="color: #707183;">(</span>member<span style="color: #7388d6;">(</span><span style="color: #a0522d;">X</span>-<span style="color: #a0522d;">Y</span>,<span style="color: #a0522d;">L</span><span style="color: #7388d6;">)</span> <span style="color: #a020f0;">;</span> member<span style="color: #7388d6;">(</span><span style="color: #a0522d;">Y</span>-<span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">L</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
<code>nodos(G,L)</code> se verifica si <code>L</code> es la lista de nodos de grafo G. Por
ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- nodos<span style="color: #707183;">(</span>ejemplo1,L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span>a, b, c, d<span style="color: #707183;">]</span>.
?- nodos<span style="color: #707183;">(</span>andaluc&#237;a,L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span>almer&#237;a, c&#225;diz, c&#243;rdoba, granada, huelva, ja&#233;n, m&#225;laga, sevilla<span style="color: #707183;">]</span>.
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">nodos</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span> :-
   setof<span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span>^adyacente<span style="color: #7388d6;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #7388d6;">)</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
<code>nodo(G,N)</code> se verifica si <code>N</code> es un nodo de <code>G</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- nodo<span style="color: #707183;">(</span>ejemplo1,N<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = a ;
N = b ;
N = c ;
N = d.
?- nodo<span style="color: #707183;">(</span>andaluc&#237;a,N<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = almer&#237;a ;
N = c&#225;diz ;
N = c&#243;rdoba ;
N = granada ;
N = huelva ;
N = ja&#233;n ;
N = m&#225;laga ;
N = sevilla.
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">nodo</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">N</span><span style="color: #707183;">)</span> :-
   nodos<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,
   member<span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li>Nota: El código de esta sección se encuentra en <a href="https://swish.swi-prolog.org/p/PLP_representacion_de_grafos.pl%20%20">representacion_de_grafos.pl</a>.</li>
</ul>
</div>
</div>

<div id="outline-container-orga881780" class="outline-3">
<h3 id="orga881780"><span class="section-number-3">1.2.</span> Caminos en grafos</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li><p>
<code>camino(G,A,Z,C)</code> se verifica si <code>C</code> es un camino en el grafo <code>G</code> desde el nodo
<code>A</code> al <code>Z</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- camino<span style="color: #707183;">(</span>ejemplo1,a,d,C<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
C = <span style="color: #707183;">[</span>a, b, d<span style="color: #707183;">]</span> ;
C = <span style="color: #707183;">[</span>a, b, c, d<span style="color: #707183;">]</span> ;
false.
?- camino<span style="color: #707183;">(</span>andaluc&#237;a,sevilla,granada,C<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
C = <span style="color: #707183;">[</span>sevilla, huelva, c&#225;diz, m&#225;laga, c&#243;rdoba, ja&#233;n, almer&#237;a, granada<span style="color: #707183;">]</span> ;
C = <span style="color: #707183;">[</span>sevilla, c&#225;diz, m&#225;laga, c&#243;rdoba, ja&#233;n, almer&#237;a, granada<span style="color: #707183;">]</span>

?- findall<span style="color: #707183;">(</span>C,camino<span style="color: #7388d6;">(</span>andaluc&#237;a,sevilla,granada,C<span style="color: #7388d6;">)</span>,_L<span style="color: #707183;">)</span>, length<span style="color: #707183;">(</span>_L,N<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = 16.
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">camino</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">Z</span>,<span style="color: #a0522d;">C</span><span style="color: #707183;">)</span> :-
   camino_aux<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">A</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">Z</span><span style="color: #7388d6;">]</span>,<span style="color: #a0522d;">C</span><span style="color: #707183;">)</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">camino_aux(+G,+A,+CP,-C) se verifica si C es una camino en G compuesto de un</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">camino desde A hasta el primer elemento del camino parcial CP (con nodos</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">distintos a los de CP) junto CP.</span>
<span style="color: #0000ff;">camino_aux</span><span style="color: #707183;">(</span><span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">A</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">A</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">C1</span><span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">A</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">C1</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">camino_aux</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">A</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">Y</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">C1</span><span style="color: #7388d6;">]</span>,<span style="color: #a0522d;">C</span><span style="color: #707183;">)</span> :-
   adyacente<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #707183;">)</span>,
   not<span style="color: #707183;">(</span>member<span style="color: #7388d6;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #909183;">[</span><span style="color: #a0522d;">Y</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">C1</span><span style="color: #909183;">]</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>,
   camino_aux<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">A</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">C1</span><span style="color: #7388d6;">]</span>,<span style="color: #a0522d;">C</span><span style="color: #707183;">)</span>.
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orga749575" class="outline-3">
<h3 id="orga749575"><span class="section-number-3">1.3.</span> Caminos hamiltonianos</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li><p>
<code>hamiltoniano(G,H)</code> se verifica si <code>H</code> es un camino hamiltoniano en el grafo
<code>G</code> (es decir, es un camino en <code>G</code> que pasa por todos sus nodos). Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- hamiltoniano<span style="color: #707183;">(</span>ejemplo1,H<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
H = <span style="color: #707183;">[</span>a, b, c, d<span style="color: #707183;">]</span> ;
H = <span style="color: #707183;">[</span>d, c, b, a<span style="color: #707183;">]</span> ;
H = <span style="color: #707183;">[</span>c, d, b, a<span style="color: #707183;">]</span> ;
H = <span style="color: #707183;">[</span>a, b, d, c<span style="color: #707183;">]</span> ;
false.
?- hamiltoniano<span style="color: #707183;">(</span>andaluc&#237;a,H<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
H = <span style="color: #707183;">[</span>sevilla, huelva, c&#225;diz, m&#225;laga, c&#243;rdoba, ja&#233;n, almer&#237;a, granada<span style="color: #707183;">]</span> ;
H = <span style="color: #707183;">[</span>huelva, sevilla, c&#225;diz, m&#225;laga, c&#243;rdoba, ja&#233;n, almer&#237;a, granada<span style="color: #707183;">]</span>

?- hamiltoniano<span style="color: #707183;">(</span>andaluc&#237;a,_H<span style="color: #707183;">)</span>, length<span style="color: #707183;">(</span>_H,N<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = 8
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #b22222;">% </span><span style="color: #b22222;">1&#170; definici&#243;n</span>
<span style="color: #0000ff;">hamiltoniano</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">H</span><span style="color: #707183;">)</span> :-
   camino<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">H</span><span style="color: #707183;">)</span>,
   cubre<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">H</span><span style="color: #707183;">)</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">cubre(+G,+H) se verifica si el camino H cubre el grafo G (es decir, todos los</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">nodos de G pertenecen a H).</span>
<span style="color: #0000ff;">cubre</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">H</span><span style="color: #707183;">)</span> :-
   igual_medida<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">H</span><span style="color: #707183;">)</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">igual_medida(+G,+H) se verifica si el n&#250;mero de nodos del camino H es igual al</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">n&#250;mero de nodos del grafo G.</span>
<span style="color: #0000ff;">igual_medida</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">H</span><span style="color: #707183;">)</span> :-
   length<span style="color: #707183;">(</span><span style="color: #a0522d;">H</span>,<span style="color: #a0522d;">MH</span><span style="color: #707183;">)</span>,
   nodos<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">N</span><span style="color: #707183;">)</span>,
   length<span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">MH</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
2ª definición de <code>hammitoniano</code>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">hamiltoniano_2</span><span style="color: #707183;">(</span><span style="color: #a0522d;">C</span><span style="color: #707183;">)</span> :-
   nodos<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,
   length<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span>,<span style="color: #a0522d;">N</span><span style="color: #707183;">)</span>,
   length<span style="color: #707183;">(</span><span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">N</span><span style="color: #707183;">)</span>,
   camino<span style="color: #707183;">(</span><span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">C</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
Comparación de eficiencia
</p>
<div class="org-src-container">
<pre class="src src-shell">?- time<span style="color: #707183;">(</span>findall<span style="color: #7388d6;">(</span>_C,hamiltoniano<span style="color: #909183;">(</span>andaluc&#237;a,_C<span style="color: #909183;">)</span>,_L<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
% 119,184 inferences, 0.019 CPU<span style="color: #a020f0;"> in</span> 0.019 seconds <span style="color: #707183;">(</span>100% CPU, 6237168 Lips<span style="color: #707183;">)</span>
true.

?- time<span style="color: #707183;">(</span>findall<span style="color: #7388d6;">(</span>_C,hamiltoniano_2<span style="color: #909183;">(</span>andaluc&#237;a,_C<span style="color: #909183;">)</span>,_L<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
% 47,111 inferences, 0.009 CPU<span style="color: #a020f0;"> in</span> 0.009 seconds <span style="color: #707183;">(</span>100% CPU, 5344800 Lips<span style="color: #707183;">)</span>
true.
</pre>
</div></li>

<li>Nota: El código con las definiciones de <code>camino</code> y <code>hamiltoniano</code> se encuentra
en <a href="https://swish.swi-prolog.org/p/PLP_camino.pl">camino.pl</a>.</li>
</ul>
</div>
</div>

<div id="outline-container-org135886d" class="outline-3">
<h3 id="org135886d"><span class="section-number-3">1.4.</span> Generacion de grafos completos</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li><p>
<code>completo(+N,-G)</code> se verifica si <code>G</code> es el grafo completo de orden
<code>N</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- completo<span style="color: #707183;">(</span>3,G<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
G = <span style="color: #707183;">[</span>1-2, 1-3, 2-3<span style="color: #707183;">]</span>.

?- completo<span style="color: #707183;">(</span>4,G<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
G = <span style="color: #707183;">[</span>1-2, 1-3, 1-4, 2-3, 2-4, 3-4<span style="color: #707183;">]</span>.
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">completo</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">G</span><span style="color: #707183;">)</span> :-
   findall<span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>-<span style="color: #a0522d;">Y</span>,arco_completo<span style="color: #7388d6;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #7388d6;">)</span>,<span style="color: #a0522d;">G</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">arco_completo</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">N1</span> is <span style="color: #a0522d;">N</span>-1,
   between<span style="color: #707183;">(</span>1,<span style="color: #a0522d;">N1</span>,<span style="color: #a0522d;">X</span><span style="color: #707183;">)</span>,
   <span style="color: #a0522d;">X1</span> is <span style="color: #a0522d;">X</span>+1,
   between<span style="color: #707183;">(</span><span style="color: #a0522d;">X1</span>,<span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">Y</span><span style="color: #707183;">)</span>.
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orga6b53f3" class="outline-3">
<h3 id="orga6b53f3"><span class="section-number-3">1.5.</span> Generación de grafos aleatorios</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li><p>
<code>aleatorio(+P,+N,-G)</code> se verifica si <code>G</code> es un subgrafo del grafo completo de
orden <code>N</code> donde cada arco se ha elegido con la probabilidad <code>P</code>
(0 &lt;= <code>P</code> &lt;= 1). Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- aleatorio<span style="color: #707183;">(</span>0,4,G<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
G = <span style="color: #707183;">[]</span>.

?- aleatorio<span style="color: #707183;">(</span>1,4,G<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
G = <span style="color: #707183;">[</span>1-2, 1-3, 1-4, 2-3, 2-4, 3-4<span style="color: #707183;">]</span>.

?- aleatorio<span style="color: #707183;">(</span>0.1,4,G<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
G = <span style="color: #707183;">[</span>2-3<span style="color: #707183;">]</span>.

?- aleatorio<span style="color: #707183;">(</span>0.1,4,G<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
G = <span style="color: #707183;">[</span>1-3, 1-4<span style="color: #707183;">]</span>.

?- aleatorio<span style="color: #707183;">(</span>0.8,4,G<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
G = <span style="color: #707183;">[</span>1-2, 1-3, 1-4, 2-3, 2-4<span style="color: #707183;">]</span>.

?- aleatorio<span style="color: #707183;">(</span>0.8,4,G<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
G = <span style="color: #707183;">[</span>1-3, 1-4, 2-3, 2-4<span style="color: #707183;">]</span>.
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">aleatorio</span><span style="color: #707183;">(</span><span style="color: #a0522d;">P</span>,<span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">G</span><span style="color: #707183;">)</span> :-
   findall<span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>-<span style="color: #a0522d;">Y</span>,<span style="color: #7388d6;">(</span>arco_completo<span style="color: #909183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #909183;">)</span>,probabilidad<span style="color: #909183;">(</span><span style="color: #a0522d;">Z</span><span style="color: #909183;">)</span>,<span style="color: #a0522d;">Z</span>=&lt;<span style="color: #a0522d;">P</span><span style="color: #7388d6;">)</span>,<span style="color: #a0522d;">G</span><span style="color: #707183;">)</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">probabilidad(X) se verifica si X es un n&#250;mero probabilidad en el intervalo</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">[0,1]. Por ejemplo,</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">?- probabilidad(X).</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">X = 0.08.</span>
<span style="color: #b22222;">%</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">?- probabilidad(X).</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">X = 0.023.</span>
<span style="color: #0000ff;">probabilidad</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">Y</span> is random<span style="color: #707183;">(</span>1000<span style="color: #707183;">)</span>,
   <span style="color: #a0522d;">X</span> is <span style="color: #a0522d;">Y</span>/1000.
</pre>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org0fb1b67" class="outline-2">
<h2 id="org0fb1b67"><span class="section-number-2">2.</span> El problema de las reinas</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org16fae0e" class="outline-3">
<h3 id="org16fae0e"><span class="section-number-3">2.1.</span> Enunciado del problema de las reinas</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>El problema de las N reinas consiste en colocar N reinas en un tablero
rectangular de dimensiones N por N de forma que no se encuentren más
de una en la misma línea: horizontal, vertical o diagonal.
<img src="./fig/tema-7-8_reinas.png" alt="tema-7-8_reinas.png" /></li>
</ul>
</div>
</div>


<div id="outline-container-org933e1c9" class="outline-3">
<h3 id="org933e1c9"><span class="section-number-3">2.2.</span> 1ª solución del problema de las N reinas.</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li><p>
<code>reinas_1(+N,-S)</code> se verifica si <code>S</code> es una solución del problema de
las <code>N</code> reinas. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- reinas_1<span style="color: #707183;">(</span>4,S<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
S = <span style="color: #707183;">[</span>1-3, 2-1, 3-4, 4-2<span style="color: #707183;">]</span> ;
S = <span style="color: #707183;">[</span>1-2, 2-4, 3-1, 4-3<span style="color: #707183;">]</span> ;
false.

?- reinas_1<span style="color: #707183;">(</span>8,S<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
S = <span style="color: #707183;">[</span>1-4, 2-2, 3-7, 4-3, 5-6, 6-8, 7-5, 8-1<span style="color: #707183;">]</span>

?- findall<span style="color: #707183;">(</span>S,reinas_1<span style="color: #7388d6;">(</span>8,S<span style="color: #7388d6;">)</span>,_L<span style="color: #707183;">)</span>, length<span style="color: #707183;">(</span>_L,N<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = 92.
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">reinas_1</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">S</span><span style="color: #707183;">)</span> :-
   tablero<span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">S</span><span style="color: #707183;">)</span>,
   soluci&#243;n<span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">S</span><span style="color: #707183;">)</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">tablero(N,L) se verifica si L es una lista de posiciones que</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">representan las coordenadas de N reinas en el tablero. Por ejemplo,</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">?- tablero(4,L).</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">L = [1-_8750, 2-_8738, 3-_8726, 4-_8714].</span>
<span style="color: #0000ff;">tablero</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span> :-
  findall<span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>-<span style="color: #a0522d;">_Y</span>,between<span style="color: #7388d6;">(</span>1,<span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">X</span><span style="color: #7388d6;">)</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">solucion_1(+N,?L) se verifica si L es una lista de pares de n&#250;meros</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">que representan las coordenadas de una soluci&#243;n del problema de las N</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">reinas. Por ejemplo,</span>
<span style="color: #0000ff;">soluci&#243;n</span><span style="color: #707183;">(</span><span style="color: #a0522d;">_</span>,<span style="color: #7388d6;">[]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">soluci&#243;n</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">X</span>-<span style="color: #a0522d;">Y</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   soluci&#243;n<span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,
   between<span style="color: #707183;">(</span>1,<span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">Y</span><span style="color: #707183;">)</span>,
   no_ataca<span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>-<span style="color: #a0522d;">Y</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">no_ataca(X-Y,L) se verifica si la reina en la posici&#243;n X-Y no ataca a</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">las reinas colocadas en las posiciones correspondientes a los</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">elementos de la lista L.</span>
<span style="color: #0000ff;">no_ataca</span><span style="color: #707183;">(</span><span style="color: #a0522d;">_</span>,<span style="color: #7388d6;">[]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">no_ataca</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>-<span style="color: #a0522d;">Y</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">X1</span>-<span style="color: #a0522d;">Y1</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">X</span> =\= <span style="color: #a0522d;">X1</span>,
   <span style="color: #a0522d;">Y</span> =\= <span style="color: #a0522d;">Y1</span>,
   <span style="color: #a0522d;">X</span>-<span style="color: #a0522d;">X1</span> =\= <span style="color: #a0522d;">Y</span>-<span style="color: #a0522d;">Y1</span>,
   <span style="color: #a0522d;">X</span>-<span style="color: #a0522d;">X1</span> =\= <span style="color: #a0522d;">Y1</span>-<span style="color: #a0522d;">Y</span>,
   no_ataca<span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>-<span style="color: #a0522d;">Y</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>.
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org2fbec9a" class="outline-3">
<h3 id="org2fbec9a"><span class="section-number-3">2.3.</span> 2ª solución del problema de las N reinas</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li><p>
<code>reinas_2(+N,-S)</code> se verifica si <code>L</code> es una lista de N números,
[x(1),&#x2026;,x(N)], de forma que si las reinas se colocan en las casillas
(1, x(1)),&#x2026;,(N, x(N)), entonces no se atacan entre sí. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- reinas_2<span style="color: #707183;">(</span>4,S<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
S = <span style="color: #707183;">[</span>2, 4, 1, 3<span style="color: #707183;">]</span> ;
S = <span style="color: #707183;">[</span>3, 1, 4, 2<span style="color: #707183;">]</span> ;
false.

?- reinas_2<span style="color: #707183;">(</span>8,S<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
S = <span style="color: #707183;">[</span>1, 5, 8, 6, 3, 7, 2, 4<span style="color: #707183;">]</span>

?- findall<span style="color: #707183;">(</span>S,reinas_2<span style="color: #7388d6;">(</span>8,S<span style="color: #7388d6;">)</span>,_L<span style="color: #707183;">)</span>, length<span style="color: #707183;">(</span>_L,N<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = 92.
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">reinas_2</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">S</span><span style="color: #707183;">)</span> :-
   numlist<span style="color: #707183;">(</span>1,<span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">S1</span><span style="color: #707183;">)</span>,
   permutation<span style="color: #707183;">(</span><span style="color: #a0522d;">S1</span>,<span style="color: #a0522d;">S</span><span style="color: #707183;">)</span>,
   segura<span style="color: #707183;">(</span><span style="color: #a0522d;">S</span><span style="color: #707183;">)</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">segura(L) se verifica si L es una lista de n&#250;meros [x(1),...,x(m)]</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">tal que las reinas colocadas en las posiciones</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">(a,x(1)), ..., (a+m,x(m)) no se atacan entre s&#237;. Por ejemplo,</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">?- segura([3,4]).</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">true.</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">?- segura([2,4]).</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">false.</span>
<span style="color: #0000ff;">segura</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">segura</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">X</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   segura<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,
   no_ataca<span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">L</span>,1<span style="color: #707183;">)</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">no_ataca(Y,L,D) se verifica si Y es un n&#250;mero, L es una lista de</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">n&#250;meros [y(1),...,y(m)] y D es un n&#250;mero tales que las reinas colocada</span>
<span style="color: #b22222;">%  </span><span style="color: #b22222;">en la posici&#243;n (X,Y) no ataca a las colocadas en las posiciones</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">(X+D,y(1)),..., (X+D+m,y(m)).</span>
<span style="color: #0000ff;">no_ataca</span><span style="color: #707183;">(</span><span style="color: #a0522d;">_</span>, <span style="color: #7388d6;">[]</span>, <span style="color: #a0522d;">_</span> <span style="color: #707183;">)</span>.
<span style="color: #0000ff;">no_ataca</span><span style="color: #707183;">(</span><span style="color: #a0522d;">Y</span>, <span style="color: #7388d6;">[</span><span style="color: #a0522d;">Y1</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L</span><span style="color: #7388d6;">]</span>, <span style="color: #a0522d;">D</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">Y1</span>-<span style="color: #a0522d;">Y</span> =\= <span style="color: #a0522d;">D</span>,
   <span style="color: #a0522d;">Y</span>-<span style="color: #a0522d;">Y1</span> =\= <span style="color: #a0522d;">D</span>,
   <span style="color: #a0522d;">D1</span> is <span style="color: #a0522d;">D</span>+1 ,
   no_ataca<span style="color: #707183;">(</span><span style="color: #a0522d;">Y</span>, <span style="color: #a0522d;">L</span>, <span style="color: #a0522d;">D1</span><span style="color: #707183;">)</span>.
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org3d3eb7e" class="outline-3">
<h3 id="org3d3eb7e"><span class="section-number-3">2.4.</span> 3ª solución del problema de las N reinas</h3>
<div class="outline-text-3" id="text-2-4">
<ul class="org-ul">
<li><p>
<code>reinas_3(+N,-S)</code> se verifica si <code>L</code> es una lista de <code>N</code> números,
[x(1),&#x2026;,x(N)], de forma que si las reinas se colocan en las casillas
(1, x(1)),&#x2026;,(N, x(N)), entonces no se atacan entre sí. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- reinas_3<span style="color: #707183;">(</span>4,S<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
S = <span style="color: #707183;">[</span>2, 4, 1, 3<span style="color: #707183;">]</span> ;
S = <span style="color: #707183;">[</span>3, 1, 4, 2<span style="color: #707183;">]</span> ;
false.

?- reinas_3<span style="color: #707183;">(</span>8,S<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
S = <span style="color: #707183;">[</span>1, 5, 8, 6, 3, 7, 2, 4<span style="color: #707183;">]</span>

?- findall<span style="color: #707183;">(</span>S,reinas_3<span style="color: #7388d6;">(</span>8,S<span style="color: #7388d6;">)</span>,_L<span style="color: #707183;">)</span>, length<span style="color: #707183;">(</span>_L,N<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = 92.
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">reinas_3</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span> :-
   numlist<span style="color: #707183;">(</span>1,<span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">L1</span><span style="color: #707183;">)</span>,
   <span style="color: #a0522d;">A</span> is -<span style="color: #a0522d;">N</span>+1,
   <span style="color: #a0522d;">B</span> is <span style="color: #a0522d;">N</span>-1,
   numlist<span style="color: #707183;">(</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">L2</span><span style="color: #707183;">)</span>,
   <span style="color: #a0522d;">M</span> is 2*<span style="color: #a0522d;">N</span>,
   numlist<span style="color: #707183;">(</span>2,<span style="color: #a0522d;">M</span>,<span style="color: #a0522d;">L3</span><span style="color: #707183;">)</span>,
   reinas_3_aux<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span>,<span style="color: #a0522d;">L1</span>,<span style="color: #a0522d;">L1</span>,<span style="color: #a0522d;">L2</span>,<span style="color: #a0522d;">L3</span><span style="color: #707183;">)</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">reinas_3_aux(?L,+Dx,+Dy,+Du,+Dv) se verifica si L es una permutaci&#243;n</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">de los elementos de Dy de forma que si L es [y1,..., yn] y Dx es</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">[1,..., n], entonces y(j) - j (1 &#8804; j &#8804; n) son elementos distintos de</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">Du e y(j) + j (1 &#8804; j &#8804; n) son elementos distintos de Dv.</span>
<span style="color: #0000ff;">reinas_3_aux</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[]</span>,<span style="color: #7388d6;">[]</span>,<span style="color: #a0522d;">_Dy</span>,<span style="color: #a0522d;">_Du</span>,<span style="color: #a0522d;">_Dv</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">reinas_3_aux</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">Y</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">Ys</span><span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">X</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">Dx1</span><span style="color: #7388d6;">]</span>,<span style="color: #a0522d;">Dy</span>,<span style="color: #a0522d;">Du</span>,<span style="color: #a0522d;">Dv</span><span style="color: #707183;">)</span> :-
   select<span style="color: #707183;">(</span><span style="color: #a0522d;">Y</span>,<span style="color: #a0522d;">Dy</span>,<span style="color: #a0522d;">Dy1</span><span style="color: #707183;">)</span>,
   <span style="color: #a0522d;">U</span> is <span style="color: #a0522d;">X</span>-<span style="color: #a0522d;">Y</span>,
   select<span style="color: #707183;">(</span><span style="color: #a0522d;">U</span>,<span style="color: #a0522d;">Du</span>,<span style="color: #a0522d;">Du1</span><span style="color: #707183;">)</span>,
   <span style="color: #a0522d;">V</span> is <span style="color: #a0522d;">X</span>+<span style="color: #a0522d;">Y</span>,
   select<span style="color: #707183;">(</span><span style="color: #a0522d;">V</span>,<span style="color: #a0522d;">Dv</span>,<span style="color: #a0522d;">Dv1</span><span style="color: #707183;">)</span>,
   reinas_3_aux<span style="color: #707183;">(</span><span style="color: #a0522d;">Ys</span>,<span style="color: #a0522d;">Dx1</span>,<span style="color: #a0522d;">Dy1</span>,<span style="color: #a0522d;">Du1</span>,<span style="color: #a0522d;">Dv1</span><span style="color: #707183;">)</span>.
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org51c2736" class="outline-3">
<h3 id="org51c2736"><span class="section-number-3">2.5.</span> Comparación de eficiencia</h3>
<div class="outline-text-3" id="text-2-5">
<ul class="org-ul">
<li><p>
La comparación es para las 8 reinas es
</p>
<div class="org-src-container">
<pre class="src src-shell">?- time<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>findall<span style="color: #909183;">(</span>S,reinas_1<span style="color: #709870;">(</span>8,S<span style="color: #709870;">)</span>,_L<span style="color: #909183;">)</span>, length<span style="color: #909183;">(</span>_L,N<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
% 203,186 inferences, 0.022 CPU<span style="color: #a020f0;"> in</span> 0.022 seconds <span style="color: #707183;">(</span>100% CPU, 9263998 Lips<span style="color: #707183;">)</span>
N = 92.

?- time<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>findall<span style="color: #909183;">(</span>S,reinas_2<span style="color: #709870;">(</span>8,S<span style="color: #709870;">)</span>,_L<span style="color: #909183;">)</span>, length<span style="color: #909183;">(</span>_L,N<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
% 1,249,646 inferences, 0.086 CPU<span style="color: #a020f0;"> in</span> 0.086 seconds <span style="color: #707183;">(</span>100% CPU, 14476330 Lips<span style="color: #707183;">)</span>
N = 92.

?- time<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>findall<span style="color: #909183;">(</span>S,reinas_3<span style="color: #709870;">(</span>8,S<span style="color: #709870;">)</span>,_L<span style="color: #909183;">)</span>, length<span style="color: #909183;">(</span>_L,N<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
% 120,599 inferences, 0.017 CPU<span style="color: #a020f0;"> in</span> 0.017 seconds <span style="color: #707183;">(</span>100% CPU, 7170581 Lips<span style="color: #707183;">)</span>
N = 92.
</pre>
</div></li>

<li><p>
Comparación para distintos valores de N.
</p>
<div class="org-src-container">
<pre class="src src-txt">+-----+----------------------+---------------------+---------------------+
|   N | reinas_1             | reinas_2            | reinas_3            |
+-----+-------------+--------+---------------------+---------------------+
|     | inferencias |   seg. | inferencias |  seg. | inferencias |  seg. |
+-----+-------------+--------+-------------+-------+-------------+-------+
|   4 |         401 |   0.00 |         543 |  0.00 |         546 |  0.00 |
|   6 |       8,342 |   0.00 |      20,844 |  0.01 |       6,660 |  0.01 |
|   8 |     195,628 |   0.15 |   1,422,318 |  0.91 |     120,614 |  0.09 |
|  10 |   5,303,845 |   4.05 | 150,300,540 | 96.82 |   2,774,095 |  2.01 |
|  12 | 182,574,715 | 147.22 |             |       |  83,067,721 | 64.93 |
+-----+-------------+--------+-------------+-------+-------------+-------+
</pre>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgf63f7c5" class="outline-2">
<h2 id="orgf63f7c5"><span class="section-number-2">3.</span> Coloreado de mapas</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li>Un mapa puede representarse mediante la relación <code>mapa(N,L)</code> donde <code>N</code> es el
nombre del mapa y <code>L</code> es la lista de los pares formados por cada una de las
regiones del mapa y la lista de sus regiones vecinas. Por ejemplo, los mapas
siguientes</li>
</ul>
<div class="org-src-container">
<pre class="src src-txt">+----------+----------+       +----+-----+-----+----+
|    a     |     b    |       | a  |  b  |  c  | d  |
+----+-----+-----+----+       +----+-----+-----+----+
|    |           |    |       | e  |           | f  |
| c  |     d     | e  |       +----+     k     +----+
|    |           |    |       | g  |           | h  |
+----+-----+-----+----+       +----+-----+-----+----+
|    f     |     g    |       |    i     |     j    |
+----------+----------+       +----------+----------+
</pre>
</div>
<p>
se pueden representar por
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">mapa</span><span style="color: #707183;">(</span>ejemplo_1,
     <span style="color: #7388d6;">[</span>a-<span style="color: #909183;">[</span>b,c,d<span style="color: #909183;">]</span>,
      b-<span style="color: #909183;">[</span>a,d,e<span style="color: #909183;">]</span>,
      c-<span style="color: #909183;">[</span>a,d,f<span style="color: #909183;">]</span>,
      d-<span style="color: #909183;">[</span>a,b,c,e,f,g<span style="color: #909183;">]</span>,
      e-<span style="color: #909183;">[</span>b,d,g<span style="color: #909183;">]</span>,
      f-<span style="color: #909183;">[</span>c,d,g<span style="color: #909183;">]</span>,
      g-<span style="color: #909183;">[</span>d,e,f<span style="color: #909183;">]</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">mapa</span><span style="color: #707183;">(</span>ejemplo_2,
     <span style="color: #7388d6;">[</span>a-<span style="color: #909183;">[</span>b,e,k<span style="color: #909183;">]</span>,
      b-<span style="color: #909183;">[</span>a,c,e,k<span style="color: #909183;">]</span>,
      c-<span style="color: #909183;">[</span>b,d,f,k<span style="color: #909183;">]</span>,
      d-<span style="color: #909183;">[</span>c,f,k<span style="color: #909183;">]</span>,
      e-<span style="color: #909183;">[</span>a,b,g,k<span style="color: #909183;">]</span>,
      f-<span style="color: #909183;">[</span>c,d,h,k<span style="color: #909183;">]</span>,
      g-<span style="color: #909183;">[</span>e,i,k<span style="color: #909183;">]</span>,
      h-<span style="color: #909183;">[</span>f,j,k<span style="color: #909183;">]</span>,
      i-<span style="color: #909183;">[</span>g,j,k<span style="color: #909183;">]</span>,
      j-<span style="color: #909183;">[</span>i,h,k<span style="color: #909183;">]</span>,
      k-<span style="color: #909183;">[</span>a,b,c,d,e,f,g,h,i,j<span style="color: #909183;">]</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
</pre>
</div>

<ul class="org-ul">
<li><p>
<code>coloración(+M,+LC,-S)</code> se verifica si <code>S</code> es una lista de pares formados por
una región del mapa <code>M</code> y uno de los colores de la lista de colores <code>LC</code> tal
que las regiones vecinas tengan colores distintos.  Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- coloraci&#243;n<span style="color: #707183;">(</span>ejemplo_1,<span style="color: #7388d6;">[</span>1,2,3<span style="color: #7388d6;">]</span>,S<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
S = <span style="color: #707183;">[</span>a-1, b-2, c-2, d-3, e-1, f-1, g-2<span style="color: #707183;">]</span>
</pre>
</div>
<p>
Sus definiciones son
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #b22222;">% </span><span style="color: #b22222;">1&#170; soluci&#243;n</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">===========</span>

<span style="color: #0000ff;">coloraci&#243;n_1</span><span style="color: #707183;">(</span><span style="color: #a0522d;">M</span>,<span style="color: #a0522d;">LC</span>,<span style="color: #a0522d;">S</span><span style="color: #707183;">)</span> :-
   mapa<span style="color: #707183;">(</span><span style="color: #a0522d;">M</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,
   coloraci&#243;n_1_aux<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span>,<span style="color: #a0522d;">LC</span>,<span style="color: #a0522d;">S</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">coloraci&#243;n_1_aux</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[]</span>,<span style="color: #a0522d;">_</span>,<span style="color: #7388d6;">[]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">coloraci&#243;n_1_aux</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">R</span>-<span style="color: #a0522d;">V</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L</span><span style="color: #7388d6;">]</span>,<span style="color: #a0522d;">LC</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">R</span>-<span style="color: #a0522d;">C</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">S</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   member<span style="color: #707183;">(</span><span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">LC</span><span style="color: #707183;">)</span>,
   coloraci&#243;n_1_aux<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span>,<span style="color: #a0522d;">LC</span>,<span style="color: #a0522d;">S</span><span style="color: #707183;">)</span>,
   not<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>member<span style="color: #909183;">(</span><span style="color: #a0522d;">R1</span>,<span style="color: #a0522d;">V</span><span style="color: #909183;">)</span>, member<span style="color: #909183;">(</span><span style="color: #a0522d;">R1</span>-<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">S</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">2&#170; soluci&#243;n</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">===========</span>

<span style="color: #0000ff;">coloraci&#243;n_2</span><span style="color: #707183;">(</span><span style="color: #a0522d;">M</span>,<span style="color: #a0522d;">LC</span>,<span style="color: #a0522d;">S</span><span style="color: #707183;">)</span> :-
   mapa<span style="color: #707183;">(</span><span style="color: #a0522d;">M</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,
   coloraci&#243;n_2_aux<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span>,<span style="color: #a0522d;">LC</span>,<span style="color: #7388d6;">[]</span>,<span style="color: #a0522d;">S</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">coloraci&#243;n_2_aux</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[]</span>,<span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">S</span>,<span style="color: #a0522d;">S</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">coloraci&#243;n_2_aux</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">R</span>-<span style="color: #a0522d;">V</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L</span><span style="color: #7388d6;">]</span>,<span style="color: #a0522d;">LC</span>,<span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">S</span><span style="color: #707183;">)</span> :-
   member<span style="color: #707183;">(</span><span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">LC</span><span style="color: #707183;">)</span>,
   not<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>member<span style="color: #909183;">(</span><span style="color: #a0522d;">R1</span>,<span style="color: #a0522d;">V</span><span style="color: #909183;">)</span>, member<span style="color: #909183;">(</span><span style="color: #a0522d;">R1</span>-<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">A</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>,
   coloraci&#243;n_2_aux<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span>,<span style="color: #a0522d;">LC</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">R</span>-<span style="color: #a0522d;">C</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">A</span><span style="color: #7388d6;">]</span>,<span style="color: #a0522d;">S</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
La comparación es
</p>
<div class="org-src-container">
<pre class="src src-shell">?- set_prolog_flag<span style="color: #707183;">(</span>answer_write_options, <span style="color: #7388d6;">[</span>quoted<span style="color: #909183;">(</span>true<span style="color: #909183;">)</span>, portray<span style="color: #909183;">(</span>true<span style="color: #909183;">)</span>, max_depth<span style="color: #909183;">(</span>100<span style="color: #909183;">)</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
true.

?- time<span style="color: #707183;">(</span>coloraci&#243;n_1<span style="color: #7388d6;">(</span>ejemplo_2,<span style="color: #909183;">[</span>1,2,3,4<span style="color: #909183;">]</span>,S<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
% 18,002,577 inferences, 1.297 CPU<span style="color: #a020f0;"> in</span> 1.297 seconds <span style="color: #707183;">(</span>100% CPU, 13875597 Lips<span style="color: #707183;">)</span>
S = <span style="color: #707183;">[</span>a-1,b-2,c-1,d-2,e-3,f-3,g-1,h-1,i-2,j-3,k-4<span style="color: #707183;">]</span>

?- time<span style="color: #707183;">(</span>coloraci&#243;n_2<span style="color: #7388d6;">(</span>ejemplo_2,<span style="color: #909183;">[</span>1,2,3,4<span style="color: #909183;">]</span>,S<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
% 590 inferences, 0.000 CPU<span style="color: #a020f0;"> in</span> 0.000 seconds <span style="color: #707183;">(</span>98% CPU, 1804977 Lips<span style="color: #707183;">)</span>
S = <span style="color: #707183;">[</span>k-4,j-3,i-2,h-1,g-1,f-3,e-3,d-2,c-1,b-2,a-1<span style="color: #707183;">]</span>
</pre>
</div></li>

<li><p>
Para determinar el número de colores necesarios para colorear el segundo mapa,
se hacen los siguientes cálculos
</p>
<div class="org-src-container">
<pre class="src src-shell">?- findall<span style="color: #707183;">(</span>_S,coloraci&#243;n_2<span style="color: #7388d6;">(</span>ejemplo_2,<span style="color: #909183;">[</span>1,2,3<span style="color: #909183;">]</span>,_S<span style="color: #7388d6;">)</span>,_L<span style="color: #707183;">)</span>, length<span style="color: #707183;">(</span>_L,N<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = 0.

?- findall<span style="color: #707183;">(</span>_S,coloraci&#243;n_2<span style="color: #7388d6;">(</span>ejemplo_2,<span style="color: #909183;">[</span>1,2,3,4<span style="color: #909183;">]</span>,_S<span style="color: #7388d6;">)</span>,_L<span style="color: #707183;">)</span>, length<span style="color: #707183;">(</span>_L,N<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = 1032.
</pre>
</div>
<p>
Por tanto, se necesitan 4 colores para colorear el segundo mapa y puede
colorearse de 1032 formas con dicho número.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgaec9744" class="outline-2">
<h2 id="orgaec9744"><span class="section-number-2">4.</span> Ejercicios</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li><p>
Nota. Usaremos las relaciones de <code>camino.pl</code>.
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- <span style="color: #707183;">[</span>camino<span style="color: #707183;">]</span>.
</pre>
</div></li>

<li><p>
Nota: También usaremos los siguientes ejemplos de grafo
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">grafo</span><span style="color: #707183;">(</span>g1,<span style="color: #7388d6;">[</span>a-b,b-c,b-d,c-d<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">grafo</span><span style="color: #707183;">(</span>g2,<span style="color: #7388d6;">[</span>a-b,c-d<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">grafo</span><span style="color: #707183;">(</span>g3,<span style="color: #7388d6;">[</span>a-b,b-c,b-d<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">grafo</span><span style="color: #707183;">(</span>g4,<span style="color: #7388d6;">[</span>a-b,b-c<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
</pre>
</div></li>
</ul>

<hr />
<p>
<b>Ejercicio 1.</b> Definir la relación <code>conectado(+G)</code> que se verifica si el
grafo <code>G</code> está conectado; es decir, existe un camino entre cada par de
vértices distintos. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- conectado<span style="color: #707183;">(</span>g1<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
true.

?- conectado<span style="color: #707183;">(</span>g2<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.

?- conectado<span style="color: #707183;">(</span>g3<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
true.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>

<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">conectado</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G</span><span style="color: #707183;">)</span> :-
   not<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>nodo<span style="color: #909183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">X</span><span style="color: #909183;">)</span>, nodo<span style="color: #909183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">Y</span><span style="color: #909183;">)</span>, not<span style="color: #909183;">(</span>camino<span style="color: #709870;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span>,<span style="color: #a0522d;">_</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.
</pre>
</div>

<hr />
<p>
<b>Ejercicio 2.</b> Definir la relación <code>tiene_ciclos(+G)</code> que se verifica si
en el grafo <code>G</code> hay ciclos. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- tiene_ciclos<span style="color: #707183;">(</span>g1<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
true

?- tiene_ciclos<span style="color: #707183;">(</span>g2<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.

?- tiene_ciclos<span style="color: #707183;">(</span>g3<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.
</pre>
</div>
<hr />
<p>
<b>Solución</b>
</p>

<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">tiene_ciclos</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G</span><span style="color: #707183;">)</span> :-
   adyacente<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #707183;">)</span>,
   camino<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">_</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">_</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
</pre>
</div>

<hr />
<p>
<b>Ejercicio 3.</b> Definir la relación <code>es_árbol(+G)</code> que se verifica si <code>G</code>
es un árbol; es decir, <code>G</code> es un grafo conectado sin ciclos. Por
ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- es_&#225;rbol<span style="color: #707183;">(</span>g1<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.

?- es_&#225;rbol<span style="color: #707183;">(</span>g2<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.

?- es_&#225;rbol<span style="color: #707183;">(</span>g3<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
true.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>

<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">es_&#225;rbol</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G</span><span style="color: #707183;">)</span> :-
   conectado<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span><span style="color: #707183;">)</span>,
   not<span style="color: #707183;">(</span>tiene_ciclos<span style="color: #7388d6;">(</span><span style="color: #a0522d;">G</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.
</pre>
</div>

<hr />
<p>
<b>Ejercicio 4.</b> Definir la relación <code>recubre(+G1,+G2)</code> que se verifica si
el grafo <code>G1</code> recubre el grafo <code>G2</code> (es decir, todos los nodos del grafo
<code>G2</code> son nodos del grafo <code>G1</code>). Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- recubre<span style="color: #707183;">(</span>g3,g4<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
true.

?- recubre<span style="color: #707183;">(</span>g4,g3<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>

<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">recubre</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G1</span>,<span style="color: #a0522d;">G2</span><span style="color: #707183;">)</span> :-
   not<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>nodo<span style="color: #909183;">(</span><span style="color: #a0522d;">G2</span>,<span style="color: #a0522d;">X</span><span style="color: #909183;">)</span>, not<span style="color: #909183;">(</span>nodo<span style="color: #709870;">(</span><span style="color: #a0522d;">G1</span>,<span style="color: #a0522d;">X</span><span style="color: #709870;">)</span><span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.
</pre>
</div>

<hr />
<p>
<b>Ejercicio 4.</b> Definir la relación <code>árbol_de_expansión(+G,?A)</code> que se
verifica si <code>A</code> es un árbol de expansión de <code>G</code>; es decir, <code>A</code> es un
subgrafo de <code>G</code> que es un árbol y recubre a <code>G</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- &#225;rbol_de_expansi&#243;n<span style="color: #707183;">(</span>g1,A<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
A = grafo<span style="color: #707183;">(</span>ae2, <span style="color: #7388d6;">[</span>a-b, b-c, b-d<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> ;
A = grafo<span style="color: #707183;">(</span>ae3, <span style="color: #7388d6;">[</span>a-b, b-c, c-d<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> ;
A = grafo<span style="color: #707183;">(</span>ae5, <span style="color: #7388d6;">[</span>a-b, b-d, c-d<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> ;
false.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>

<div class="org-src-container">
<pre class="src src-prolog">:- <span style="color: #483d8b;">dynamic</span> <span style="color: #0000ff;">grafo/2</span>.

<span style="color: #0000ff;">&#225;rbol_de_expansi&#243;n</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">A</span><span style="color: #707183;">)</span> :-
   reset_gensym<span style="color: #707183;">(</span>ae<span style="color: #707183;">)</span>,
   &#225;rbol_de_expansi&#243;n_aux<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">A</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">&#225;rbol_de_expansi&#243;n_aux</span><span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">A</span><span style="color: #707183;">)</span> :-
   arcos<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">L1</span><span style="color: #707183;">)</span>,
   subconjunto<span style="color: #707183;">(</span><span style="color: #a0522d;">L2</span>,<span style="color: #a0522d;">L1</span><span style="color: #707183;">)</span>,
   gensym<span style="color: #707183;">(</span>ae,<span style="color: #a0522d;">E</span><span style="color: #707183;">)</span>,
   <span style="color: #a0522d;">A</span> =.. <span style="color: #707183;">[</span>grafo,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">L2</span><span style="color: #707183;">]</span>,
   asserta<span style="color: #707183;">(</span><span style="color: #a0522d;">A</span><span style="color: #707183;">)</span>,
   es_&#225;rbol<span style="color: #707183;">(</span><span style="color: #a0522d;">E</span><span style="color: #707183;">)</span>,
   recubre<span style="color: #707183;">(</span><span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">G</span><span style="color: #707183;">)</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">subconjunto(?L1,+L2) se verifica si L1 es un subconjunto de L2. Por</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">ejemplo,</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">?- subconjunto(L,[a,b,c]).</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">L = [a, b, c] ;</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">L = [a, b] ;</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">L = [a, c] ;</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">L = [a] ;</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">L = [b, c] ;</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">L = [b] ;</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">L = [c] ;</span>
<span style="color: #b22222;">%    </span><span style="color: #b22222;">L = [].</span>
<span style="color: #0000ff;">subconjunto</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[]</span>,<span style="color: #7388d6;">[]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">subconjunto</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">X</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L1</span><span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">X</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L2</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   subconjunto<span style="color: #707183;">(</span><span style="color: #a0522d;">L1</span>,<span style="color: #a0522d;">L2</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">subconjunto</span><span style="color: #707183;">(</span><span style="color: #a0522d;">L1</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">_</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L2</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   subconjunto<span style="color: #707183;">(</span><span style="color: #a0522d;">L1</span>,<span style="color: #a0522d;">L2</span><span style="color: #707183;">)</span>.
</pre>
</div>
</div>
</div>

<div id="outline-container-org8d6d773" class="outline-2">
<h2 id="org8d6d773"><span class="section-number-2">5.</span> Bibliografía</h2>
<div class="outline-text-2" id="text-5">
<ul class="org-ul">
<li>I. Bratko
<a href="https://archive.org/details/prologprogrammin0000brat_w4b1">Prolog programming for artificial intelligence (3 ed.)</a>
(Addison-Wesley, 1990)
<ul class="org-ul">
<li>Cap. 4: "Using structures: example programs"</li>
<li>Cap. 9: "Operations on data structures"</li>
</ul></li>

<li>L. Sterling y E. Shapiro
<a href="https://archive.org/details/artofprologadvan00ster">The art of Prolog (2nd Edition)</a>.
(The MIT Press, 1994)
<ul class="org-ul">
<li>Cap. 2 "Database programming"</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr>
<center>
<p><a href="/"><i class="fa fa-home"></i></a> |
   <a href="/materias/PLconProlog/">Inicial</a> |
   <a href="/materias/PLconProlog/temas.html">Temas  </a> |
   <a href="/materias/PLconProlog/sistemas.html">Sistemas </a> |
   <a href="/materias/PLconProlog/cursos.html">Cursos </a> |
   <a href="/materias/PLconProlog/doc.html">Documentación  </a>
</p>
</center>
<div id="extras">
  <p><a href="/">José A. Alonso Jiménez</a>
  <p>Sevilla, 03 de junio del 2022</p>
  <p><i class="fa fa-cc"></i> Licencia: <a href="https://creativecommons.org/licenses/by-nc-sa/2.5/es/">Creative Commons</a>.</p>
</div>
</div>
</body>
</html>
