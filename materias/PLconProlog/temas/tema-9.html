<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
<head>
<!-- 02 de junio del 2022 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tema 9: Programación lógica con restricciones</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="José A. Alonso" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../../../css/estilo-org.css" />
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script type="text/javascript">
// @license magnet:?xt=urn:btih:1f739d935676111cfff4b4693e3816e664797050&amp;dn=gpl-3.0.txt GPL-v3-or-Later
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="preamble" class="status">
<p><a href="/"><i class="fa fa-home"></i></a> |
   <a href="/materias/PLconProlog/">Inicial</a> |
   <a href="/materias/PLconProlog/temas.html">Temas  </a> |
   <a href="/materias/PLconProlog/sistemas.html">Sistemas </a> |
   <a href="/materias/PLconProlog/cursos.html">Cursos </a> |
   <a href="/materias/PLconProlog/doc.html">Documentación  </a>
</p>
</div>
<div id="content">
<h1 class="title">Tema 9: Programación lógica con restricciones</h1>
<div id="table-of-contents">
<h2>&Iacute;ndice</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgca829aa">1. Restricciones sobre números reales: CLP(R)</a>
<ul>
<li><a href="#orgc8a2361">1.1. Uso del módulo de restricciones sobre números reales</a></li>
<li><a href="#orga7ccb6c">1.2. Ecuaciones e inecuaciones en CLP(R)</a></li>
<li><a href="#orga41adb2">1.3. Programa con CLP(R</a></li>
<li><a href="#org7035b3b">1.4. Optimización con CLP(R)</a></li>
<li><a href="#org6ef48f9">1.5. Planificación de tareas</a></li>
<li><a href="#org371aa41">1.6. La sucesión de Fibonacci</a></li>
</ul>
</li>
<li><a href="#org37b43cb">2. Restricciones sobre números racionales: CLP(Q)</a>
<ul>
<li><a href="#orgdc126c2">2.1. Uso del módulo de restricciones sobre números racionales</a></li>
<li><a href="#org251bfb0">2.2. Planificación de tareas con CLP(Q)</a></li>
</ul>
</li>
<li><a href="#orgc063bc4">3. Restricciones sobre dominios finitos: CLP(FD)</a>
<ul>
<li><a href="#org9772e63">3.1. El módulo de restricciones sobre dominios finitos: CLP(FD)</a></li>
<li><a href="#org34967c4">3.2. Criptoaritmética</a></li>
<li><a href="#org6ad8f65">3.3. Problema de las N reinas</a></li>
<li><a href="#orgd5fc42d">3.4. Optimización con CLP(FD)</a></li>
<li><a href="#org3487525">3.5. Planificación de tareas con CLP(FD)</a></li>
<li><a href="#org399962c">3.6. Planificación óptima de tareas con CLP(FD)</a></li>
<li><a href="#org9a6a6c1">3.7. Problema de los músicos mediante CLP(FD)</a></li>
<li><a href="#orgd7ff0e7">3.8. El problema de la cebra con CLP(FD).</a></li>
</ul>
</li>
<li><a href="#org4821d06">4. Restricciones sobre variables booleanas con CLP(B)</a>
<ul>
<li><a href="#orgae93da8">4.1. El módulo de restricciones booleanas: CLP(B)</a></li>
<li><a href="#orgfe10548">4.2. Caballeros y escuderos</a></li>
<li><a href="#org732e622">4.3. La frase correcta</a></li>
</ul>
</li>
<li><a href="#org524f085">5. Ejercicios</a>
<ul>
<li><a href="#orgf8890e0">5.1. Producto escalar con CLP(R)</a></li>
<li><a href="#org745ef40">5.2. Matrices equilibradas</a></li>
<li><a href="#org71d10c2">5.3. Criptoarimética con CUATRO * 5 = VEINTE</a></li>
<li><a href="#orgb96ae9c">5.4. Problema de la mochila</a></li>
<li><a href="#orgf39330d">5.5. Asignación óptima de tareas</a></li>
<li><a href="#org92524fb">5.6. El factorial</a></li>
<li><a href="#org2e5b7eb">5.7. El máximo de dos números enteros</a></li>
<li><a href="#orge91b23b">5.8. El algoritmo de Euclides</a></li>
<li><a href="#org32861ea">5.9. Recorridos del caballo de ajedrez</a></li>
<li><a href="#orgc4358f9">5.10. Descomposiciones en productos de dos factores</a></li>
<li><a href="#org9bd78cc">5.11. Descomposiciones en sumas de dos sumandos</a></li>
<li><a href="#orgcccbc91">5.12. Cuadrados mágicos</a></li>
<li><a href="#orgd4f6d22">5.13. Sucesión de Fibonacci</a></li>
<li><a href="#orgda5fae8">5.14. Problema de las N reinas</a></li>
<li><a href="#orgb4e26e0">5.15. Coloreado de mapas</a></li>
</ul>
</li>
<li><a href="#orgebe9dc4">6. Bibliografía</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgca829aa" class="outline-2">
<h2 id="orgca829aa"><span class="section-number-2">1.</span> Restricciones sobre números reales: CLP(R)</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgc8a2361" class="outline-3">
<h3 id="orgc8a2361"><span class="section-number-3">1.1.</span> Uso del módulo de restricciones sobre números reales</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li><p>
Importación del módulo
</p>
<div class="org-src-container">
<pre class="src src-shell">?- use_module<span style="color: #707183;">(</span>library<span style="color: #7388d6;">(</span>clpr<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
true.
</pre>
</div></li>

<li><p>
Diferencia entre objetivo y restricción:
</p>
<div class="org-src-container">
<pre class="src src-shell">?- 1 + X = 5.
false.

?- <span style="color: #707183;">{</span>1 + X = 5<span style="color: #707183;">}</span><span style="color: #483d8b;">.</span>
X = 4.0 
</pre>
</div></li>

<li>Restricciones aritméticas en CLP(R):
<ul class="org-ul">
<li>&lt;restricciones&gt; := {&lt;restricción 1&gt;, &lt;restricción 2&gt;, &#x2026;}</li>
<li>&lt;restricción&gt; := &lt;expresión 1&gt; &lt;operador&gt; &lt;expresión 2&gt; <br />
donde
<ul class="org-ul">
<li>&lt;expresión 1&gt; y &lt;expresión 2&gt; son expresiones aritméticas</li>
<li>&lt;operador&gt; es uno de los siguientes: <code>=, =\=, &lt;, =&lt;, &gt;, &gt;=</code></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orga7ccb6c" class="outline-3">
<h3 id="orga7ccb6c"><span class="section-number-3">1.2.</span> Ecuaciones e inecuaciones en CLP(R)</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li><p>
Ejemplo de ecuaciones e inecuaciones:
</p>
<div class="org-src-container">
<pre class="src src-shell">?- <span style="color: #707183;">{</span>3 * X - 2 * Y = 6, 2 * Y = X<span style="color: #707183;">}</span><span style="color: #483d8b;">.</span>
X = 3.0,
Y = 1.5.

?- <span style="color: #707183;">{</span>Z =&lt; X - 2, X + 2 = 5<span style="color: #707183;">}</span><span style="color: #483d8b;">.</span>
X = 3.0,
<span style="color: #707183;">{</span><span style="color: #a0522d;">Z</span>=1.0-_12374,_12374&gt;=0.0<span style="color: #707183;">}</span> 

?- <span style="color: #707183;">{</span>X &gt; 0, X + 2 &lt; 0<span style="color: #707183;">}</span><span style="color: #483d8b;">.</span>
false.
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orga41adb2" class="outline-3">
<h3 id="orga41adb2"><span class="section-number-3">1.3.</span> Programa con CLP(R</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li><code>convierte(-C,+F)</code> se verifica si <code>C</code> son los grados centígrados
correspondientes a <code>F</code> grados Fahrenheit; es decir, 
C = (F-32)*5/9.</li>

<li><p>
Programa Prolog
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">convierte_1</span><span style="color: #707183;">(</span><span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">F</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">C</span> is <span style="color: #707183;">(</span><span style="color: #a0522d;">F</span>-32<span style="color: #707183;">)</span>*5/9.
</pre>
</div></li>

<li><p>
Sesión con el programa Prolog
</p>
<div class="org-src-container">
<pre class="src src-shell">?- convierte_1<span style="color: #707183;">(</span>C,95<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
C = 35.

?- convierte_1<span style="color: #707183;">(</span>35,F<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
ERROR: Arguments are not sufficiently instantiated
</pre>
</div></li>

<li><p>
Programa CLP(R)
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- use_module<span style="color: #707183;">(</span>library<span style="color: #7388d6;">(</span>clpr<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">convierte_2</span><span style="color: #707183;">(</span><span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">F</span><span style="color: #707183;">)</span> :-
   <span style="color: #707183;">{</span><span style="color: #a0522d;">C</span> = <span style="color: #7388d6;">(</span><span style="color: #a0522d;">F</span>-32<span style="color: #7388d6;">)</span>*5/9<span style="color: #707183;">}</span>.
</pre>
</div></li>

<li><p>
Sesión con el programa CLP(R)
</p>
<div class="org-src-container">
<pre class="src src-prolog">?- convierte_2<span style="color: #707183;">(</span><span style="color: #a0522d;">C</span>,95<span style="color: #707183;">)</span>.
<span style="color: #a0522d;">C</span> = 35.0 
?- convierte_2<span style="color: #707183;">(</span>35,<span style="color: #a0522d;">F</span><span style="color: #707183;">)</span>.
<span style="color: #a0522d;">F</span> = 95.0 
?- convierte_2<span style="color: #707183;">(</span><span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">F</span><span style="color: #707183;">)</span>.
<span style="color: #707183;">{</span><span style="color: #a0522d;">F</span>=32.0+1.7999999999999998*<span style="color: #a0522d;">C</span><span style="color: #707183;">}</span>.
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org7035b3b" class="outline-3">
<h3 id="org7035b3b"><span class="section-number-3">1.4.</span> Optimización con CLP(R)</h3>
<div class="outline-text-3" id="text-1-4">
<ul class="org-ul">
<li><p>
Optimización con <code>minimize/1</code> y <code>maximize/1</code>:
</p>
<div class="org-src-container">
<pre class="src src-shell">?- <span style="color: #707183;">{</span>X =&lt; 5<span style="color: #707183;">}</span>, maximize<span style="color: #707183;">(</span>X<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = 5.0 

?- <span style="color: #707183;">{</span>X =&lt; 5, 2 =&lt; X<span style="color: #707183;">}</span>, minimize<span style="color: #707183;">(</span>2 * X + 3<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = 2.0 

?- <span style="color: #707183;">{</span>3 =&lt; X, X + 1 =&lt; Y + 2, Y =&lt; 9, Z = X + Y<span style="color: #707183;">}</span>, minimize<span style="color: #707183;">(</span>Z<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = 3.0,
Y = 2.0,
Z = 5.0 

?- <span style="color: #707183;">{</span>X + Y =&lt; 4<span style="color: #707183;">}</span>, maximize<span style="color: #707183;">(</span>X + Y<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
<span style="color: #707183;">{</span><span style="color: #a0522d;">Y</span>=4.0-X<span style="color: #707183;">}</span> 

?- <span style="color: #707183;">{</span>X =&lt; 5<span style="color: #707183;">}</span>, minimize<span style="color: #707183;">(</span>X<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.
</pre>
</div></li>

<li><p>
Optimización con <code>sup/2</code> e <code>inf/2</code>:
</p>
<div class="org-src-container">
<pre class="src src-shell">?- <span style="color: #707183;">{</span>2 =&lt; X, X =&lt; 5<span style="color: #707183;">}</span>, inf<span style="color: #707183;">(</span>X, I<span style="color: #707183;">)</span>, sup<span style="color: #707183;">(</span>X, S<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
I = 2.0,
S = 5.0,
<span style="color: #707183;">{</span>X&gt;=2.0,<span style="color: #a0522d;">X</span>=&lt;5.0<span style="color: #707183;">}</span>

?- <span style="color: #707183;">{</span>3 =&lt; X, X + 1 =&lt; Y + 2, Y =&lt; 9, Z = X + Y<span style="color: #707183;">}</span>, inf<span style="color: #707183;">(</span>Z, I<span style="color: #707183;">)</span>, sup<span style="color: #707183;">(</span>Z, S<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
I = 5.0,
S = 19.0,
<span style="color: #707183;">{</span><span style="color: #a0522d;">Z</span>= -1.0+2.0*X+_6360,_6360&gt;=0.0,<span style="color: #a0522d;">Y</span>= -1.0+X+_6360,X+<span style="color: #a0522d;">_6360</span>=&lt;10.0,X&gt;=3.0<span style="color: #707183;">}</span> 
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org6ef48f9" class="outline-3">
<h3 id="org6ef48f9"><span class="section-number-3">1.5.</span> Planificación de tareas</h3>
<div class="outline-text-3" id="text-1-5">
<ul class="org-ul">
<li>Problema: Calcular el menor tiempo necesario para realizar las tareas
A, B, C y D teniendo en cuenta que los tiempos empleados en cada una
son 2, 3, 5 y 4, respectivamente, y además que A precede a B y a C y
que B precede a D. <br />
<img src="./fig/tema-9-tareas.png" alt="tema-9-tareas.png" /></li>

<li><p>
Plan óptimo:
</p>
<div class="org-src-container">
<pre class="src src-shell">?- <span style="color: #707183;">{</span>Ta &gt;= 0, Ta + 2 =&lt; Tb, Ta + 2 =&lt; Tc, Tb + 3 =&lt; Td, Tc + 5 =&lt; Tf, Td + 4 =&lt; Tf<span style="color: #707183;">}</span>,
   minimize<span style="color: #707183;">(</span>Tf<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Ta = 0.0,
Tb = 2.0,
Td = 5.0,
Tf = 9.0,
<span style="color: #707183;">{</span>_9152&gt;=0.0,<span style="color: #a0522d;">_9170</span>=2.0-_9152,<span style="color: #a0522d;">_9152</span>=&lt;2.0,<span style="color: #a0522d;">Tc</span>=4.0-_9152<span style="color: #707183;">}</span> 
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org371aa41" class="outline-3">
<h3 id="org371aa41"><span class="section-number-3">1.6.</span> La sucesión de Fibonacci</h3>
<div class="outline-text-3" id="text-1-6">
<ul class="org-ul">
<li><code>fib(+N,-F)</code> se verifica si <code>F</code> es el <code>N</code>-ésimo término de la sucesión
de Fibonacci; es decir, 0, 1, 1, 2, 3, 5, 8, 13, 21, &#x2026;</li>

<li><p>
Programa Prolog (sin restricciones)
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">fib_1</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>, <span style="color: #a0522d;">F</span><span style="color: #707183;">)</span> :-
   <span style="color: #707183;">(</span> <span style="color: #a0522d;">N</span> = 0, <span style="color: #a0522d;">F</span> = 1
   <span style="color: #a020f0;">;</span> <span style="color: #a0522d;">N</span> = 1, <span style="color: #a0522d;">F</span> = 1
   <span style="color: #a020f0;">;</span> <span style="color: #a0522d;">N</span> &gt; 1,
     <span style="color: #a0522d;">N1</span> is <span style="color: #a0522d;">N</span> - 1, fib_1<span style="color: #7388d6;">(</span><span style="color: #a0522d;">N1</span>, <span style="color: #a0522d;">F1</span><span style="color: #7388d6;">)</span>,
     <span style="color: #a0522d;">N2</span> is <span style="color: #a0522d;">N</span> - 2, fib_1<span style="color: #7388d6;">(</span><span style="color: #a0522d;">N2</span>, <span style="color: #a0522d;">F2</span><span style="color: #7388d6;">)</span>,
     <span style="color: #a0522d;">F</span> is <span style="color: #a0522d;">F1</span> + <span style="color: #a0522d;">F2</span> <span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
Sesión con el programa Prolog
</p>
<div class="org-src-container">
<pre class="src src-shell">?- fib_1<span style="color: #707183;">(</span>6,F<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
F = 13 

?- fib_1<span style="color: #707183;">(</span>N,13<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
ERROR: Arguments are not sufficiently instantiated
</pre>
</div></li>

<li><p>
Programa CLP(R)
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- use_module<span style="color: #707183;">(</span>library<span style="color: #7388d6;">(</span>clpr<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">fib_2</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>, <span style="color: #a0522d;">F</span><span style="color: #707183;">)</span> :-
   <span style="color: #707183;">(</span> <span style="color: #7388d6;">{</span><span style="color: #a0522d;">N</span> = 0, <span style="color: #a0522d;">F</span> = 1<span style="color: #7388d6;">}</span>
   <span style="color: #a020f0;">;</span> <span style="color: #7388d6;">{</span><span style="color: #a0522d;">N</span> = 1, <span style="color: #a0522d;">F</span> = 1<span style="color: #7388d6;">}</span>
   <span style="color: #a020f0;">;</span> <span style="color: #7388d6;">{</span><span style="color: #a0522d;">N</span> &gt; 1, <span style="color: #a0522d;">F</span> = <span style="color: #a0522d;">F1</span> + <span style="color: #a0522d;">F2</span>, <span style="color: #a0522d;">N1</span> = <span style="color: #a0522d;">N</span>- 1, <span style="color: #a0522d;">N2</span> = <span style="color: #a0522d;">N</span> - 2<span style="color: #7388d6;">}</span>,
     fib_2<span style="color: #7388d6;">(</span><span style="color: #a0522d;">N1</span>, <span style="color: #a0522d;">F1</span><span style="color: #7388d6;">)</span>,
     fib_2<span style="color: #7388d6;">(</span><span style="color: #a0522d;">N2</span>, <span style="color: #a0522d;">F2</span><span style="color: #7388d6;">)</span> <span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
Sesión con el programa CLP(R)
</p>
<div class="org-src-container">
<pre class="src src-shell">?- fib_2<span style="color: #707183;">(</span>6, F<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
F = 13.0 

?- fib_2<span style="color: #707183;">(</span>N,13<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = 6.0 

?- fib_2<span style="color: #707183;">(</span>N,4<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
ERROR: Out of global stack
</pre>
</div></li>

<li><p>
Modificación de <code>fib_2</code> para determinar los números que no son
términos de la sucesión
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">fib_3</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>, <span style="color: #a0522d;">F</span><span style="color: #707183;">)</span> :-
   <span style="color: #707183;">(</span> <span style="color: #7388d6;">{</span><span style="color: #a0522d;">N</span> = 0, <span style="color: #a0522d;">F</span> = 1<span style="color: #7388d6;">}</span>
   <span style="color: #a020f0;">;</span> <span style="color: #7388d6;">{</span><span style="color: #a0522d;">N</span> = 1, <span style="color: #a0522d;">F</span> = 1<span style="color: #7388d6;">}</span>
   <span style="color: #a020f0;">;</span> <span style="color: #7388d6;">{</span><span style="color: #a0522d;">N</span> &gt; 1, <span style="color: #a0522d;">F</span> = <span style="color: #a0522d;">F1</span> + <span style="color: #a0522d;">F2</span>, <span style="color: #a0522d;">N1</span> = <span style="color: #a0522d;">N</span> - 1, <span style="color: #a0522d;">N2</span> = <span style="color: #a0522d;">N</span> - 2, <span style="color: #a0522d;">F1</span> &gt;= <span style="color: #a0522d;">N1</span>, <span style="color: #a0522d;">F2</span> &gt;= <span style="color: #a0522d;">N2</span><span style="color: #7388d6;">}</span>,
     fib_3<span style="color: #7388d6;">(</span><span style="color: #a0522d;">N1</span>, <span style="color: #a0522d;">F1</span><span style="color: #7388d6;">)</span>,
     fib_3<span style="color: #7388d6;">(</span><span style="color: #a0522d;">N2</span>, <span style="color: #a0522d;">F2</span><span style="color: #7388d6;">)</span> <span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
Sesión
</p>
<div class="org-src-container">
<pre class="src src-shell">?- fib_3<span style="color: #707183;">(</span>6,F<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
F = 13.0 

?- fib_3<span style="color: #707183;">(</span>N,13<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = 6.0 

?- fib_3<span style="color: #707183;">(</span>N,4<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.
</pre>
</div></li>

<li>El código de las definiciones anteriores se encuentra en <a href="https://swish.swi-prolog.org/p/PLP_fibonacci_clp.pl">fibonacci_clp.pl</a>.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org37b43cb" class="outline-2">
<h2 id="org37b43cb"><span class="section-number-2">2.</span> Restricciones sobre números racionales: CLP(Q)</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgdc126c2" class="outline-3">
<h3 id="orgdc126c2"><span class="section-number-3">2.1.</span> Uso del módulo de restricciones sobre números racionales</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li><p>
Cálculos con CLP(Q)   
</p>
<div class="org-src-container">
<pre class="src src-shell">?- use_module<span style="color: #707183;">(</span>library<span style="color: #7388d6;">(</span>clpq<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
true.

?- <span style="color: #707183;">{</span>X = 2 * Y, Y = 1 - X<span style="color: #707183;">}</span><span style="color: #483d8b;">.</span>
X = 2r3,
Y = 1r3.
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org251bfb0" class="outline-3">
<h3 id="org251bfb0"><span class="section-number-3">2.2.</span> Planificación de tareas con CLP(Q)</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li>Especificación de un problema mediante <code>tareas</code> y <code>precede</code> <br />
<img src="./fig/tema-9-tareas_2.png" alt="tema-9-tareas_2.png" /></li>

<li><p>
<code>tareas(+LTD)</code> se verifica si <code>LTD</code> es la lista de los pares <code>T/D</code> de
las tareas y sus duraciones.
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">tareas</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #0000ff;">t1/5</span>, <span style="color: #0000ff;">t2/7</span>, <span style="color: #0000ff;">t3/10</span>, <span style="color: #0000ff;">t4/2</span>, <span style="color: #0000ff;">t5/9</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
<code>precede(+T1,+T2)</code> se verifica si la tarea <code>T1</code> tiene que preceder a
la <code>T2</code>.  
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">precede</span><span style="color: #707183;">(</span>t1, t2<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">precede</span><span style="color: #707183;">(</span>t1, t4<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">precede</span><span style="color: #707183;">(</span>t2, t3<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">precede</span><span style="color: #707183;">(</span>t4, t5<span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
<code>planificación(P,TP)</code> se verifica si <code>P</code> es el plan (esto es una lista
de elementos de la forma tarea/inicio/duración) para realizar las
tareas en el menor tiempo posible y <code>TP</code> es dicho tiempo. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- planificaci&#243;n<span style="color: #707183;">(</span>P,TP<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
P = <span style="color: #707183;">[</span>t1/0/5,t2/5/7,t3/12/10,t4/_20034/2,t5/_20052/9<span style="color: #707183;">]</span>,
TP = 22,
<span style="color: #707183;">{</span><span style="color: #a0522d;">_20084</span>= -6-_20098-_20092,_20098+_20092&gt;= -6,<span style="color: #a0522d;">_20092</span>=&lt;0,<span style="color: #a0522d;">_20052</span>=13+_20098,
 <span style="color: #a0522d;">_20098</span>=&lt;0,<span style="color: #a0522d;">_20034</span>=11+_20098+_20092,<span style="color: #a0522d;">_20186</span>= -9+_20098+_20092<span style="color: #707183;">}</span> 

?- planificaci&#243;n<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>_/I1/_, _/I2/_, _/I3/_, _/I4/_, _/I5/_<span style="color: #7388d6;">]</span>,TP<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
I1 = 0,
I2 = 5,
I3 = 12,
TP = 22,
<span style="color: #707183;">{</span><span style="color: #a0522d;">_27474</span>= -6-_27488-_27482,_27488+_27482&gt;= -6,<span style="color: #a0522d;">_27482</span>=&lt;0,<span style="color: #a0522d;">I5</span>=13+_27488,
 <span style="color: #a0522d;">_27488</span>=&lt;0,<span style="color: #a0522d;">I4</span>=11+_27488+_27482,<span style="color: #a0522d;">_27576</span>= -9+_27488+_27482<span style="color: #707183;">}</span> 
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">planificaci&#243;n</span><span style="color: #707183;">(</span><span style="color: #a0522d;">P</span>, <span style="color: #a0522d;">TP</span><span style="color: #707183;">)</span> :-
   tareas<span style="color: #707183;">(</span><span style="color: #a0522d;">LTD</span><span style="color: #707183;">)</span>,
   restricciones<span style="color: #707183;">(</span><span style="color: #a0522d;">LTD</span>, <span style="color: #a0522d;">P</span>, <span style="color: #a0522d;">TP</span><span style="color: #707183;">)</span>,
   minimize<span style="color: #707183;">(</span><span style="color: #a0522d;">TP</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
<code>restricciones(LTD,P,TP)</code> se verifica si <code>P</code> es un plan para realizar
las tareas de <code>LTD</code> cumpliendo las restricciones definidas por
<code>precedencia/2</code> y <code>TP</code> es el tiempo que se necesita para ejecutar el
plan <code>P</code>.
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">restricciones</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[]</span>,<span style="color: #7388d6;">[]</span>,<span style="color: #a0522d;">_TP</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">restricciones</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">T</span>/<span style="color: #a0522d;">D</span> <span style="color: #a020f0;">|</span> <span style="color: #a0522d;">RLTD</span><span style="color: #7388d6;">]</span>, <span style="color: #7388d6;">[</span><span style="color: #a0522d;">T</span>/<span style="color: #a0522d;">I</span>/<span style="color: #a0522d;">D</span> <span style="color: #a020f0;">|</span> <span style="color: #a0522d;">RTID</span><span style="color: #7388d6;">]</span>, <span style="color: #a0522d;">TP</span><span style="color: #707183;">)</span> :-
   <span style="color: #707183;">{</span><span style="color: #a0522d;">I</span> &gt;= 0, <span style="color: #a0522d;">I</span> + <span style="color: #a0522d;">D</span> =&lt; <span style="color: #a0522d;">TP</span><span style="color: #707183;">}</span>, 
   restricciones<span style="color: #707183;">(</span><span style="color: #a0522d;">RLTD</span>, <span style="color: #a0522d;">RTID</span>, <span style="color: #a0522d;">TP</span><span style="color: #707183;">)</span>,      
   restricciones_aux<span style="color: #707183;">(</span><span style="color: #a0522d;">T</span>/<span style="color: #a0522d;">I</span>/<span style="color: #a0522d;">D</span>, <span style="color: #a0522d;">RTID</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
<code>restricciones_aux(TID,LTID)</code> se verifica si el triple
tarea-inicio-duración <code>TID</code> es consistente con la lista de triples
tarea-inicio-duración <code>LTID</code>.
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">restricciones_aux</span><span style="color: #707183;">(</span><span style="color: #a0522d;">_</span>,<span style="color: #7388d6;">[]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">restricciones_aux</span><span style="color: #707183;">(</span><span style="color: #a0522d;">T</span>/<span style="color: #a0522d;">I</span>/<span style="color: #a0522d;">D</span>, <span style="color: #7388d6;">[</span><span style="color: #a0522d;">T1</span>/<span style="color: #a0522d;">I1</span>/<span style="color: #a0522d;">D1</span> <span style="color: #a020f0;">|</span> <span style="color: #a0522d;">RTID</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   <span style="color: #707183;">(</span> precede<span style="color: #7388d6;">(</span><span style="color: #a0522d;">T</span>, <span style="color: #a0522d;">T1</span><span style="color: #7388d6;">)</span> <span style="color: #a020f0;">-&gt;</span> <span style="color: #7388d6;">{</span><span style="color: #a0522d;">I</span> + <span style="color: #a0522d;">D</span> =&lt; <span style="color: #a0522d;">I1</span><span style="color: #7388d6;">}</span>
   <span style="color: #a020f0;">;</span> precede<span style="color: #7388d6;">(</span><span style="color: #a0522d;">T1</span>, <span style="color: #a0522d;">T</span><span style="color: #7388d6;">)</span> <span style="color: #a020f0;">-&gt;</span> <span style="color: #7388d6;">{</span><span style="color: #a0522d;">I1</span> + <span style="color: #a0522d;">D1</span> =&lt; <span style="color: #a0522d;">I</span><span style="color: #7388d6;">}</span>
   <span style="color: #a020f0;">;</span> true <span style="color: #707183;">)</span>,
   restricciones_aux<span style="color: #707183;">(</span><span style="color: #a0522d;">T</span>/<span style="color: #a0522d;">I</span>/<span style="color: #a0522d;">D</span>, <span style="color: #a0522d;">RTID</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li>El código de la planificación de tareas se encuentra en <a href="https://swish.swi-prolog.org/p/PLP_planificacion.pl">planificacion.pl</a>.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgc063bc4" class="outline-2">
<h2 id="orgc063bc4"><span class="section-number-2">3.</span> Restricciones sobre dominios finitos: CLP(FD)</h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org9772e63" class="outline-3">
<h3 id="org9772e63"><span class="section-number-3">3.1.</span> El módulo de restricciones sobre dominios finitos: CLP(FD)</h3>
<div class="outline-text-3" id="text-3-1">
</div>
<div id="outline-container-org8b7a489" class="outline-4">
<h4 id="org8b7a489"><span class="section-number-4">3.1.1.</span> Importación del módulo de restricciones de dominios finitos.</h4>
<div class="outline-text-4" id="text-3-1-1">
<ul class="org-ul">
<li><p>
Se importa con
</p>
<div class="org-src-container">
<pre class="src src-prolog">?- use_module<span style="color: #707183;">(</span>library<span style="color: #7388d6;">(</span><span style="color: #8b2252;">'clp/bounds'</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>. 
true.
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgd14b304" class="outline-4">
<h4 id="orgd14b304"><span class="section-number-4">3.1.2.</span> Asignación de valores a las variables del dominio</h4>
<div class="outline-text-4" id="text-3-1-2">
<ul class="org-ul">
<li><p>
<code>indomain(X)</code> asigna un valor a la variable de dominio acotado <code>X</code>, en
orden creciente. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- X<span style="color: #a020f0;"> in</span> 1..2, Y<span style="color: #a020f0;"> in</span> 1..10, X + 7 <span style="color: #b22222;">#</span><span style="color: #b22222;">&lt; Y, indomain(X), indomain(Y).</span>
X = 1,
Y = 9 ;
X = 1,
Y = 10 ;
X = 2,
Y = 10.
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgbcd83ab" class="outline-4">
<h4 id="orgbcd83ab"><span class="section-number-4">3.1.3.</span> Búsqueda de valores de las variables del dominio</h4>
<div class="outline-text-4" id="text-3-1-3">
<ul class="org-ul">
<li><p>
<code>label(L)</code> se verifica si existe una asignación que verifica
las restricciones de las variables de la lista <code>L</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- L = <span style="color: #707183;">[</span>X, Y<span style="color: #707183;">]</span>, L ins 1..2, label<span style="color: #707183;">(</span>L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span>1,1<span style="color: #707183;">]</span>,
X = Y, Y = 1 ;
L = <span style="color: #707183;">[</span>1,2<span style="color: #707183;">]</span>,
X = 1,
Y = 2 ;
L = <span style="color: #707183;">[</span>2,1<span style="color: #707183;">]</span>,
X = 2,
Y = 1 ;
L = <span style="color: #707183;">[</span>2,2<span style="color: #707183;">]</span>,
X = Y, Y = 2.

?- L = <span style="color: #707183;">[</span>_X, _Y<span style="color: #707183;">]</span>, L ins 1..2, label<span style="color: #707183;">(</span>L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span>1,1<span style="color: #707183;">]</span> ;
L = <span style="color: #707183;">[</span>1,2<span style="color: #707183;">]</span> ;
L = <span style="color: #707183;">[</span>2,1<span style="color: #707183;">]</span> ;
L = <span style="color: #707183;">[</span>2,2<span style="color: #707183;">]</span>.
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org31f4525" class="outline-4">
<h4 id="org31f4525"><span class="section-number-4">3.1.4.</span> Restricción de valores distintos</h4>
<div class="outline-text-4" id="text-3-1-4">
<ul class="org-ul">
<li><p>
<code>all_distinct(L)</code> se verifica si todos las variables de la lista <code>L</code>
tienen valores distintos. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- L = <span style="color: #707183;">[</span>X, Y<span style="color: #707183;">]</span>, L ins 1..2, all_distinct<span style="color: #707183;">(</span>L<span style="color: #707183;">)</span>, label<span style="color: #707183;">(</span>L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span>1,2<span style="color: #707183;">]</span>,
X = 1,
Y = 2 ;
L = <span style="color: #707183;">[</span>2,1<span style="color: #707183;">]</span>,
X = 2,
Y = 1.

?- L = <span style="color: #707183;">[</span>_X, _Y<span style="color: #707183;">]</span>, L ins 1..2, all_distinct<span style="color: #707183;">(</span>L<span style="color: #707183;">)</span>, label<span style="color: #707183;">(</span>L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span>1,2<span style="color: #707183;">]</span> ;
L = <span style="color: #707183;">[</span>2,1<span style="color: #707183;">]</span>.
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgdbe1caa" class="outline-4">
<h4 id="orgdbe1caa"><span class="section-number-4">3.1.5.</span> Restricciones de dominio y aritméticas</h4>
<div class="outline-text-4" id="text-3-1-5">
<ul class="org-ul">
<li><p>
Ejemplo de restricciones de dominio y aritméticas:
</p>
<div class="org-src-container">
<pre class="src src-shell">?- X<span style="color: #a020f0;"> in</span> 1..5, Y<span style="color: #a020f0;"> in</span> 0..4, X <span style="color: #b22222;">#</span><span style="color: #b22222;">&lt; Y, Z #= X+Y+1, findall(X-Y-Z,label([X,Y,Z]),L).</span>
L = <span style="color: #707183;">[</span>1-2-4,1-3-5,1-4-6,2-3-6,2-4-7,3-4-8<span style="color: #707183;">]</span>,
X<span style="color: #a020f0;"> in</span> 1..3,
Z#=X+Y+1,
X#=&lt;Y+ -1,
Z<span style="color: #a020f0;"> in</span> 4..8,
Y<span style="color: #a020f0;"> in</span> 2..4.

?- <span style="color: #707183;">[</span>X,Y<span style="color: #707183;">]</span> ins 1..2, Z <span style="color: #b22222;">#</span><span style="color: #b22222;">= X+Y, findall(X-Y-Z,label([X,Y,Z]),L).</span>
L = <span style="color: #707183;">[</span>1-1-2,1-2-3,2-1-3,2-2-4<span style="color: #707183;">]</span>,
X<span style="color: #a020f0;"> in</span> 1..2,
X+Y#=Z,
Y<span style="color: #a020f0;"> in</span> 1..2,
Z<span style="color: #a020f0;"> in</span> 2..4.
</pre>
</div></li>

<li>Tipos de restricciones en CLP(FD):
<ul class="org-ul">
<li>de dominio de variables: <code>&lt;variable&gt; in &lt;Mínimo&gt;..&lt;Máximo&gt;</code></li>
<li>de dominio de lista: <code>&lt;lista&gt; ins &lt;Mínimo&gt;..&lt;Máximo&gt;</code></li>
<li>aritmética: <code>&lt;expresión 1&gt; &lt;relación&gt; &lt;expresión 2&gt;</code> con
<code>&lt;relación&gt;</code> en <code>#=</code>, <code>#\=</code>, <code>#&lt;</code>, <code>#&gt;</code>, <code>#=&lt;</code>, <code>#&gt;=</code>.</li>
<li>de enumeración con <code>indomain/1</code>, <code>label/1</code> y <code>labeling/2</code>.</li>
<li>combinatorias con <code>all_distinct/1</code>.</li>
</ul></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org34967c4" class="outline-3">
<h3 id="org34967c4"><span class="section-number-3">3.2.</span> Criptoaritmética</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li><p>
<code>solución([S,E,N,D],[M,O,R,E],[M,O,N,E,Y])</code> se verifica si cada una
de las letras se sustituye por un dígito distinto de forma que
<code>SEND+MORE=MONEY</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- soluci&#243;n<span style="color: #707183;">(</span>L1,L2,L3<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L1 = <span style="color: #707183;">[</span>9,5,6,7<span style="color: #707183;">]</span>,
L2 = <span style="color: #707183;">[</span>1,0,8,5<span style="color: #707183;">]</span>,
L3 = <span style="color: #707183;">[</span>1,0,6,5,2<span style="color: #707183;">]</span> ;
false.

?- soluci&#243;n<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>S,E,N,D<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>M,O,R,E<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>M,O,N,E,Y<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
S = 9,
E = 5,
N = 6,
D = 7,
M = 1,
O = 0,
R = 8,
Y = 2 ;
false.
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- use_module<span style="color: #707183;">(</span>library<span style="color: #7388d6;">(</span>clpfd<span style="color: #7388d6;">)</span>.

<span style="color: #0000ff;">soluci&#243;n_5</span><span style="color: #7388d6;">(</span><span style="color: #909183;">[</span><span style="color: #a0522d;">S</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">D</span><span style="color: #909183;">]</span>,<span style="color: #909183;">[</span><span style="color: #a0522d;">M</span>,<span style="color: #a0522d;">O</span>,<span style="color: #a0522d;">R</span>,<span style="color: #a0522d;">E</span><span style="color: #909183;">]</span>,<span style="color: #909183;">[</span><span style="color: #a0522d;">M</span>,<span style="color: #a0522d;">O</span>,<span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">Y</span><span style="color: #909183;">]</span><span style="color: #7388d6;">)</span> :-
   <span style="color: #a0522d;">Vars</span> = <span style="color: #7388d6;">[</span><span style="color: #a0522d;">S</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">M</span>,<span style="color: #a0522d;">O</span>,<span style="color: #a0522d;">R</span>,<span style="color: #a0522d;">Y</span><span style="color: #7388d6;">]</span>,
   <span style="color: #a0522d;">Vars</span> ins 0..9,
   all_distinct<span style="color: #7388d6;">(</span><span style="color: #a0522d;">Vars</span><span style="color: #7388d6;">)</span>,
           1000*<span style="color: #a0522d;">S</span>+100*<span style="color: #a0522d;">E</span>+10*<span style="color: #a0522d;">N</span>+<span style="color: #a0522d;">D</span>
         + 1000*<span style="color: #a0522d;">M</span>+100*<span style="color: #a0522d;">O</span>+10*<span style="color: #a0522d;">R</span>+<span style="color: #a0522d;">E</span> #=
   10000*<span style="color: #a0522d;">M</span>+1000*<span style="color: #a0522d;">O</span>+100*<span style="color: #a0522d;">N</span>+10*<span style="color: #a0522d;">E</span>+<span style="color: #a0522d;">Y</span>,
   <span style="color: #a0522d;">M</span> #\= 0,
   <span style="color: #a0522d;">S</span> #\= 0,
   label<span style="color: #7388d6;">(</span><span style="color: #a0522d;">Vars</span><span style="color: #7388d6;">)</span>.
</pre>
</div></li>

<li>El código del problema SEN+MORE=MONEY se encuentra en <a href="https://swish.swi-prolog.org/p/PLP_criptoaritmetica.pl">criptoaritmetica.pl</a>.</li>
</ul>
</div>
</div>

<div id="outline-container-org6ad8f65" class="outline-3">
<h3 id="org6ad8f65"><span class="section-number-3">3.3.</span> Problema de las N reinas</h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li>El problema de las N reinas consiste en colocar N reinas en un tablero
rectangular de dimensiones N por N de forma que no se encuentren más
de una en la misma línea: horizontal, vertical o diagonal.</li>

<li><p>
<code>solución(N,L)</code> se verifica si <code>L</code> es una solución del problema de
las <code>N</code> reinas. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- soluci&#243;n<span style="color: #707183;">(</span>4,L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span>2,4,1,3<span style="color: #707183;">]</span> ;
L = <span style="color: #707183;">[</span>3,1,4,2<span style="color: #707183;">]</span>

?- soluci&#243;n<span style="color: #707183;">(</span>8,L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span>1,5,8,6,3,7,2,4<span style="color: #707183;">]</span> ;
L = <span style="color: #707183;">[</span>1,6,8,3,7,4,2,5<span style="color: #707183;">]</span> 

?- findall<span style="color: #707183;">(</span>_S, soluci&#243;n<span style="color: #7388d6;">(</span>8, _S<span style="color: #7388d6;">)</span>, _L<span style="color: #707183;">)</span>, length<span style="color: #707183;">(</span>_L, N<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = 92.
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">soluci&#243;n</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span> :-             
   length<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span>,<span style="color: #a0522d;">N</span><span style="color: #707183;">)</span>,     <span style="color: #b22222;">% </span><span style="color: #b22222;">Hay N reinas</span>
   <span style="color: #a0522d;">L</span> ins 1..<span style="color: #a0522d;">N</span>,      <span style="color: #b22222;">% </span><span style="color: #b22222;">Las ordenadas est&#225;n en el intervalo 1..N</span>
   all_distinct<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>, <span style="color: #b22222;">% </span><span style="color: #b22222;">Las ordenadas son distintas (distintas filas)</span>
   segura<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,       <span style="color: #b22222;">% </span><span style="color: #b22222;">No hay en m&#225;s de una en las diagonales</span>
   label<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>.        <span style="color: #b22222;">% </span><span style="color: #b22222;">Buscar los valores de L</span>
</pre>
</div></li>

<li><p>
<code>segura(L)</code> se verifica si las reinas colocadas en las ordenadas <code>L</code>
no se atacan diagonalmente.
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">segura</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">segura</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">Y</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   no_ataca<span style="color: #707183;">(</span><span style="color: #a0522d;">Y</span>,<span style="color: #a0522d;">L</span>,1<span style="color: #707183;">)</span>, 
   segura<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
<code>no_ataca(Y,L,D)</code> se verifica si <code>Y</code> es un número, <code>L</code> es una lista de
números <code>[n(1),...,n(m)]</code> y <code>D</code> es un número tales que la reina
colocada en la posición <code>(x,Y)</code> no ataca a las colocadas en las
posiciones ~(x+d,n(1)),&#x2026;,(x+d+m,n(m))}.
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">no_ataca</span><span style="color: #707183;">(</span><span style="color: #a0522d;">_Y</span>,<span style="color: #7388d6;">[]</span>,<span style="color: #a0522d;">_</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">no_ataca</span><span style="color: #707183;">(</span><span style="color: #a0522d;">Y1</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">Y2</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L</span><span style="color: #7388d6;">]</span>,<span style="color: #a0522d;">D</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">Y1</span>-<span style="color: #a0522d;">Y2</span> #\= <span style="color: #a0522d;">D</span>,
   <span style="color: #a0522d;">Y2</span>-<span style="color: #a0522d;">Y1</span> #\= <span style="color: #a0522d;">D</span>,
   <span style="color: #a0522d;">D1</span> is <span style="color: #a0522d;">D</span>+1,
   no_ataca<span style="color: #707183;">(</span><span style="color: #a0522d;">Y1</span>,<span style="color: #a0522d;">L</span>,<span style="color: #a0522d;">D1</span><span style="color: #707183;">)</span>.
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgd5fc42d" class="outline-3">
<h3 id="orgd5fc42d"><span class="section-number-3">3.4.</span> Optimización con CLP(FD)</h3>
<div class="outline-text-3" id="text-3-4">
<ul class="org-ul">
<li><p>
<code>mejor(X)</code> restringe los valores de <code>X</code> a su menor valor. Por
ejemplo, 
</p>
<div class="org-src-container">
<pre class="src src-shell">?- X<span style="color: #a020f0;"> in</span> 1..6, Y <span style="color: #b22222;">#</span><span style="color: #b22222;">= X*(X-6), mejor(Y).</span>
X = 3,
Y = -9 

?- X<span style="color: #a020f0;"> in</span> 1..6, Y <span style="color: #b22222;">#</span><span style="color: #b22222;">= X*(6-X), mejor(Y).</span>
X = 6,
Y = 0 
</pre>
</div>
<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #b22222;">% </span><span style="color: #b22222;">1&#170; definici&#243;n</span>
<span style="color: #0000ff;">mejor</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span><span style="color: #707183;">)</span> :-
   findall<span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>, indomain<span style="color: #7388d6;">(</span><span style="color: #a0522d;">X</span><span style="color: #7388d6;">)</span>, <span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,
   member<span style="color: #707183;">(</span><span style="color: #a0522d;">Y</span>, <span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,
   not<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>member<span style="color: #909183;">(</span><span style="color: #a0522d;">Z</span>, <span style="color: #a0522d;">L</span><span style="color: #909183;">)</span>, <span style="color: #a0522d;">Z</span> &lt; <span style="color: #a0522d;">Y</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>,
   <span style="color: #a0522d;">X</span> #= <span style="color: #a0522d;">Y</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">2&#170; definici&#243;n</span>
<span style="color: #0000ff;">mejor_2</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span><span style="color: #707183;">)</span> :-
   labeling<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>min<span style="color: #909183;">(</span><span style="color: #a0522d;">X</span><span style="color: #909183;">)</span><span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">X</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li>El código anterior se encuentra en <a href="https://swish.swi-prolog.org/p/PLP_mejor.pl">mejor.pl</a>.</li>
</ul>
</div>
</div>

<div id="outline-container-org3487525" class="outline-3">
<h3 id="org3487525"><span class="section-number-3">3.5.</span> Planificación de tareas con CLP(FD)</h3>
<div class="outline-text-3" id="text-3-5">
<ul class="org-ul">
<li><p>
Problema: Calcular el tiempo necesario para realizar las tareas
A, B, C y D teniendo en cuenta que los tiempos empleados en cada una son 2,
3, 5 y 4, respectivamente, y además que A precede a B y a C y que B precede a
D.
</p>
<div class="org-src-container">
<pre class="src src-shell">?- <span style="color: #707183;">[</span>Ta,Tb,Tc,Td,Tf<span style="color: #707183;">]</span> ins 0..10,
   Ta+2 <span style="color: #b22222;">#</span><span style="color: #b22222;">=&lt; Tb,   Ta+2 #=&lt; Tc,   Tb+3 #=&lt; Td,   </span>
   Tc+5 <span style="color: #b22222;">#</span><span style="color: #b22222;">=&lt; Tf,   Td+4 #=&lt; Tf,</span>
   findall<span style="color: #707183;">(</span>Ta, indomain<span style="color: #7388d6;">(</span>Ta<span style="color: #7388d6;">)</span>, Da<span style="color: #707183;">)</span>,
   findall<span style="color: #707183;">(</span>Tb, indomain<span style="color: #7388d6;">(</span>Tb<span style="color: #7388d6;">)</span>, Db<span style="color: #707183;">)</span>,
   findall<span style="color: #707183;">(</span>Tc, indomain<span style="color: #7388d6;">(</span>Tc<span style="color: #7388d6;">)</span>, Dc<span style="color: #707183;">)</span>,
   findall<span style="color: #707183;">(</span>Td, indomain<span style="color: #7388d6;">(</span>Td<span style="color: #7388d6;">)</span>, Dd<span style="color: #707183;">)</span>,
   findall<span style="color: #707183;">(</span>Tf, indomain<span style="color: #7388d6;">(</span>Tf<span style="color: #7388d6;">)</span>, Df<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Da = <span style="color: #707183;">[</span>0,1<span style="color: #707183;">]</span>,
Db = <span style="color: #707183;">[</span>2,3<span style="color: #707183;">]</span>,
Dc = <span style="color: #707183;">[</span>2,3,4,5<span style="color: #707183;">]</span>,
Dd = <span style="color: #707183;">[</span>5,6<span style="color: #707183;">]</span>,
Df = <span style="color: #707183;">[</span>9,10<span style="color: #707183;">]</span>,
Ta<span style="color: #a020f0;"> in</span> 0..1,
Ta#=&lt;Tc+ -2,
Ta#=&lt;Tb+ -2,
Tc<span style="color: #a020f0;"> in</span> 2..5,
Tc#=&lt;Tf+ -5,
Tf<span style="color: #a020f0;"> in</span> 9..10,
Td#=&lt;Tf+ -4,
Td<span style="color: #a020f0;"> in</span> 5..6,
Tb#=&lt;Td+ -3,
Tb<span style="color: #a020f0;"> in</span> 2..3.
</pre>
</div></li>

<li><p>
Traza:
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />

<col  class="org-right" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">Paso</th>
<th scope="col" class="org-right">&#xa0;</th>
<th scope="col" class="org-right">Ta</th>
<th scope="col" class="org-right">Tb</th>
<th scope="col" class="org-right">Tc</th>
<th scope="col" class="org-right">Td</th>
<th scope="col" class="org-right">Tf</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">0..10</td>
<td class="org-right">0..10</td>
<td class="org-right">0..10</td>
<td class="org-right">0..10</td>
<td class="org-right">0..10</td>
</tr>

<tr>
<td class="org-right">1</td>
<td class="org-right">Ta+2 ≤ Tb</td>
<td class="org-right">0..8</td>
<td class="org-right">2..10</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-right">Tb+3 ≤ Td</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">2..7</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">5..10</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-right">Td+4 ≤ Tf</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">5..6</td>
<td class="org-right">9..10</td>
</tr>

<tr>
<td class="org-right">4</td>
<td class="org-right">Tb+3 ≤ Td</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">2..3</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-right">Ta+2 ≤ Tb</td>
<td class="org-right">0..1</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-right">6</td>
<td class="org-right">Ta+2 ≤ Tc</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">2..10</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>

<tr>
<td class="org-right">7</td>
<td class="org-right">Tc+5 ≤ Tf</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">2..5</td>
<td class="org-right">&#xa0;</td>
<td class="org-right">&#xa0;</td>
</tr>
</tbody>
</table></li>
</ul>
</div>
</div>

<div id="outline-container-org399962c" class="outline-3">
<h3 id="org399962c"><span class="section-number-3">3.6.</span> Planificación óptima de tareas con CLP(FD)</h3>
<div class="outline-text-3" id="text-3-6">
<div class="org-src-container">
<pre class="src src-shell">?- <span style="color: #707183;">[</span>Ta,Tb,Tc,Td,Tf<span style="color: #707183;">]</span> ins 0..10,
   Ta+2 <span style="color: #b22222;">#</span><span style="color: #b22222;">=&lt; Tb,   Ta+2 #=&lt; Tc,   Tb+3 #=&lt; Td,</span>
   Tc+5 <span style="color: #b22222;">#</span><span style="color: #b22222;">=&lt; Tf,   Td+4 #=&lt; Tf,</span>
   labeling<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>min<span style="color: #909183;">(</span>Tf<span style="color: #909183;">)</span><span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>Tf<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   findall<span style="color: #707183;">(</span>Ta, indomain<span style="color: #7388d6;">(</span>Ta<span style="color: #7388d6;">)</span>, Da<span style="color: #707183;">)</span>,
   findall<span style="color: #707183;">(</span>Tb, indomain<span style="color: #7388d6;">(</span>Tb<span style="color: #7388d6;">)</span>, Db<span style="color: #707183;">)</span>,
   findall<span style="color: #707183;">(</span>Tc, indomain<span style="color: #7388d6;">(</span>Tc<span style="color: #7388d6;">)</span>, Dc<span style="color: #707183;">)</span>,
   findall<span style="color: #707183;">(</span>Td, indomain<span style="color: #7388d6;">(</span>Td<span style="color: #7388d6;">)</span>, Dd<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Ta = 0,
Tb = 2,
Td = 5,
Tf = 9,
Da = <span style="color: #707183;">[</span>0<span style="color: #707183;">]</span>,
Db = <span style="color: #707183;">[</span>2<span style="color: #707183;">]</span>,
Dc = <span style="color: #707183;">[</span>2,3,4<span style="color: #707183;">]</span>,
Dd = <span style="color: #707183;">[</span>5<span style="color: #707183;">]</span>,
Tc<span style="color: #a020f0;"> in</span> 2..4 
</pre>
</div>
</div>
</div>

<div id="outline-container-org9a6a6c1" class="outline-3">
<h3 id="org9a6a6c1"><span class="section-number-3">3.7.</span> Problema de los músicos mediante CLP(FD)</h3>
<div class="outline-text-3" id="text-3-7">
<ul class="org-ul">
<li><p>
En el problema de los músicos se sabe que
</p>
<ol class="org-ol">
<li>Una banda está compuesta por tres músicos de distintos paises y que
tocan distintos instrumentos.</li>
<li>El pianista toca primero.</li>
<li>Juan toca el saxo y toca antes que el cubano.</li>
<li>Marcos es ruso y toca antes que el flautista.</li>
<li>Hay un músico coreano.</li>
<li>Un músico se llama Luis.</li>
</ol>
<p>
El problema consiste en determinar el nombre, el país y el instrumento
que toca cada uno de los músicos de la banda.
</p></li>

<li><p>
El primer programa para resolver el problema de los músicos es
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- use_module<span style="color: #707183;">(</span>library<span style="color: #7388d6;">(</span>clpfd<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">m&#250;sicos</span><span style="color: #707183;">(</span><span style="color: #a0522d;">Juan</span>, <span style="color: #a0522d;">Marco</span>, <span style="color: #a0522d;">Luis</span>, <span style="color: #a0522d;">Cuba</span>, <span style="color: #a0522d;">Rusia</span>, <span style="color: #a0522d;">Corea</span>, <span style="color: #a0522d;">Piano</span>, <span style="color: #a0522d;">Saxo</span>, <span style="color: #a0522d;">Flauta</span><span style="color: #707183;">)</span> :-
   <span style="color: #b22222;">% </span><span style="color: #b22222;">dominios</span>
   <span style="color: #707183;">[</span><span style="color: #a0522d;">Juan</span>, <span style="color: #a0522d;">Marco</span>, <span style="color: #a0522d;">Luis</span>, <span style="color: #a0522d;">Cuba</span>, <span style="color: #a0522d;">Rusia</span>, <span style="color: #a0522d;">Corea</span>, <span style="color: #a0522d;">Piano</span>, <span style="color: #a0522d;">Saxo</span>, <span style="color: #a0522d;">Flauta</span><span style="color: #707183;">]</span> ins 1..3,

   <span style="color: #b22222;">% </span><span style="color: #b22222;">todas distintas de la de los otros:</span>
   all_distinct<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">Juan</span>, <span style="color: #a0522d;">Marco</span>, <span style="color: #a0522d;">Luis</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   all_distinct<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">Cuba</span>, <span style="color: #a0522d;">Rusia</span>, <span style="color: #a0522d;">Corea</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   all_distinct<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">Piano</span>, <span style="color: #a0522d;">Saxo</span>, <span style="color: #a0522d;">Flauta</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,

   <span style="color: #b22222;">% </span><span style="color: #b22222;">restricciones;</span>
   <span style="color: #a0522d;">Piano</span> #=1,       <span style="color: #b22222;">% </span><span style="color: #b22222;">2</span>
   <span style="color: #a0522d;">Juan</span> #= <span style="color: #a0522d;">Saxo</span>,    <span style="color: #b22222;">% </span><span style="color: #b22222;">3a</span>
   <span style="color: #a0522d;">Juan</span> #&lt; <span style="color: #a0522d;">Cuba</span>,    <span style="color: #b22222;">% </span><span style="color: #b22222;">3b</span>
   <span style="color: #a0522d;">Marco</span> #= <span style="color: #a0522d;">Rusia</span>,  <span style="color: #b22222;">% </span><span style="color: #b22222;">4a</span>
   <span style="color: #a0522d;">Marco</span> #&lt; <span style="color: #a0522d;">Flauta</span>, <span style="color: #b22222;">% </span><span style="color: #b22222;">4b</span>

   <span style="color: #b22222;">% </span><span style="color: #b22222;">instancia las variables de la lista a elementos de su dominio:</span>
   label<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">Juan</span>, <span style="color: #a0522d;">Marco</span>, <span style="color: #a0522d;">Luis</span>, <span style="color: #a0522d;">Cuba</span>, <span style="color: #a0522d;">Rusia</span>, <span style="color: #a0522d;">Corea</span>, <span style="color: #a0522d;">Piano</span>, <span style="color: #a0522d;">Saxo</span>, <span style="color: #a0522d;">Flauta</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
El cálculo de la solución es
</p>
<div class="org-src-container">
<pre class="src src-shell">?- m&#250;sicos<span style="color: #707183;">(</span>Juan, Marco, Luis, Cuba, Rusia, Corea, Piano, Saxo, Flauta<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Juan = Corea, Corea = Saxo, Saxo = 2,
Marco = Rusia, Rusia = Piano, Piano = 1,
Luis = Cuba, Cuba = Flauta, Flauta = 3.
</pre>
</div></li>

<li><p>
La solución es   
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">&#xa0;</th>
<th scope="col" class="org-left">Nombre</th>
<th scope="col" class="org-left">País</th>
<th scope="col" class="org-left">Instrumento</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-left">Marco</td>
<td class="org-left">Rusia</td>
<td class="org-left">Piano</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left">Juan</td>
<td class="org-left">Corea</td>
<td class="org-left">Saxo</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-left">Luis</td>
<td class="org-left">Cuba</td>
<td class="org-left">Flauta</td>
</tr>
</tbody>
</table></li>

<li>El código del primer programa para resolver el problema de los músicos
está en <a href="https://swish.swi-prolog.org/p/PLP_musicos_1.pl">musicos_1.pl</a>.</li>

<li><p>
El segundo programa para resolver el problema de los músicos es
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- use_module<span style="color: #707183;">(</span>library<span style="color: #7388d6;">(</span>clpfd<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">m&#250;sicos</span><span style="color: #707183;">(</span><span style="color: #a0522d;">S</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">S</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">Nombre</span>, <span style="color: #a0522d;">Pais</span>, <span style="color: #a0522d;">Instrumento</span><span style="color: #707183;">]</span>,
   <span style="color: #a0522d;">Nombre</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">Juan</span>, <span style="color: #a0522d;">Marco</span>, <span style="color: #a0522d;">Luis</span><span style="color: #707183;">]</span>,
   <span style="color: #a0522d;">Pais</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">Cuba</span>, <span style="color: #a0522d;">Rusia</span>, <span style="color: #a0522d;">Corea</span><span style="color: #707183;">]</span>,
   <span style="color: #a0522d;">Instrumento</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">Piano</span>, <span style="color: #a0522d;">Saxo</span>, <span style="color: #a0522d;">Flauta</span><span style="color: #707183;">]</span>,

   <span style="color: #b22222;">% </span><span style="color: #b22222;">L es la lista de los elementos de S:</span>
   flatten<span style="color: #707183;">(</span><span style="color: #a0522d;">S</span>, <span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,

   <span style="color: #b22222;">% </span><span style="color: #b22222;">dominios</span>
   <span style="color: #a0522d;">L</span> ins 1..3,

   <span style="color: #b22222;">% </span><span style="color: #b22222;">todas distintas de la de los otros:</span>
   all_distinct<span style="color: #707183;">(</span><span style="color: #a0522d;">Nombre</span><span style="color: #707183;">)</span>,
   all_distinct<span style="color: #707183;">(</span><span style="color: #a0522d;">Pais</span><span style="color: #707183;">)</span>,
   all_distinct<span style="color: #707183;">(</span><span style="color: #a0522d;">Instrumento</span><span style="color: #707183;">)</span>,

   <span style="color: #b22222;">% </span><span style="color: #b22222;">restricciones;</span>
   <span style="color: #a0522d;">Piano</span> #=1,          <span style="color: #b22222;">% </span><span style="color: #b22222;">2</span>
   <span style="color: #a0522d;">Juan</span> #= <span style="color: #a0522d;">Saxo</span>,       <span style="color: #b22222;">% </span><span style="color: #b22222;">3a</span>
   <span style="color: #a0522d;">Juan</span> #&lt; <span style="color: #a0522d;">Cuba</span>,       <span style="color: #b22222;">% </span><span style="color: #b22222;">3b</span>
   <span style="color: #a0522d;">Marco</span> #= <span style="color: #a0522d;">Rusia</span>,     <span style="color: #b22222;">% </span><span style="color: #b22222;">4a</span>
   <span style="color: #a0522d;">Marco</span> #&lt; <span style="color: #a0522d;">Flauta</span>,    <span style="color: #b22222;">% </span><span style="color: #b22222;">4b</span>

   <span style="color: #b22222;">% </span><span style="color: #b22222;">instancia las variables de la lista a elementos de su dominio:</span>
   label<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
El cálculo de la solución es
</p>
<div class="org-src-container">
<pre class="src src-shell">?- m&#250;sicos<span style="color: #707183;">(</span>S<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
S = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>2,1,3<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>3,1,2<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>1,2,3<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span>.

?- m&#250;sicos<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #909183;">[</span>Juan,Marco,Luis<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span>Cuba,Rusia,Corea<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span>Piano,Saxo,Flauta<span style="color: #909183;">]</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Juan = Corea, Corea = Saxo, Saxo = 2,
Marco = Rusia, Rusia = Piano, Piano = 1,
Luis = Cuba, Cuba = Flauta, Flauta = 3.
</pre>
</div></li>

<li>El código del segundo programa para resolver el problema de los músicos
está en <a href="https://swish.swi-prolog.org/p/PLP_musicos_2.pl">musicos_2.pl</a>.</li>
</ul>
</div>
</div>

<div id="outline-container-orgd7ff0e7" class="outline-3">
<h3 id="orgd7ff0e7"><span class="section-number-3">3.8.</span> El problema de la cebra con CLP(FD).</h3>
<div class="outline-text-3" id="text-3-8">
<ul class="org-ul">
<li>En el Problema de la cebra (de Lewis Carroll)
<ul class="org-ul">
<li>Se consideran cinco hombres de distintas nacionalidades viven en las
cinco primeras casas de una calle. Cada uno tiene una profesión, un
animal favorito y una bebida favorita (todas distintas de la de los
otros).</li>
<li>Se sabe que
<ul class="org-ul">
<li>1. El inglés vive en la casa roja.</li>
<li>2. El español tiene un perro.</li>
<li>3. El japonés es pintor.</li>
<li>4. El italiano bebe té.</li>
<li>5. El Noruego vive en la primera casa de la izquierda.</li>
<li>6. El propietario de la casa verde bebe café.</li>
<li>7. La casa verde está a la derecha de la blanca.</li>
<li>8. El escultor cria caracoles.</li>
<li>9. El diplomático vive en la casa amarilla.</li>
<li>10. En la casa central beben leche.</li>
<li>11. La casa del noruego está al lado de la casa azul.</li>
<li>12. El violinista bebe zumo de fruta.</li>
<li>13. El zorro está en la casa vecina de la del médico.</li>
<li>14. El caballo está en la casa vecina de la del diplomático.</li>
</ul></li>
<li>El problema consiste en determinar dónde está la cebra y quién bebe
agua.</li>
</ul></li>

<li><p>
Programa para el problema de la cebra
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- use_module<span style="color: #707183;">(</span>library<span style="color: #7388d6;">(</span>clpfd<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">cebra</span><span style="color: #707183;">(</span><span style="color: #a0522d;">Cebra</span>, <span style="color: #a0522d;">Agua</span>, <span style="color: #a0522d;">S</span><span style="color: #707183;">)</span> :-
   <span style="color: #b22222;">% </span><span style="color: #b22222;">Variables:</span>
   <span style="color: #a0522d;">S</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">Nacionalidad</span>, <span style="color: #a0522d;">Color</span>, <span style="color: #a0522d;">Profesi</span>&#243;n, <span style="color: #a0522d;">Animal</span>, <span style="color: #a0522d;">Bebida</span><span style="color: #707183;">]</span>,
   <span style="color: #a0522d;">Nacionalidad</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">Ingl</span>&#233;s, <span style="color: #a0522d;">Espa</span>&#241;ol, <span style="color: #a0522d;">Japones</span>, <span style="color: #a0522d;">Italiano</span>, <span style="color: #a0522d;">Noruego</span><span style="color: #707183;">]</span>,
   <span style="color: #a0522d;">Color</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">Roja</span>, <span style="color: #a0522d;">Verde</span>, <span style="color: #a0522d;">Blanca</span>, <span style="color: #a0522d;">Amarilla</span>, <span style="color: #a0522d;">Azul</span><span style="color: #707183;">]</span>,
   <span style="color: #a0522d;">Profesi</span>&#243;n = <span style="color: #707183;">[</span><span style="color: #a0522d;">Pintor</span>, <span style="color: #a0522d;">Escultor</span>, <span style="color: #a0522d;">Diplom</span>&#225;tico, <span style="color: #a0522d;">Violinista</span>, <span style="color: #a0522d;">Doctor</span><span style="color: #707183;">]</span>,
   <span style="color: #a0522d;">Animal</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">Perro</span>, <span style="color: #a0522d;">Caracol</span>, <span style="color: #a0522d;">Zorro</span>, <span style="color: #a0522d;">Caballo</span>, <span style="color: #a0522d;">Cebra</span><span style="color: #707183;">]</span>,
   <span style="color: #a0522d;">Bebida</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">Te</span>, <span style="color: #a0522d;">Cafe</span>, <span style="color: #a0522d;">Leche</span>, <span style="color: #a0522d;">Zumo</span>, <span style="color: #a0522d;">Agua</span><span style="color: #707183;">]</span>,
   flatten<span style="color: #707183;">(</span><span style="color: #a0522d;">S</span>, <span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,

   <span style="color: #b22222;">% </span><span style="color: #b22222;">especificamos los dominios (el valor de cada variable es el n&#250;mero de la</span>
   <span style="color: #b22222;">% </span><span style="color: #b22222;">casa): </span>
   <span style="color: #b22222;">% </span><span style="color: #b22222;">Nacionalidad in 1..5,</span>
   <span style="color: #b22222;">% </span><span style="color: #b22222;">Color in 1..5,</span>
   <span style="color: #b22222;">% </span><span style="color: #b22222;">Profesi&#243;n in 1..5,</span>
   <span style="color: #b22222;">% </span><span style="color: #b22222;">Animal in 1..5,</span>
   <span style="color: #b22222;">% </span><span style="color: #b22222;">Bebida in 1..5,</span>
   <span style="color: #a0522d;">L</span> ins 1..5,

   <span style="color: #b22222;">% </span><span style="color: #b22222;">todas distintas de la de los otros:</span>
   all_distinct<span style="color: #707183;">(</span><span style="color: #a0522d;">Nacionalidad</span><span style="color: #707183;">)</span>,
   all_distinct<span style="color: #707183;">(</span><span style="color: #a0522d;">Color</span><span style="color: #707183;">)</span>,
   all_distinct<span style="color: #707183;">(</span><span style="color: #a0522d;">Profesi</span>&#243;n<span style="color: #707183;">)</span>,
   all_distinct<span style="color: #707183;">(</span><span style="color: #a0522d;">Animal</span><span style="color: #707183;">)</span>,
   all_distinct<span style="color: #707183;">(</span><span style="color: #a0522d;">Bebida</span><span style="color: #707183;">)</span>,

   <span style="color: #b22222;">% </span><span style="color: #b22222;">restricciones:</span>
   <span style="color: #a0522d;">Ingl</span>&#233;s = <span style="color: #a0522d;">Roja</span>,                                      <span style="color: #b22222;">% </span><span style="color: #b22222;">1</span>
   <span style="color: #a0522d;">Espa</span>&#241;ol = <span style="color: #a0522d;">Perro</span>,                                    <span style="color: #b22222;">% </span><span style="color: #b22222;">2</span>
   <span style="color: #a0522d;">Japones</span> = <span style="color: #a0522d;">Pintor</span>,                                   <span style="color: #b22222;">% </span><span style="color: #b22222;">3</span>
   <span style="color: #a0522d;">Italiano</span> = <span style="color: #a0522d;">Te</span>,                                      <span style="color: #b22222;">% </span><span style="color: #b22222;">4</span>
   <span style="color: #a0522d;">Noruego</span> = 1,                                        <span style="color: #b22222;">% </span><span style="color: #b22222;">5</span>
   <span style="color: #a0522d;">Verde</span> = <span style="color: #a0522d;">Cafe</span>,                                       <span style="color: #b22222;">% </span><span style="color: #b22222;">6</span>
   <span style="color: #a0522d;">Verde</span> #= <span style="color: #a0522d;">Blanca</span> + 1,                                <span style="color: #b22222;">% </span><span style="color: #b22222;">7</span>
   <span style="color: #a0522d;">Escultor</span> = <span style="color: #a0522d;">Caracol</span>,                                 <span style="color: #b22222;">% </span><span style="color: #b22222;">8</span>
   <span style="color: #a0522d;">Diplom</span>&#225;tico = <span style="color: #a0522d;">Amarilla</span>,                             <span style="color: #b22222;">% </span><span style="color: #b22222;">9</span>
   <span style="color: #a0522d;">Leche</span> = 3,                                          <span style="color: #b22222;">% </span><span style="color: #b22222;">10</span>
   vecino<span style="color: #707183;">(</span><span style="color: #a0522d;">Noruego</span>, <span style="color: #a0522d;">Azul</span><span style="color: #707183;">)</span>,                              <span style="color: #b22222;">% </span><span style="color: #b22222;">11</span>
   <span style="color: #a0522d;">Violinista</span> = <span style="color: #a0522d;">Zumo</span>,                                  <span style="color: #b22222;">% </span><span style="color: #b22222;">12</span>
   vecino<span style="color: #707183;">(</span><span style="color: #a0522d;">Zorro</span>, <span style="color: #a0522d;">Doctor</span><span style="color: #707183;">)</span>,                              <span style="color: #b22222;">% </span><span style="color: #b22222;">13</span>
   vecino<span style="color: #707183;">(</span><span style="color: #a0522d;">Caballo</span>, <span style="color: #a0522d;">Diplom</span>&#225;tico<span style="color: #707183;">)</span>,                       <span style="color: #b22222;">% </span><span style="color: #b22222;">14</span>

   <span style="color: #b22222;">% </span><span style="color: #b22222;">instancia las variables de la lista a elementos de su dominio:</span>
   label<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">vecino</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #707183;">)</span> :-
   <span style="color: #707183;">(</span><span style="color: #a0522d;">X</span> #= <span style="color: #a0522d;">Y</span>+1<span style="color: #707183;">)</span> #\/ <span style="color: #707183;">(</span><span style="color: #a0522d;">X</span> #= <span style="color: #a0522d;">Y</span>-1<span style="color: #707183;">)</span>. 
</pre>
</div></li>

<li><p>
Cálculo de la solución
</p>
<div class="org-src-container">
<pre class="src src-shell">?- cebra<span style="color: #707183;">(</span>Cebra, Agua, S<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Cebra = 5,
Agua = 1,
S = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>3,4,5,2,1<span style="color: #7388d6;">]</span>,
     <span style="color: #7388d6;">[</span>3,5,4,1,2<span style="color: #7388d6;">]</span>,
     <span style="color: #7388d6;">[</span>5,3,1,4,2<span style="color: #7388d6;">]</span>,
     <span style="color: #7388d6;">[</span>4,3,1,2,5<span style="color: #7388d6;">]</span>,
     <span style="color: #7388d6;">[</span>2,5,3,4,1<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span> ;
false.
</pre>
</div></li>

<li><p>
La solución es
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-right" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="org-right">&#xa0;</th>
<th scope="col" class="org-left">Nacionalidad</th>
<th scope="col" class="org-left">Color</th>
<th scope="col" class="org-left">Profesión</th>
<th scope="col" class="org-left">Animal</th>
<th scope="col" class="org-left">Bebida</th>
</tr>
</thead>
<tbody>
<tr>
<td class="org-right">1</td>
<td class="org-left">Noruego</td>
<td class="org-left">Amarilla</td>
<td class="org-left">Diplomático</td>
<td class="org-left">Zorro</td>
<td class="org-left">Agua</td>
</tr>

<tr>
<td class="org-right">2</td>
<td class="org-left">Italiano</td>
<td class="org-left">Azul</td>
<td class="org-left">Doctor</td>
<td class="org-left">Caballo</td>
<td class="org-left">Te</td>
</tr>

<tr>
<td class="org-right">3</td>
<td class="org-left">Inglés</td>
<td class="org-left">Roja</td>
<td class="org-left">Escultor</td>
<td class="org-left">Caracol</td>
<td class="org-left">Leche</td>
</tr>

<tr>
<td class="org-right">4</td>
<td class="org-left">Espagnol</td>
<td class="org-left">Blanca</td>
<td class="org-left">Violinista</td>
<td class="org-left">Perro</td>
<td class="org-left">Zumo</td>
</tr>

<tr>
<td class="org-right">5</td>
<td class="org-left">Japones</td>
<td class="org-left">Verde</td>
<td class="org-left">Pintor</td>
<td class="org-left">Cebra</td>
<td class="org-left">Cafe</td>
</tr>
</tbody>
</table></li>

<li>El código del problema de la cebra se encuentra en <a href="https://swish.swi-prolog.org/p/PLP_cebra.pl">cebra.pl</a>.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org4821d06" class="outline-2">
<h2 id="org4821d06"><span class="section-number-2">4.</span> Restricciones sobre variables booleanas con CLP(B)</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-orgae93da8" class="outline-3">
<h3 id="orgae93da8"><span class="section-number-3">4.1.</span> El módulo de restricciones booleanas: CLP(B)</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>El módulo de restricciones booleanas se importa con</li>
</ul>
<div class="org-src-container">
<pre class="src src-prolog">:- use_module<span style="color: #707183;">(</span>library<span style="color: #7388d6;">(</span>clpb<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.  
</pre>
</div>

<ul class="org-ul">
<li>Los valores de verdad son
<ul class="org-ul">
<li><code>0</code> (falso) y</li>
<li><code>1</code> (verdadero).</li>
</ul></li>

<li>Las conectivas lógicas son
<ul class="org-ul">
<li><code>~</code> (negación),</li>
<li><code>+</code> (disyunción) y</li>
<li><code>*</code> (conjunción).</li>
</ul></li>

<li>Las relaciones entre expresiones lógicas son
<ul class="org-ul">
<li><code>=:=</code> (igualdad que corresponde a la equivalencia),</li>
<li><code>=\=</code> (desigualdad),</li>
<li><code>=&lt;</code> (menor o igual que corresponde a la implicación),</li>
<li><code>&gt;=</code> (mayor o igual),</li>
<li><code>&lt;</code> (menor) y</li>
<li><code>&gt;</code> (mayor).</li>
</ul></li>

<li><p>
<code>sat(E)</code> se verifica si la expresión <code>E</code> es satisfacible. Por ejemplo.
</p>
<div class="org-src-container">
<pre class="src src-shell">?- sat<span style="color: #707183;">(</span>X*Y<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = Y, Y = 1.

?- sat<span style="color: #707183;">(</span>X * ~X<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.

?- sat<span style="color: #707183;">(</span>X+Y<span style="color: #707183;">)</span>, labeling<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>X,Y<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = 0, Y = 1 ;
X = 1, Y = 0 ;
X = Y, Y = 1.

?- sat<span style="color: #707183;">(</span>X*Y + X*Z<span style="color: #707183;">)</span>, labeling<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>X,Y,Z<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = Z, Z = 1, Y = 0 ;
X = Y, Y = 1, Z = 0 ;
X = Y, Y = Z, Z = 1.
</pre>
</div></li>

<li><p>
<code>taut(E, T)</code> se verifica que
</p>
<ul class="org-ul">
<li><code>T = 1</code>, si <code>E</code> es una tautología,</li>
<li><code>T = 0</code>, si <code>E</code> es un insatisfacible,</li>
<li>falla, en caso contrario.</li>
</ul>
<p>
Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- taut<span style="color: #707183;">(</span>X + ~X,T<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
T = 1,
<span style="color: #0000ff;">sat</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>=:=X<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>

?- taut<span style="color: #707183;">(</span>X * ~X,T<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
T = 0,
<span style="color: #0000ff;">sat</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>=:=X<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>

?- taut<span style="color: #707183;">(</span>X,T<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.

?- sat<span style="color: #707183;">(</span>X =&lt; Y<span style="color: #707183;">)</span>, sat<span style="color: #707183;">(</span>Y =&lt; Z<span style="color: #707183;">)</span>, taut<span style="color: #707183;">(</span>X =&lt; Z, T<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
T = 1,
<span style="color: #0000ff;">sat</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>=:=X*Y<span style="color: #707183;">)</span>,
<span style="color: #0000ff;">sat</span><span style="color: #707183;">(</span><span style="color: #a0522d;">Y</span>=:=Y*Z<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
</pre>
</div></li>

<li><p>
La expresión <code>X^E</code> significa que exista algún valor de <code>X</code> para el que
se verifica la expresión <code>E</code>. Por ejemplo,
</p>

<div class="org-src-container">
<pre class="src src-shell">?- sat<span style="color: #707183;">(</span>X^<span style="color: #7388d6;">(</span>X*Y<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Y = 1,
<span style="color: #0000ff;">sat</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>=:=X<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>

?- sat<span style="color: #707183;">(</span>X^<span style="color: #7388d6;">(</span>X*<span style="color: #909183;">(</span>~X<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.

?- sat<span style="color: #707183;">(</span>X^Y^<span style="color: #7388d6;">(</span>X+Y<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
<span style="color: #0000ff;">sat</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>=:=X<span style="color: #707183;">)</span>,
<span style="color: #0000ff;">sat</span><span style="color: #707183;">(</span><span style="color: #a0522d;">Y</span>=:=Y<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
</pre>
</div></li>

<li><p>
<code>card(Ns,Es)</code> se verifica si el número de expresiones de <code>Es</code> que son
verdaderas pertenece a la lista de números enteros <code>Ns</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- sat<span style="color: #707183;">(</span>card<span style="color: #7388d6;">(</span><span style="color: #909183;">[</span>1<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span>X,Y<span style="color: #909183;">]</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>, labeling<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>X,Y<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = 0,
Y = 1 ;
X = 1,
Y = 0.

?- sat<span style="color: #707183;">(</span>card<span style="color: #7388d6;">(</span><span style="color: #909183;">[</span>2<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span>X,Y<span style="color: #909183;">]</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>, labeling<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>X,Y<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = Y, Y = 1.

?- sat<span style="color: #707183;">(</span>card<span style="color: #7388d6;">(</span><span style="color: #909183;">[</span>0,2<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span>X,Y<span style="color: #909183;">]</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>, labeling<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>X,Y<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = Y, Y = 0 ;
X = Y, Y = 1.
</pre>
</div></li>

<li>El manual de la librería de restricciones booleanas está en este
<a href="https://www.swi-prolog.org/pldoc/man?section=clpb">enlace</a>.</li>
</ul>
</div>
</div>

<div id="outline-container-orgfe10548" class="outline-3">
<h3 id="orgfe10548"><span class="section-number-3">4.2.</span> Caballeros y escuderos</h3>
<div class="outline-text-3" id="text-4-2">
</div>
<div id="outline-container-orgaa1d16a" class="outline-4">
<h4 id="orgaa1d16a"><span class="section-number-4">4.2.1.</span> Contexto de los rompecabezas</h4>
<div class="outline-text-4" id="text-4-2-1">
<ul class="org-ul">
<li>Los rompecabezas de esta sección están ambientados en una isla
ficticia donde todos los habitantes son o caballeros, que siempre
dicen la verdad, o escuderos, que siempre mienten. Los rompecabezas
involucran a un visitante de la isla que se encuentra con pequeños
grupos de habitantes. Por lo general, el objetivo es que el visitante
deduzca el tipo de habitantes de sus declaraciones, pero algunos
rompecabezas de este tipo piden que se deduzcan otros hechos.</li>

<li>Representación:
<ul class="org-ul">
<li>Si <code>A = 1</code>, entonces <code>A</code> es un caballero.</li>
<li>Si <code>A = 0</code>, entonces <code>A</code> es un escudero.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org9158546" class="outline-4">
<h4 id="org9158546"><span class="section-number-4">4.2.2.</span> 1º rompecabezas</h4>
<div class="outline-text-4" id="text-4-2-2">
<ul class="org-ul">
<li>Enunciado: Te encuentras con dos habitantes, A y B. El A dice: "O soy un
escudero o B es un caballero". ¿Qué es cada uno?</li>

<li><p>
Solución:
</p>
<div class="org-src-container">
<pre class="src src-shell">?- sat<span style="color: #707183;">(</span>A =:= <span style="color: #7388d6;">(</span>~A + B<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
A = B, B = 1.
</pre>
</div>
<p>
Por tanto, ambos son caballeros.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgbe1248d" class="outline-4">
<h4 id="orgbe1248d"><span class="section-number-4">4.2.3.</span> 2º rompecabezas</h4>
<div class="outline-text-4" id="text-4-2-3">
<ul class="org-ul">
<li>Enunciado: Te encuentras con dos habitantes, A y B. El A dice: "Yo soy
un escudero, pero B no lo es". ¿Qué es cada uno?</li>

<li><p>
Solución:
</p>
<div class="org-src-container">
<pre class="src src-shell">?- sat<span style="color: #707183;">(</span>A =:= <span style="color: #7388d6;">(</span>~A * B<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
A = B, B = 0.
</pre>
</div>
<p>
Por tanto, ambos son escuderos.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orga2d5b7c" class="outline-4">
<h4 id="orga2d5b7c"><span class="section-number-4">4.2.4.</span> 3º rompecabezas</h4>
<div class="outline-text-4" id="text-4-2-4">
<ul class="org-ul">
<li>Enunciado: Te encuentras con dos habitantes, A y B. El A dice: "Al menos
uno de nosotros es un escudero". ¿Qué es cada uno?</li>

<li><p>
Solución:
</p>
<div class="org-src-container">
<pre class="src src-shell">?- sat<span style="color: #707183;">(</span>A =:= card<span style="color: #7388d6;">(</span><span style="color: #909183;">[</span>1,2<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span>~A,~B<span style="color: #909183;">]</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
A = 1,
B = 0.
</pre>
</div>
<p>
Por tanto, A es un caballero y B es un escudero.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgb7dac97" class="outline-4">
<h4 id="orgb7dac97"><span class="section-number-4">4.2.5.</span> 4º rompecabezas</h4>
<div class="outline-text-4" id="text-4-2-5">
<ul class="org-ul">
<li>Enunciado: Te encuentras con tres habitantes, A, B y C. El A dice:
"Todos nosotros somos escuderos" y el B dice: "Exactamente uno de
nosotros es un caballero". ¿Qué es cada uno?</li>

<li><p>
Solución:
</p>
<div class="org-src-container">
<pre class="src src-shell">?- sat<span style="color: #707183;">(</span>A =:= <span style="color: #7388d6;">(</span>~A * ~B * ~C<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>, sat<span style="color: #707183;">(</span>B =:= card<span style="color: #7388d6;">(</span><span style="color: #909183;">[</span>1<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span>A,B,C<span style="color: #909183;">]</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
A = C, C = 0,
B = 1.
</pre>
</div>
<p>
Por tanto, A y C son escuderos y B es un caballero.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgce3ec01" class="outline-4">
<h4 id="orgce3ec01"><span class="section-number-4">4.2.6.</span> 5º rompecabezas</h4>
<div class="outline-text-4" id="text-4-2-6">
<ul class="org-ul">
<li>Enunciado: Te encuentras con tres habitantes, A, B y C. El A dice: "B
es un escudero" y el B dice: "A y C son del mismo tipo". ¿Qué es C?</li>

<li><p>
Solución:
</p>
<div class="org-src-container">
<pre class="src src-shell">?- sat<span style="color: #707183;">(</span> A =:= ~B<span style="color: #707183;">)</span>, sat<span style="color: #707183;">(</span>B =:= <span style="color: #7388d6;">(</span>A =:= C<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
C = 0,
<span style="color: #0000ff;">sat</span><span style="color: #707183;">(</span><span style="color: #a0522d;">A</span>=<span style="color: #8b2252;">\=</span>B<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
</pre>
</div>
<p>
Por tanto, C es escudero.
</p></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org732e622" class="outline-3">
<h3 id="org732e622"><span class="section-number-3">4.3.</span> La frase correcta</h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li>El enunciado del problema de la frase correcta es: "¿Cuál de las
siguientes frases es la correcta? 
<ol class="org-ol">
<li>Todas las siguientes.</li>
<li>Ninguna de las siguientes.</li>
<li>Todas las anteriores.</li>
<li>Alguna de las anteriores.</li>
<li>Ninguna de las anteriores.</li>
<li>Ninguna de las anteriores."</li>
</ol></li>

<li><p>
<code>solución([A1,A2,A3,A4,A5,A6])</code> se verifica si <code>Ai = 1</code> si la frase
<code>i</code> del problema es correcta y <code>Ai = 0</code> si la frase <code>i</code> del problema
es incorrecta.
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- use_module<span style="color: #707183;">(</span>library<span style="color: #7388d6;">(</span>clpb<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">soluci&#243;n</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">A1</span>,<span style="color: #a0522d;">A2</span>,<span style="color: #a0522d;">A3</span>,<span style="color: #a0522d;">A4</span>,<span style="color: #a0522d;">A5</span>,<span style="color: #a0522d;">A6</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   sat<span style="color: #707183;">(</span><span style="color: #a0522d;">A1</span> =:= <span style="color: #a0522d;">A2</span>*<span style="color: #a0522d;">A3</span>*<span style="color: #a0522d;">A4</span>*<span style="color: #a0522d;">A5</span>*<span style="color: #a0522d;">A6</span><span style="color: #707183;">)</span>,
   sat<span style="color: #707183;">(</span><span style="color: #a0522d;">A2</span> =:= ~<span style="color: #7388d6;">(</span><span style="color: #a0522d;">A2</span>+<span style="color: #a0522d;">A3</span>+<span style="color: #a0522d;">A4</span>+<span style="color: #a0522d;">A5</span>+<span style="color: #a0522d;">A6</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>,
   sat<span style="color: #707183;">(</span><span style="color: #a0522d;">A3</span> =:= <span style="color: #a0522d;">A1</span>*<span style="color: #a0522d;">A2</span><span style="color: #707183;">)</span>,
   sat<span style="color: #707183;">(</span><span style="color: #a0522d;">A4</span> =:= card<span style="color: #7388d6;">(</span><span style="color: #909183;">[</span>1,2,3<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span><span style="color: #a0522d;">A1</span>,<span style="color: #a0522d;">A2</span>,<span style="color: #a0522d;">A3</span><span style="color: #909183;">]</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>,
   sat<span style="color: #707183;">(</span><span style="color: #a0522d;">A5</span> =:= ~<span style="color: #7388d6;">(</span><span style="color: #a0522d;">A1</span>+<span style="color: #a0522d;">A2</span>+<span style="color: #a0522d;">A3</span>+<span style="color: #a0522d;">A4</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>,
   sat<span style="color: #707183;">(</span><span style="color: #a0522d;">A6</span> =:= ~<span style="color: #7388d6;">(</span><span style="color: #a0522d;">A1</span>+<span style="color: #a0522d;">A2</span>+<span style="color: #a0522d;">A3</span>+<span style="color: #a0522d;">A4</span>+<span style="color: #a0522d;">A5</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.
</pre>
</div></li>

<li><p>
Cálculo de la solución
</p>
<div class="org-src-container">
<pre class="src src-shell">?- soluci&#243;n<span style="color: #707183;">(</span>L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span>0, 0, 0, 0, 1, 0<span style="color: #707183;">]</span>.
</pre>
</div>
<p>
Por tanto, la verdadera es la 5ª.
</p></li>

<li>El código del problema de la frase correcta se encuentra en <a href="https://swish.swi-prolog.org/p/PLP_La_frase_correcta.pl">La_frase_correcta.pl</a>.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org524f085" class="outline-2">
<h2 id="org524f085"><span class="section-number-2">5.</span> Ejercicios</h2>
<div class="outline-text-2" id="text-5">
<p>
<b>Nota</b>: En los primeros ejercicio se usará CLP(R) que se importa con
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- use_module<span style="color: #707183;">(</span>library<span style="color: #7388d6;">(</span>clpr<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.
</pre>
</div>
</div>

<div id="outline-container-orgf8890e0" class="outline-3">
<h3 id="orgf8890e0"><span class="section-number-3">5.1.</span> Producto escalar con CLP(R)</h3>
<div class="outline-text-3" id="text-5-1">
<hr />
<p>
<b>Ejercicio 1.1.</b> Definir en CLP(R) la relación <code>producto(V1,V2,P)</code> que
se verifica si <code>P</code> es el producto escalar del vector <code>V1</code> por el
~V24. Por ejemplo,
</p>
<pre class="example">
?- producto([4,2],[3,7],P).
P = 26.0 
?- producto([4,2,5],[3,7,2],P).
P = 36.0 
</pre>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">producto</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[]</span>,<span style="color: #7388d6;">[]</span>,0<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">producto</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">X1</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L1</span><span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">X2</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L2</span><span style="color: #7388d6;">]</span>,<span style="color: #a0522d;">Z</span><span style="color: #707183;">)</span> :-
   producto<span style="color: #707183;">(</span><span style="color: #a0522d;">L1</span>,<span style="color: #a0522d;">L2</span>,<span style="color: #a0522d;">Y</span><span style="color: #707183;">)</span>,
   <span style="color: #707183;">{</span><span style="color: #a0522d;">Z</span> = <span style="color: #a0522d;">X1</span>*<span style="color: #a0522d;">X2</span>+<span style="color: #a0522d;">Y</span><span style="color: #707183;">}</span>.
</pre>
</div>

<hr />
<p>
<b>Ejercicio 1.2.</b> Determinar <code>X</code> tal que el producto de <code>[4,2]</code> por
 <code>[X,7]</code> es 26.
</p>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">?- producto<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>4,2<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>X,7<span style="color: #7388d6;">]</span>,26<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = 3.0 ;
false.
</pre>
</div>

<hr />
<p>
<b>Ejercicio 1.3.</b> Determinar <code>X</code> e <code>Y</code> tales que el producto de <code>[4,2]</code>
por <code>[X,Y]</code> es 26. 
</p>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">?- producto<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>4,2<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>X,Y<span style="color: #7388d6;">]</span>,26<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
<span style="color: #707183;">{</span><span style="color: #a0522d;">X</span>=6.5-0.5*Y,<span style="color: #a0522d;">_13736</span>=2.0*Y<span style="color: #707183;">}</span><span style="color: #483d8b;">.</span>
</pre>
</div>

<hr />
<p>
<b>Ejercicio 1.4.</b> Resolver el sistema de ecuaciones
</p>
<div class="org-src-container">
<pre class="src src-txt">3*X + Y   =  5
  X + 8*Y = 17
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">?- producto<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>3,1<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>X,Y<span style="color: #7388d6;">]</span>,5<span style="color: #707183;">)</span>, producto<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>1,8<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>X,Y<span style="color: #7388d6;">]</span>,17<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = 0.9999999999999999,
Y = 2.0.
</pre>
</div>
</div>
</div>

<div id="outline-container-org745ef40" class="outline-3">
<h3 id="org745ef40"><span class="section-number-3">5.2.</span> Matrices equilibradas</h3>
<div class="outline-text-3" id="text-5-2">
<hr />
<p>
<b>Ejercicio 2.1.</b> Una matriz está equilibrada si cada elemento interior
(es decir, que pertenece a una línea distinta de la primera y última
fila y columna) es la media de sus cuatro vecinos.
</p>

<p>
Definir en CLP(R) la relación <code>equilibrada(M)4 que se verifica si ~M</code> es 
una matriz equilibrada. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- equilibrada<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #909183;">[</span>4,4,4<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span>0,Y,0<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span>0,0,0<span style="color: #909183;">]</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Y = 1.0 ;
false.

?- equilibrada<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #909183;">[</span>4,4,4<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span>X,Y,0<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span>0,0,0<span style="color: #909183;">]</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
<span style="color: #707183;">{</span><span style="color: #a0522d;">Y</span>=1.0+0.25*X<span style="color: #707183;">}</span> ;
false.

?- equilibrada<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #909183;">[</span>4,4,4<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span>X,1,Z<span style="color: #909183;">]</span>,<span style="color: #909183;">[</span>0,0,0<span style="color: #909183;">]</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
<span style="color: #707183;">{</span><span style="color: #a0522d;">Z</span>= -X<span style="color: #707183;">}</span> ;
false.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">equilibrada</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">_</span>, <span style="color: #a0522d;">_</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">equilibrada</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">R1</span>, <span style="color: #a0522d;">R2</span>, <span style="color: #a0522d;">R3</span> <span style="color: #a020f0;">|</span> <span style="color: #a0522d;">Rs</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :- 
   equilibrada_aux<span style="color: #707183;">(</span><span style="color: #a0522d;">R1</span>, <span style="color: #a0522d;">R2</span>, <span style="color: #a0522d;">R3</span><span style="color: #707183;">)</span>, 
   equilibrada<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">R2</span>, <span style="color: #a0522d;">R3</span> <span style="color: #a020f0;">|</span> <span style="color: #a0522d;">Rs</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">equilibrada_aux</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">_</span>, <span style="color: #a0522d;">_</span><span style="color: #7388d6;">]</span>, <span style="color: #7388d6;">[</span><span style="color: #a0522d;">_</span>, <span style="color: #a0522d;">_</span><span style="color: #7388d6;">]</span>, <span style="color: #7388d6;">[</span><span style="color: #a0522d;">_</span>, <span style="color: #a0522d;">_</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">equilibrada_aux</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">_TL</span>, <span style="color: #a0522d;">T</span>, <span style="color: #a0522d;">TR</span> <span style="color: #a020f0;">|</span> <span style="color: #a0522d;">Ts</span><span style="color: #7388d6;">]</span>, <span style="color: #7388d6;">[</span><span style="color: #a0522d;">ML</span>, <span style="color: #a0522d;">M</span>, <span style="color: #a0522d;">MR</span> <span style="color: #a020f0;">|</span> <span style="color: #a0522d;">Ms</span><span style="color: #7388d6;">]</span>, <span style="color: #7388d6;">[</span><span style="color: #a0522d;">_BL</span>, <span style="color: #a0522d;">B</span>, <span style="color: #a0522d;">BR</span> <span style="color: #a020f0;">|</span> <span style="color: #a0522d;">Bs</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   <span style="color: #707183;">{</span>4*<span style="color: #a0522d;">M</span> = <span style="color: #a0522d;">T</span> + <span style="color: #a0522d;">ML</span> + <span style="color: #a0522d;">MR</span> + <span style="color: #a0522d;">B</span><span style="color: #707183;">}</span>, 
   equilibrada_aux<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">T</span>, <span style="color: #a0522d;">TR</span> <span style="color: #a020f0;">|</span> <span style="color: #a0522d;">Ts</span><span style="color: #7388d6;">]</span>, <span style="color: #7388d6;">[</span><span style="color: #a0522d;">M</span>, <span style="color: #a0522d;">MR</span> <span style="color: #a020f0;">|</span> <span style="color: #a0522d;">Ms</span><span style="color: #7388d6;">]</span>, <span style="color: #7388d6;">[</span><span style="color: #a0522d;">B</span>, <span style="color: #a0522d;">BR</span> <span style="color: #a020f0;">|</span> <span style="color: #a0522d;">Bs</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>. 
</pre>
</div>

<hr />
<p>
<b>Ejercicio 2.2.</b> Determinar los valores interiores de la siguiente
matriz para que sea  equilibrada
</p>
<div class="org-src-container">
<pre class="src src-txt">[[0,100,100,100,100,100, 0],
 [0,  _,  _,  _,  _,  _, 0],
 [0,  _,  _,  _,  _,  _, 0],
 [0,  _,  _,  _,  _,  _, 0],
 [0,  _,  _,  _,  _,  _, 0],
 [0,  0,  0,  0,  0,  0, 0]],
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">?- P = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>0,100,100,100,100,100, 0<span style="color: #7388d6;">]</span>,
        <span style="color: #7388d6;">[</span>0,  _,  _,  _,  _,  _, 0<span style="color: #7388d6;">]</span>,
        <span style="color: #7388d6;">[</span>0,  _,  _,  _,  _,  _, 0<span style="color: #7388d6;">]</span>,
        <span style="color: #7388d6;">[</span>0,  _,  _,  _,  _,  _, 0<span style="color: #7388d6;">]</span>,
        <span style="color: #7388d6;">[</span>0,  _,  _,  _,  _,  _, 0<span style="color: #7388d6;">]</span>,
        <span style="color: #7388d6;">[</span>0,  0,  0,  0,  0,  0, 0<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span>, 
   equilibrada<span style="color: #707183;">(</span>P<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>

P = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>0, 100,      100,      100,      100,      100,       0<span style="color: #7388d6;">]</span>,
     <span style="color: #7388d6;">[</span>0,  46.6117,  62.4778,  66.4292,  62.4778,  46.6117,  0<span style="color: #7388d6;">]</span>,
     <span style="color: #7388d6;">[</span>0,  23.9691,  36.8702,  40.7612,  36.8702,  23.9691,  0<span style="color: #7388d6;">]</span>,
     <span style="color: #7388d6;">[</span>0,  12.3945,  20.2727,  22.8752,  20.2727,  12.3945,  0<span style="color: #7388d6;">]</span>,
     <span style="color: #7388d6;">[</span>0,  5.33633,  8.9508,   10.1942,   8.9508,   5.33633, 0<span style="color: #7388d6;">]</span>,
     <span style="color: #7388d6;">[</span>0,  0,        0,         0,        0,        0,       0<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span> ;
false.
</pre>
</div>

<p>
<b>Nota</b>: En los siguientes ejercicio se usará CLP(R) que se importa con
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- use_module<span style="color: #707183;">(</span>library<span style="color: #7388d6;">(</span>clpfd<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.
</pre>
</div>
</div>
</div>

<div id="outline-container-org71d10c2" class="outline-3">
<h3 id="org71d10c2"><span class="section-number-3">5.3.</span> Criptoarimética con CUATRO * 5 = VEINTE</h3>
<div class="outline-text-3" id="text-5-3">
<hr />
<p>
<b>Ejercicio 3.</b> Definir en CLP(FD) la relación solución tal que
<code>solución([C,U,A,T,R,O],[V,E,I,N,T,E])</code> se verifica si el valor de
cada letra es un dígito distinto y se cumple la ecuación
</p>
<pre class="example">
CUATRO * 5 = VEINTE
</pre>

<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">soluci&#243;n</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">U</span>,<span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">T</span>,<span style="color: #a0522d;">R</span>,<span style="color: #a0522d;">O</span><span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">V</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">I</span>,<span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">T</span>,<span style="color: #a0522d;">E</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">Vars</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">U</span>,<span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">T</span>,<span style="color: #a0522d;">R</span>,<span style="color: #a0522d;">O</span>,<span style="color: #a0522d;">V</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">I</span>,<span style="color: #a0522d;">N</span><span style="color: #707183;">]</span>,
   <span style="color: #a0522d;">Vars</span> ins 0..9,                                 <span style="color: #b22222;">% </span><span style="color: #b22222;">Los valores son los d&#237;gitos</span>
   all_distinct<span style="color: #707183;">(</span><span style="color: #a0522d;">Vars</span><span style="color: #707183;">)</span>,                            <span style="color: #b22222;">% </span><span style="color: #b22222;">Los valores son distintos</span>
      <span style="color: #707183;">(</span>100000*<span style="color: #a0522d;">C</span>+10000*<span style="color: #a0522d;">U</span>+1000*<span style="color: #a0522d;">A</span>+100*<span style="color: #a0522d;">T</span>+10*<span style="color: #a0522d;">R</span>+<span style="color: #a0522d;">O</span><span style="color: #707183;">)</span> * 5
   #=  100000*<span style="color: #a0522d;">V</span>+10000*<span style="color: #a0522d;">E</span>+1000*<span style="color: #a0522d;">I</span>+100*<span style="color: #a0522d;">N</span>+10*<span style="color: #a0522d;">T</span>+<span style="color: #a0522d;">E</span>,
   label<span style="color: #707183;">(</span><span style="color: #a0522d;">Vars</span><span style="color: #707183;">)</span>.
</pre>
</div>

<p>
<b>Cálculo de la solución</b>
</p>
<div class="org-src-container">
<pre class="src src-shell">?- soluci&#243;n<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>C,U,A,T,R,O<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>V,E,I,N,T,E<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
C = 1,
U = 7,
A = 0,
T = 4,
R = 6,
O = 9,
V = 8,
E = 5,
I = 2,
N = 3 ;
false.

?- soluci&#243;n<span style="color: #707183;">(</span>L1, L2<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L1 = <span style="color: #707183;">[</span>1,7,0,4,6,9<span style="color: #707183;">]</span>,
L2 = <span style="color: #707183;">[</span>8,5,2,3,4,5<span style="color: #707183;">]</span> ;
false.
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb96ae9c" class="outline-3">
<h3 id="orgb96ae9c"><span class="section-number-3">5.4.</span> Problema de la mochila</h3>
<div class="outline-text-3" id="text-5-4">
<hr />
<p>
<b>Ejercicio 4.1.</b> Un contrabandista tiene una mochila de capacidad
limitada, supongamos que a 9 unidades de peso. Él puede hacer
contrabando de botellas de whisky de 4 unidades de peso, botes de
colonia de 3 unidades de peso y cartones de tabaco de 2 unidades de
peso. Las ganancias en las botellas de whisky, botes de colonia y
cartones de tabaco son de 15, 10 y 7 euros, respectivamente.
</p>

<p>
Definir en CLP(FD) la relación <code>viaje_rentable(+N,?W,?C,?T,?G)</code> que se 
verifique si con <code>W</code> unidades de whisky, <code>C</code> de colonia y <code>T</code> de tabacos
se obtiene una ganancia <code>G</code> que es mayor o igual que <code>N</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- viaje_rentable<span style="color: #707183;">(</span>30, W, C, T, G<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
W = 0,
C = 1,
T = 3,
G = 31 ;
W = T, T = 0,
C = 3,
G = 30 ;
W = C, C = T, T = 1,
G = 32 ;
W = 2,
C = T, T = 0,
G = 30.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">viaje_rentable</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">W</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">T</span>,<span style="color: #a0522d;">G</span><span style="color: #707183;">)</span> :-
   <span style="color: #707183;">[</span><span style="color: #a0522d;">W</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">T</span><span style="color: #707183;">]</span> ins 0..9, 
   4*<span style="color: #a0522d;">W</span> + 3*<span style="color: #a0522d;">C</span> + 2*<span style="color: #a0522d;">T</span> #=&lt; 9, 
   <span style="color: #a0522d;">G</span> #= 15*<span style="color: #a0522d;">W</span> + 10*<span style="color: #a0522d;">C</span> + 7*<span style="color: #a0522d;">T</span>,
   <span style="color: #a0522d;">G</span> #&gt;= <span style="color: #a0522d;">N</span>,
   label<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">W</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">T</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
</pre>
</div>

<hr />
<p>
<b>Ejercicio 4.2.</b> Definir en CLP(FD) la relación <code>viaje_óptimo(?W,?C,?T)</code>
que se verifique si con <code>W</code> unidades de whisky, <code>C</code> de colonia y <code>T</code> de
tabacos se obtiene la máxima ganancia. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- viaje_&#243;ptimo<span style="color: #707183;">(</span>W,C,T<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
W = C, C = T, T = 1 ;
false.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">viaje_&#243;ptimo</span><span style="color: #707183;">(</span><span style="color: #a0522d;">W</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">T</span><span style="color: #707183;">)</span> :-
   viaje_rentable<span style="color: #707183;">(</span><span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">W</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">T</span>,<span style="color: #a0522d;">G</span><span style="color: #707183;">)</span>,
   not<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>viaje_rentable<span style="color: #909183;">(</span><span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">G1</span><span style="color: #909183;">)</span>, <span style="color: #a0522d;">G1</span> #&gt; <span style="color: #a0522d;">G</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf39330d" class="outline-3">
<h3 id="orgf39330d"><span class="section-number-3">5.5.</span> Asignación óptima de tareas</h3>
<div class="outline-text-3" id="text-5-5">
<hr />
<p>
<b>Ejercicio 5.</b> Se tiene que realizar simultáneamente 4 tareas y se
dispone de cuatro empresas que han realizado un presupuesto para cada
tarea resumido en la siguiente tabla
</p>
<div class="org-src-container">
<pre class="src src-txt">   T1 T2 T3 T4
E1 3  9  7  6
E2 2  8  5  9
E3 6  7  3  8
E4 7  9  4  7
</pre>
</div>

<p>
Definir en CLP(FD) la relación <code>asignación_óptima(M,L)</code> que se verifica
si <code>L</code> es la asignación de las tareas que hace mínimo el coste
total. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- asignaci&#243;n_&#243;ptima<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #909183;">[</span>3,9,7,6<span style="color: #909183;">]</span>,
                      <span style="color: #909183;">[</span>2,8,5,9<span style="color: #909183;">]</span>,
                      <span style="color: #909183;">[</span>6,7,3,8<span style="color: #909183;">]</span>,
                      <span style="color: #909183;">[</span>7,9,4,7<span style="color: #909183;">]</span><span style="color: #7388d6;">]</span>,
                     <span style="color: #7388d6;">[</span>T1,T2,T3,T4<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
T1 = 3
T2 = 4
T3 = 1
T4 = 2
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">asignaci&#243;n</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">E1</span>,<span style="color: #a0522d;">E2</span>,<span style="color: #a0522d;">E3</span>,<span style="color: #a0522d;">E4</span><span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">T1</span>,<span style="color: #a0522d;">T2</span>,<span style="color: #a0522d;">T3</span>,<span style="color: #a0522d;">T4</span><span style="color: #7388d6;">]</span>,<span style="color: #a0522d;">C</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">L</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">T1</span>,<span style="color: #a0522d;">T2</span>,<span style="color: #a0522d;">T3</span>,<span style="color: #a0522d;">T4</span><span style="color: #707183;">]</span>,
   <span style="color: #a0522d;">L</span> ins 1..4,           <span style="color: #b22222;">% </span><span style="color: #b22222;">Ti=j significa que el trabajo i se asigna a j</span>
   all_distinct<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,
   nth1<span style="color: #707183;">(</span><span style="color: #a0522d;">T1</span>,<span style="color: #a0522d;">E1</span>,<span style="color: #a0522d;">CT1</span><span style="color: #707183;">)</span>,
   nth1<span style="color: #707183;">(</span><span style="color: #a0522d;">T2</span>,<span style="color: #a0522d;">E2</span>,<span style="color: #a0522d;">CT2</span><span style="color: #707183;">)</span>,
   nth1<span style="color: #707183;">(</span><span style="color: #a0522d;">T3</span>,<span style="color: #a0522d;">E3</span>,<span style="color: #a0522d;">CT3</span><span style="color: #707183;">)</span>,
   nth1<span style="color: #707183;">(</span><span style="color: #a0522d;">T4</span>,<span style="color: #a0522d;">E4</span>,<span style="color: #a0522d;">CT4</span><span style="color: #707183;">)</span>,
   <span style="color: #a0522d;">C</span> #= <span style="color: #a0522d;">CT1</span>+<span style="color: #a0522d;">CT2</span>+<span style="color: #a0522d;">CT3</span>+<span style="color: #a0522d;">CT4</span>,
   label<span style="color: #707183;">(</span><span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">asignaci&#243;n_&#243;ptima</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">E1</span>,<span style="color: #a0522d;">E2</span>,<span style="color: #a0522d;">E3</span>,<span style="color: #a0522d;">E4</span><span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">T1</span>,<span style="color: #a0522d;">T2</span>,<span style="color: #a0522d;">T3</span>,<span style="color: #a0522d;">T4</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   asignaci&#243;n<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">E1</span>,<span style="color: #a0522d;">E2</span>,<span style="color: #a0522d;">E3</span>,<span style="color: #a0522d;">E4</span><span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">T1</span>,<span style="color: #a0522d;">T2</span>,<span style="color: #a0522d;">T3</span>,<span style="color: #a0522d;">T4</span><span style="color: #7388d6;">]</span>,<span style="color: #a0522d;">C</span><span style="color: #707183;">)</span>,
   not<span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>asignaci&#243;n<span style="color: #909183;">(</span><span style="color: #709870;">[</span><span style="color: #a0522d;">E1</span>,<span style="color: #a0522d;">E2</span>,<span style="color: #a0522d;">E3</span>,<span style="color: #a0522d;">E4</span><span style="color: #709870;">]</span>,<span style="color: #709870;">[</span><span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">_</span>,<span style="color: #a0522d;">_</span><span style="color: #709870;">]</span>,<span style="color: #a0522d;">C1</span><span style="color: #909183;">)</span>, <span style="color: #a0522d;">C1</span> &gt; <span style="color: #a0522d;">C</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>.
</pre>
</div>

<p>
<b>Nota.</b> Es los siguientes ejercicios se definirán relaciones estudiadas
en temas % anteriores pero usando restricciones sobre dominios finitos.
</p>
</div>
</div>

<div id="outline-container-org92524fb" class="outline-3">
<h3 id="org92524fb"><span class="section-number-3">5.6.</span> El factorial</h3>
<div class="outline-text-3" id="text-5-6">
<hr />
<p>
<b>Ejercicio 6.</b> Definir la relación <code>factorial(X,Y)</code> se verifica si <code>Y</code>
es el factorial de <code>X</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- factorial<span style="color: #707183;">(</span>3,Y<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Y = 6 ;
false.

?- factorial<span style="color: #707183;">(</span>X,6<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = 3 ;
false.

?- factorial<span style="color: #707183;">(</span>X,7<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">factorial</span><span style="color: #707183;">(</span>0,1<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">factorial</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">X</span> #&gt; 0,
   <span style="color: #a0522d;">A</span> #= <span style="color: #a0522d;">X</span> - 1,
   <span style="color: #a0522d;">Y</span> #= <span style="color: #a0522d;">X</span> * <span style="color: #a0522d;">B</span>,
   factorial<span style="color: #707183;">(</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">B</span><span style="color: #707183;">)</span>.
</pre>
</div>
</div>
</div>

<div id="outline-container-org2e5b7eb" class="outline-3">
<h3 id="org2e5b7eb"><span class="section-number-3">5.7.</span> El máximo de dos números enteros</h3>
<div class="outline-text-3" id="text-5-7">
<hr />
<p>
<b>Ejercicio 7.</b> Definir la relación <code>máximo(X,Y,Z)</code> que se verifica si
<code>Z</code> es el máximo de los números <code>X</code> e <code>Y</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- m&#225;ximo<span style="color: #707183;">(</span>2,3,Z<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Z = 3.

?- m&#225;ximo<span style="color: #707183;">(</span>2,Y,3<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Y = 3.

?- m&#225;ximo<span style="color: #707183;">(</span>X,3,3<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X<span style="color: #a020f0;"> in</span> inf..3.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">m&#225;ximo</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span>,<span style="color: #a0522d;">Z</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">Z</span> #= max<span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #707183;">)</span>.
</pre>
</div>
</div>
</div>

<div id="outline-container-orge91b23b" class="outline-3">
<h3 id="orge91b23b"><span class="section-number-3">5.8.</span> El algoritmo de Euclides</h3>
<div class="outline-text-3" id="text-5-8">
<hr />
<p>
<b>Ejercicio 8.</b> Dados dos enteros positivos <code>X</code> e <code>Y</code>, el máximo común
divisor (mcd) <code>D</code> puede obtenerse de la siguiente manera:  
</p>
<ul class="org-ul">
<li>Si <code>X</code> e <code>Y</code> son iguales, entonces <code>D</code> es igual a <code>X</code>.</li>
<li>Si <code>X &lt; Y</code>, entonces <code>D</code> es igual al máximo común divisor de <code>X</code> y la 
diferencia ~Y-X4.</li>
<li>Si <code>Y &lt; X</code> entonces <code>D</code> es igual al máximo común divisor de <code>X</code> y la
diferencia <code>X-Y</code>.</li>
</ul>

<p>
Definir el predicado <code>mcd(X,Y,D)</code> que se verifica si <code>D</code> es el máximo
común divisor de los enteros positivos <code>X</code> e <code>Y</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- mcd<span style="color: #707183;">(</span>6,10,D<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
D = 2 
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">mcd</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">X</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">mcd</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span>,<span style="color: #a0522d;">Z</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">X</span>  #&lt; <span style="color: #a0522d;">Y</span>,
   <span style="color: #a0522d;">Y1</span> #= <span style="color: #a0522d;">Y</span> - <span style="color: #a0522d;">X</span>,
   mcd<span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y1</span>,<span style="color: #a0522d;">Z</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">mcd</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span>,<span style="color: #a0522d;">Z</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">X</span> #&gt; <span style="color: #a0522d;">Y</span>,
   mcd<span style="color: #707183;">(</span><span style="color: #a0522d;">Y</span>,<span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Z</span><span style="color: #707183;">)</span>.
</pre>
</div>
</div>
</div>

<div id="outline-container-org32861ea" class="outline-3">
<h3 id="org32861ea"><span class="section-number-3">5.9.</span> Recorridos del caballo de ajedrez</h3>
<div class="outline-text-3" id="text-5-9">
<hr />
<p>
<b>Ejercicio 9.1.</b> Supongamos que los cuadros del tablero de ajedrez los
representamos por pares de números <code>[X,Y]</code> con <code>X</code> e <code>Y</code> entre 1 y 8. 
</p>

<p>
Definir la relación <code>salta(C1,C2)</code> que se verifica si el caballo puede 
pasar en un movimiento del cuadrado <code>C1</code> al cuadrado <code>C2</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- salta<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span>1,1<span style="color: #7388d6;">]</span>,S<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
S = <span style="color: #707183;">[</span>3,2<span style="color: #707183;">]</span> ;
S = <span style="color: #707183;">[</span>2,3<span style="color: #707183;">]</span> ;
false.

?- salta<span style="color: #707183;">(</span>X,<span style="color: #7388d6;">[</span>3,2<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = <span style="color: #707183;">[</span>1,1<span style="color: #707183;">]</span> ;
X = <span style="color: #707183;">[</span>1,3<span style="color: #707183;">]</span> ;
X = <span style="color: #707183;">[</span>5,1<span style="color: #707183;">]</span> ;
X = <span style="color: #707183;">[</span>5,3<span style="color: #707183;">]</span> ;
X = <span style="color: #707183;">[</span>2,0<span style="color: #707183;">]</span> ;
X = <span style="color: #707183;">[</span>2,4<span style="color: #707183;">]</span> ;
X = <span style="color: #707183;">[</span>4,0<span style="color: #707183;">]</span> ;
X = <span style="color: #707183;">[</span>4,4<span style="color: #707183;">]</span>.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">salta</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">X1</span>,<span style="color: #a0522d;">Y1</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   <span style="color: #707183;">[</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span>,<span style="color: #a0522d;">X1</span>,<span style="color: #a0522d;">Y1</span><span style="color: #707183;">]</span> ins 1..8,
   dxy<span style="color: #707183;">(</span><span style="color: #a0522d;">Dx</span>,<span style="color: #a0522d;">Dy</span><span style="color: #707183;">)</span>,
   <span style="color: #a0522d;">X1</span> #= <span style="color: #a0522d;">X</span>+<span style="color: #a0522d;">Dx</span>,
   <span style="color: #a0522d;">Y1</span> #= <span style="color: #a0522d;">Y</span>+<span style="color: #a0522d;">Dy</span>.

<span style="color: #b22222;">% </span><span style="color: #b22222;">dxy(?X,?Y) se verifica si un caballo puede moverse X espacios</span>
<span style="color: #b22222;">% </span><span style="color: #b22222;">horizontales e Y verticales.</span>
<span style="color: #0000ff;">dxy</span><span style="color: #707183;">(</span>2,1<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">dxy</span><span style="color: #707183;">(</span>2,-1<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">dxy</span><span style="color: #707183;">(</span>-2,1<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">dxy</span><span style="color: #707183;">(</span>-2,-1<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">dxy</span><span style="color: #707183;">(</span>1,2<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">dxy</span><span style="color: #707183;">(</span>1,-2<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">dxy</span><span style="color: #707183;">(</span>-1,2<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">dxy</span><span style="color: #707183;">(</span>-1,-2<span style="color: #707183;">)</span>.
</pre>
</div>

<hr />
<p>
<b>Ejercicio 9.2.</b> Definir la relación <code>camino(L)</code> que se verifica si <code>L</code>
es una lista de cuadrados representando el camino recorrido por un
caballo sobre un tablero vacío. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- camino<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #909183;">[</span>1,1<span style="color: #909183;">]</span>|C<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
C = <span style="color: #707183;">[]</span> ;
C = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>3,2<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span> ;
C = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>3,2<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>5,3<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span> ;
C = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>3,2<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>5,3<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>7,4<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span> 

?- camino<span style="color: #707183;">(</span>L<span style="color: #707183;">)</span>, append<span style="color: #707183;">(</span>_L1,<span style="color: #7388d6;">[</span><span style="color: #909183;">[</span>5,3<span style="color: #909183;">]</span><span style="color: #7388d6;">]</span>,L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>5,3<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span> ;
L = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>3,2<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>5,3<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span> ;
L = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>3,4<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>5,3<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span> ;
L = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>7,2<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>5,3<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span> ;
L = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>7,4<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>5,3<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span>

?- camino<span style="color: #707183;">(</span>L<span style="color: #707183;">)</span>, length<span style="color: #707183;">(</span>L,4<span style="color: #707183;">)</span>, append<span style="color: #707183;">(</span>_L1,<span style="color: #7388d6;">[</span><span style="color: #909183;">[</span>5,3<span style="color: #909183;">]</span><span style="color: #7388d6;">]</span>,L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>2,3<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>1,1<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>3,2<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>5,3<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span> ;
L = <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span>3,4<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>1,3<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>3,2<span style="color: #7388d6;">]</span>,<span style="color: #7388d6;">[</span>5,3<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span> 
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">camino</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">_</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">camino</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">C1</span>,<span style="color: #a0522d;">C2</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   camino<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">C2</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">L</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   salta<span style="color: #707183;">(</span><span style="color: #a0522d;">C1</span>,<span style="color: #a0522d;">C2</span><span style="color: #707183;">)</span>,
   \+ member<span style="color: #707183;">(</span><span style="color: #a0522d;">C1</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>,
   \+ member<span style="color: #707183;">(</span><span style="color: #a0522d;">C2</span>,<span style="color: #a0522d;">L</span><span style="color: #707183;">)</span>.
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc4358f9" class="outline-3">
<h3 id="orgc4358f9"><span class="section-number-3">5.10.</span> Descomposiciones en productos de dos factores</h3>
<div class="outline-text-3" id="text-5-10">
<hr />
<p>
<b>Ejercicio 10.</b> Definir la relación <code>factores(X,Y,Z)</code> que se verifica si
el producto de <code>X</code> e <code>Y</code> es <code>Z</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- factores<span style="color: #707183;">(</span>2,3,Z<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Z = 6.

?- factores<span style="color: #707183;">(</span>2,Y,6<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Y = 3.

?- factores<span style="color: #707183;">(</span>X,3,6<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = 2.

?- factores<span style="color: #707183;">(</span>2,Y,7<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.

?- factores<span style="color: #707183;">(</span>X,Y,6<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = -6,
Y = -1 ;
X = -3,
Y = -2 ;
X = -2,
Y = -3 ;
X = -1,
Y = -6 ;
X = 1,
Y = 6 ;
X = 2,
Y = 3 ;
X = 3,
Y = 2 ;
X = 6,
Y = 1.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">factores</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span>,<span style="color: #a0522d;">Z</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">Z</span> #= <span style="color: #a0522d;">X</span> * <span style="color: #a0522d;">Y</span>,
   label<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
</pre>
</div>
</div>
</div>

<div id="outline-container-org9bd78cc" class="outline-3">
<h3 id="org9bd78cc"><span class="section-number-3">5.11.</span> Descomposiciones en sumas de dos sumandos</h3>
<div class="outline-text-3" id="text-5-11">
<hr />
<p>
<b>Ejercicio 11.</b> Definir la relación <code>suma_segura(X,Y,Z)</code> se verifica si
<code>X</code> e <code>Y</code> son enteros y <code>Z</code> es la suma de <code>X</code> e <code>Y</code>. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- suma_segura<span style="color: #707183;">(</span>2,3,Z<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Z = 5.

?- suma_segura<span style="color: #707183;">(</span>2,Y,5<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Y = 3.

?- suma_segura<span style="color: #707183;">(</span>X,3,5<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = 2.

?- suma_segura<span style="color: #707183;">(</span>X,Y,3<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = 0,
Y = 3 ;
X = 1,
Y = 2 ;
X = 2,
Y = 1 ;
X = 3,
Y = 0.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">suma_segura</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span>,<span style="color: #a0522d;">Z</span><span style="color: #707183;">)</span> :-
   <span style="color: #707183;">[</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #707183;">]</span> ins 0..<span style="color: #0000ff;">sup</span>,
   <span style="color: #a0522d;">Z</span> #= <span style="color: #a0522d;">X</span>+<span style="color: #a0522d;">Y</span>,
   label<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Y</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcccbc91" class="outline-3">
<h3 id="orgcccbc91"><span class="section-number-3">5.12.</span> Cuadrados mágicos</h3>
<div class="outline-text-3" id="text-5-12">
<hr />
<p>
<b>Ejercicio 12.</b> El problema de los cuadrados mágicos consiste en colocar
los números 1, 2, 3, 4, 5, 6, 7, 8 y 9 en un cuadrado 3x3 de forma que
todas las líneas (filas, columnas y diagonales) sumen igual; es decir,
buscar los valores para las variables A, B ,C, D, E, F, G, H, I.
</p>
<!-- This HTML table template is generated by emacs 27.1 -->
<table border="1">
  <tr>
    <td align="left" valign="top">
      &nbsp;A&nbsp;
    </td>
    <td align="left" valign="top">
      &nbsp;B&nbsp;
    </td>
    <td align="left" valign="top">
      &nbsp;C&nbsp;
    </td>
  </tr>
  <tr>
    <td align="left" valign="top">
      &nbsp;D&nbsp;
    </td>
    <td align="left" valign="top">
      &nbsp;E&nbsp;
    </td>
    <td align="left" valign="top">
      &nbsp;F&nbsp;
    </td>
  </tr>
  <tr>
    <td align="left" valign="top">
      &nbsp;G&nbsp;
    </td>
    <td align="left" valign="top">
      &nbsp;H&nbsp;
    </td>
    <td align="left" valign="top">
      &nbsp;I&nbsp;
    </td>
  </tr>
</table>
<p>
tales que
   {A,B,C,D,E,F,G,H,I} = {1,2,3,4,5,6,7,8,9},
   A+B+C = 15,
   D+E+F = 15,
   G+H+I = 15,
   A+D+G = 15,
   B+E+H = 15,
   C+F+I = 15,
   A+E+I = 15,
   C+E+G = 15.
</p>

<p>
Definir la relación <code>cuadrado(L)</code> que se verifica si <code>L</code> es una solución
del problema de los cuadrados mágicos. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- cuadrado<span style="color: #707183;">(</span>L<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
L = <span style="color: #707183;">[</span>2,7,6,9,5,1,4,3,8<span style="color: #707183;">]</span> ;
L = <span style="color: #707183;">[</span>2,9,4,7,5,3,6,1,8<span style="color: #707183;">]</span> 
?- findall<span style="color: #707183;">(</span>_X,cuadrado<span style="color: #7388d6;">(</span>_X<span style="color: #7388d6;">)</span>,_L<span style="color: #707183;">)</span>,length<span style="color: #707183;">(</span>_L,N<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = 8.
</pre>
</div>
<hr />

<p>
<b>1ª solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">cuadrado</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">F</span>,<span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">H</span>,<span style="color: #a0522d;">I</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   <span style="color: #707183;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">F</span>,<span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">H</span>,<span style="color: #a0522d;">I</span><span style="color: #707183;">]</span> ins 1..9,
   all_distinct<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">F</span>,<span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">H</span>,<span style="color: #a0522d;">I</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   <span style="color: #a0522d;">A</span>+<span style="color: #a0522d;">B</span>+<span style="color: #a0522d;">C</span> #= 15,
   <span style="color: #a0522d;">D</span>+<span style="color: #a0522d;">E</span>+<span style="color: #a0522d;">F</span> #= 15,
   <span style="color: #a0522d;">G</span>+<span style="color: #a0522d;">H</span>+<span style="color: #a0522d;">I</span> #= 15,
   <span style="color: #a0522d;">A</span>+<span style="color: #a0522d;">D</span>+<span style="color: #a0522d;">G</span> #= 15,
   <span style="color: #a0522d;">B</span>+<span style="color: #a0522d;">E</span>+<span style="color: #a0522d;">H</span> #= 15,
   <span style="color: #a0522d;">C</span>+<span style="color: #a0522d;">F</span>+<span style="color: #a0522d;">I</span> #= 15,
   <span style="color: #a0522d;">A</span>+<span style="color: #a0522d;">E</span>+<span style="color: #a0522d;">I</span> #= 15,
   <span style="color: #a0522d;">C</span>+<span style="color: #a0522d;">E</span>+<span style="color: #a0522d;">G</span> #= 15,
   label<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">F</span>,<span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">H</span>,<span style="color: #a0522d;">I</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
</pre>
</div>


<p>
<b>2ª solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">cuadrado_2</span><span style="color: #707183;">(</span><span style="color: #a0522d;">Sol</span><span style="color: #707183;">)</span>:-
  <span style="color: #a0522d;">Sol</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">F</span>,<span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">H</span>,<span style="color: #a0522d;">I</span><span style="color: #707183;">]</span>,
  <span style="color: #a0522d;">Sol</span> ins 1..9,
  all_distinct<span style="color: #707183;">(</span><span style="color: #a0522d;">Sol</span><span style="color: #707183;">)</span>,
  maplist<span style="color: #707183;">(</span>#=<span style="color: #7388d6;">(</span>15<span style="color: #7388d6;">)</span>,
    <span style="color: #7388d6;">[</span><span style="color: #a0522d;">A</span>+<span style="color: #a0522d;">B</span>+<span style="color: #a0522d;">C</span>,
     <span style="color: #a0522d;">D</span>+<span style="color: #a0522d;">E</span>+<span style="color: #a0522d;">F</span>,
     <span style="color: #a0522d;">G</span>+<span style="color: #a0522d;">H</span>+<span style="color: #a0522d;">I</span>,
     <span style="color: #a0522d;">A</span>+<span style="color: #a0522d;">D</span>+<span style="color: #a0522d;">G</span>,
     <span style="color: #a0522d;">B</span>+<span style="color: #a0522d;">E</span>+<span style="color: #a0522d;">H</span>,
     <span style="color: #a0522d;">C</span>+<span style="color: #a0522d;">F</span>+<span style="color: #a0522d;">I</span>,
     <span style="color: #a0522d;">A</span>+<span style="color: #a0522d;">E</span>+<span style="color: #a0522d;">I</span>,
     <span style="color: #a0522d;">C</span>+<span style="color: #a0522d;">E</span>+<span style="color: #a0522d;">G</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
  label<span style="color: #707183;">(</span><span style="color: #a0522d;">Sol</span><span style="color: #707183;">)</span>.
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd4f6d22" class="outline-3">
<h3 id="orgd4f6d22"><span class="section-number-3">5.13.</span> Sucesión de Fibonacci</h3>
<div class="outline-text-3" id="text-5-13">
<hr />
<p>
<b>Ejercicio 13,</b> La sucesión de Fibonacci es 1, 1, 2, 3, 5, 8, &#x2026; y está
definida por
</p>
<div class="org-src-container">
<pre class="src src-txt">f(1) = 1
f(2) = 1
f(n) = f(n-1)+f(n-2), si n &gt; 2
</pre>
</div>

<p>
Definir la relación <code>fibonacci(N,X)</code> que se verifica si <code>X</code> es el <code>N</code>-ésimo
término de la sucesión de Fibonacci. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- fibonacci<span style="color: #707183;">(</span>6,X<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = 8 

?- fibonacci<span style="color: #707183;">(</span>X,8<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
X = 6 

?- fibonacci<span style="color: #707183;">(</span>X,9<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
false.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">fibonacci</span><span style="color: #707183;">(</span>1,1<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">fibonacci</span><span style="color: #707183;">(</span>2,1<span style="color: #707183;">)</span>.
<span style="color: #0000ff;">fibonacci</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>,<span style="color: #a0522d;">F</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">N</span> #&gt; 2,
   <span style="color: #a0522d;">F</span> #&gt;= 2,
   <span style="color: #a0522d;">N1</span> #= <span style="color: #a0522d;">N</span>-1,
   <span style="color: #a0522d;">N2</span> #= <span style="color: #a0522d;">N</span>-2,
   <span style="color: #a0522d;">F</span> #= <span style="color: #a0522d;">F1</span> + <span style="color: #a0522d;">F2</span>,
   <span style="color: #707183;">[</span><span style="color: #a0522d;">F1</span>,<span style="color: #a0522d;">F2</span><span style="color: #707183;">]</span> ins 1..<span style="color: #0000ff;">sup</span>,
   fibonacci<span style="color: #707183;">(</span><span style="color: #a0522d;">N1</span>,<span style="color: #a0522d;">F1</span><span style="color: #707183;">)</span>,
   fibonacci<span style="color: #707183;">(</span><span style="color: #a0522d;">N2</span>,<span style="color: #a0522d;">F2</span><span style="color: #707183;">)</span>.
</pre>
</div>
</div>
</div>

<div id="outline-container-orgda5fae8" class="outline-3">
<h3 id="orgda5fae8"><span class="section-number-3">5.14.</span> Problema de las N reinas</h3>
<div class="outline-text-3" id="text-5-14">
<hr />
<p>
Ejercicio 14. El problema de las N reinas consiste en colocar N reinas
en un tablero rectangular de dimensiones N por N de forma que no se
encuentren más de una en la misma línea: horizontal, vertical o
diagonal.
</p>

<p>
Definir la relación <code>reinas(N,S)</code> que se verifica si <code>S</code> es una solución 
del problema de las <code>N</code> reinas. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- reinas<span style="color: #707183;">(</span>4, Rs<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Rs = <span style="color: #707183;">[</span>2,4,1,3<span style="color: #707183;">]</span> ;
Rs = <span style="color: #707183;">[</span>3,1,4,2<span style="color: #707183;">]</span> 

?- reinas<span style="color: #707183;">(</span>8, Rs<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Rs = <span style="color: #707183;">[</span>1,5,8,6,3,7,2,4<span style="color: #707183;">]</span>

?- findall<span style="color: #707183;">(</span>S,reinas<span style="color: #7388d6;">(</span>8,S<span style="color: #7388d6;">)</span>,_L<span style="color: #707183;">)</span>, length<span style="color: #707183;">(</span>_L,N<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
N = 92.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">reinas</span><span style="color: #707183;">(</span><span style="color: #a0522d;">N</span>, <span style="color: #a0522d;">Rs</span><span style="color: #707183;">)</span> :-
   length<span style="color: #707183;">(</span><span style="color: #a0522d;">Rs</span>, <span style="color: #a0522d;">N</span><span style="color: #707183;">)</span>,
   <span style="color: #a0522d;">Rs</span> ins 1..<span style="color: #a0522d;">N</span>,
   seguras<span style="color: #707183;">(</span><span style="color: #a0522d;">Rs</span><span style="color: #707183;">)</span>,
   label<span style="color: #707183;">(</span><span style="color: #a0522d;">Rs</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">seguras</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[]</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">seguras</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">R</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">Rs</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> :-
   seguras<span style="color: #707183;">(</span><span style="color: #a0522d;">Rs</span>, <span style="color: #a0522d;">R</span>, 1<span style="color: #707183;">)</span>,
   seguras<span style="color: #707183;">(</span><span style="color: #a0522d;">Rs</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">seguras</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[]</span>, <span style="color: #a0522d;">_</span>, <span style="color: #a0522d;">_</span><span style="color: #707183;">)</span>.
<span style="color: #0000ff;">seguras</span><span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">R</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">Rs</span><span style="color: #7388d6;">]</span>, <span style="color: #a0522d;">R0</span>, <span style="color: #a0522d;">D0</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">R0</span> #\= <span style="color: #a0522d;">R</span>,
   abs<span style="color: #707183;">(</span><span style="color: #a0522d;">R0</span> - <span style="color: #a0522d;">R</span><span style="color: #707183;">)</span> #\= <span style="color: #a0522d;">D0</span>,
   <span style="color: #a0522d;">D1</span> #= <span style="color: #a0522d;">D0</span> + 1,
   seguras<span style="color: #707183;">(</span><span style="color: #a0522d;">Rs</span>, <span style="color: #a0522d;">R0</span>, <span style="color: #a0522d;">D1</span><span style="color: #707183;">)</span>.
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb4e26e0" class="outline-3">
<h3 id="orgb4e26e0"><span class="section-number-3">5.15.</span> Coloreado de mapas</h3>
<div class="outline-text-3" id="text-5-15">
<hr />
<p>
Ejercicio 15.1. Se considera el siguiente mapa
</p>
<div class="org-src-container">
<pre class="src src-txt">+----------+----------+  
|    a     |     b    |  
+----+-----+-----+----+  
|    |           |    |  
| c  |     d     | e  |  
|    |           |    |  
+----+-----+-----+----+  
|    f     |     g    |  
+----------+----------+  
</pre>
</div>

<p>
Definir la relación <code>coloración1(Rs)</code> que se verifica si <code>Rs</code> es una de
números que representa los colores de los regiones de <code>Rs</code> tal que las
regiones vecinas tengan colores distintos. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- coloraci&#243;n1<span style="color: #707183;">(</span>Rs<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Rs = <span style="color: #707183;">[</span>1,2,2,3,1,1,2<span style="color: #707183;">]</span> ;
Rs = <span style="color: #707183;">[</span>1,2,2,3,1,1,4<span style="color: #707183;">]</span> 
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">coloraci&#243;n1</span><span style="color: #707183;">(</span><span style="color: #a0522d;">Rs</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">Rs</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">F</span>,<span style="color: #a0522d;">G</span><span style="color: #707183;">]</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">A</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">D</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">B</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">E</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">C</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">F</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">D</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">F</span>,<span style="color: #a0522d;">G</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">E</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">G</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">F</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">G</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">F</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   label<span style="color: #707183;">(</span><span style="color: #a0522d;">Rs</span><span style="color: #707183;">)</span>.

<span style="color: #0000ff;">distinta</span><span style="color: #707183;">(</span><span style="color: #a0522d;">X</span>,<span style="color: #a0522d;">Ys</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">X</span> in 1..4,
   <span style="color: #a0522d;">Ys</span> ins 1..4,
   maplist<span style="color: #707183;">(</span>#\=<span style="color: #7388d6;">(</span><span style="color: #a0522d;">X</span><span style="color: #7388d6;">)</span>,<span style="color: #a0522d;">Ys</span><span style="color: #707183;">)</span>,
   label<span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #a0522d;">X</span><span style="color: #a020f0;">|</span><span style="color: #a0522d;">Ys</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>.
</pre>
</div>

<hr />
<p>
<b>Ejercicio 15.2.</b> Se considera el siguiente mapa
</p>
<div class="org-src-container">
<pre class="src src-txt">+----+-----+-----+----+
| a  |  b  |  c  | d  |
+----+-----+-----+----+
| e  |           | f  |
+----+     k     +----+
| g  |           | h  |
+----+-----+-----+----+
|    i     |     j    |
+----------+----------+
</pre>
</div>

<p>
Definir la relación <code>coloración2(Rs)</code> que se verifica si <code>Rs</code> es una de
números que representa los colores de los regiones de <code>Rs</code> tal que las
regiones vecinas tengan colores distintos. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- coloraci&#243;n2<span style="color: #707183;">(</span>Rs<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Rs = <span style="color: #707183;">[</span>1,2,1,2,3,3,1,1,2,3,4<span style="color: #707183;">]</span> ;
Rs = <span style="color: #707183;">[</span>1,2,1,2,3,3,1,1,3,2,4<span style="color: #707183;">]</span> 
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">coloraci&#243;n2</span><span style="color: #707183;">(</span><span style="color: #a0522d;">Rs</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">Rs</span> = <span style="color: #707183;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">F</span>,<span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">H</span>,<span style="color: #a0522d;">I</span>,<span style="color: #a0522d;">J</span>,<span style="color: #a0522d;">K</span><span style="color: #707183;">]</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">A</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">K</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">B</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">K</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">C</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">F</span>,<span style="color: #a0522d;">K</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">D</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">F</span>,<span style="color: #a0522d;">K</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">E</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">K</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">F</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">H</span>,<span style="color: #a0522d;">K</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">G</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">I</span>,<span style="color: #a0522d;">K</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">H</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">F</span>,<span style="color: #a0522d;">J</span>,<span style="color: #a0522d;">K</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">I</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">J</span>,<span style="color: #a0522d;">K</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">J</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">I</span>,<span style="color: #a0522d;">H</span>,<span style="color: #a0522d;">K</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   distinta<span style="color: #707183;">(</span><span style="color: #a0522d;">K</span>,<span style="color: #7388d6;">[</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">B</span>,<span style="color: #a0522d;">C</span>,<span style="color: #a0522d;">D</span>,<span style="color: #a0522d;">E</span>,<span style="color: #a0522d;">F</span>,<span style="color: #a0522d;">G</span>,<span style="color: #a0522d;">H</span>,<span style="color: #a0522d;">I</span>,<span style="color: #a0522d;">J</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>,
   label<span style="color: #707183;">(</span><span style="color: #a0522d;">Rs</span><span style="color: #707183;">)</span>.
</pre>
</div>

<hr />
<p>
<b>Ejercicio 16.</b> El problema de los animale es el siguiente:
</p>
<blockquote>
<p>
Un granjero tiene pollos y vacas. Sabiendo que tiene A animales, y los
animales tienen P patas en total, ¿cuántos pollos tiene el granjero?
</p>
</blockquote>

<p>
Definir la relación <code>animales(A,P,X,Y)</code> que se verifica si <code>X</code> es el
número de pollos e <code>Y</code> es el número de vacas sabiendo que hay <code>A</code>
animales que tienen <code>P</code> patas en total. Por ejemplo,
</p>
<div class="org-src-container">
<pre class="src src-shell">?- animales<span style="color: #707183;">(</span>30,74,Pollos,Vacas<span style="color: #707183;">)</span><span style="color: #483d8b;">.</span>
Pollos = 23,
Vacas = 7.
</pre>
</div>
<hr />

<p>
<b>Solución</b>
</p>

<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #0000ff;">animales</span><span style="color: #707183;">(</span><span style="color: #a0522d;">A</span>,<span style="color: #a0522d;">P</span>,<span style="color: #a0522d;">Pollos</span>,<span style="color: #a0522d;">Vacas</span><span style="color: #707183;">)</span> :-
   <span style="color: #a0522d;">Pollos</span> + <span style="color: #a0522d;">Vacas</span> #= <span style="color: #a0522d;">A</span>,
   2*<span style="color: #a0522d;">Pollos</span> + 4*<span style="color: #a0522d;">Vacas</span> #= <span style="color: #a0522d;">P</span>,
   <span style="color: #707183;">[</span><span style="color: #a0522d;">Pollos</span>, <span style="color: #a0522d;">Vacas</span><span style="color: #707183;">]</span> ins 0..<span style="color: #0000ff;">sup</span>.
</pre>
</div>

<p>
<b>Nota</b>: El código con las soluciones de los ejercicios se encuentra en
<a href="https://swish.swi-prolog.org/p/PLP_ejercicios-tema-9.pl">ejercicios-tema-9.pl</a>.
</p>
</div>
</div>
</div>

<div id="outline-container-orgebe9dc4" class="outline-2">
<h2 id="orgebe9dc4"><span class="section-number-2">6.</span> Bibliografía</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>I. Bratko.
<i>Prolog programming for artificial intelligence (Third ed.)</i>
(Prentice&#x2013;Hall, 2001)
<ul class="org-ul">
<li>Cap 14: "Constraint logic programming".</li>
</ul></li>

<li>A.M. Cheadle, W. Harvey, A.J. Sadler, J. Schimpf, K. Shen y M.G. Wallace.
<a href="http://www.eclipseclp.org/doc/tutorial.pdf">ECLiPSe: A tutorial introduction</a>.</li>

<li>K. Marriott y P.J. Stuckey.
<i>Programming with constraints (An introduction)</i>. 
(The MIT Press, 1998).</li>

<li>M. Triska.
<a href="https://www.metalevel.at/boolean.pdf">Boolean constraints in SWI-Prolog: A comprehensive system description</a>.</li>

<li>M. Triska.
<a href="https://github.com/triska/clpb">CLP(B): Constraint logic programming over boolean variables</a>.</li>

<li>M. Triska.
<a href="https://www.metalevel.at/prolog/clpz">CLP(FD) and CLP(ℤ): Prolog integer arithmetic</a>.</li>

<li>M. Triska.
<a href="https://github.com/triska/clpz">CLP(ℤ): Constraint logic programming over integers</a>.</li>

<li>M. Triska.
<a href="https://www.metalevel.at/prolog/optimization">Combinatorial optimization with Prolog</a>.</li>

<li>M. Triska.
<a href="https://www.metalevel.at/prolog/puzzles">Logic puzzles with Prolog</a>.</li>

<li>J. Wielemaker.
<a href="http://eu.swi-prolog.org/pldoc/doc_for?object=manual">SWI&#x2013;Prolog (Reference manual)</a>
<ul class="org-ul">
<li>Cap. 8: <a href="http://eu.swi-prolog.org/pldoc/man?section=clp">Constraint Logic Programming</a>.</li>
<li>Sección A.8: <a href="https://www.swi-prolog.org/pldoc/man?section=clpb">Constraint logic programming over boolean variables</a></li>
<li>Sección A.9: <a href="http://eu.swi-prolog.org/pldoc/man?section=clpfd">Constraint logic programming over finite domains</a>.</li>
<li>Sección A.10: <a href="http://eu.swi-prolog.org/pldoc/man?section=clpqr">Constraint logic programming over rationals and reals</a>.</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr>
<center>
<p><a href="/"><i class="fa fa-home"></i></a> |
   <a href="/materias/PLconProlog/">Inicial</a> |
   <a href="/materias/PLconProlog/temas.html">Temas  </a> |
   <a href="/materias/PLconProlog/sistemas.html">Sistemas </a> |
   <a href="/materias/PLconProlog/cursos.html">Cursos </a> |
   <a href="/materias/PLconProlog/doc.html">Documentación  </a>
</p>
</center>
<div id="extras">
  <p><a href="/">José A. Alonso Jiménez</a>
  <p>Sevilla, 02 de junio del 2022</p>
  <p><i class="fa fa-cc"></i> Licencia: <a href="https://creativecommons.org/licenses/by-nc-sa/2.5/es/">Creative Commons</a>.</p>
</div>
</div>
</body>
</html>
