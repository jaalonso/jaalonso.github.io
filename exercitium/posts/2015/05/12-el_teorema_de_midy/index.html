<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>El teorema de Midy | Exercitium</title>
<link href="../../../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/custom.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css2?family=Merriweather&amp;family=Open+Sans&amp;family=Source+Code+Pro:wght@400;600&amp;display=swap" rel="stylesheet">
<link href="../../../../assets/css/extras.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="es" href="../../../../rss.xml">
<link rel="canonical" href="https://jaalonso.github.io/exercitium/posts/2015/05/12-el_teorema_de_midy/">
<link rel="icon" href="../../../../favicon.png" sizes="48x48">
<!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]--><meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jaalonso.github.io/exercitium/images/exercitium.jpg">
<meta name="twitter:title" content="El teorema de Midy | Exercitium">
<meta name="author" content="José A. Alonso">
<link rel="prev" href="../11-representacion_decimal_de_numeros_racionales/" title="Representación decimal de números racionales" type="text/html">
<link rel="next" href="../13-reconocimiento_de_camino_en_un_grafo/" title="Reconocimiento de camino en un grafo" type="text/html">
<meta property="og:site_name" content="Exercitium">
<meta property="og:title" content="El teorema de Midy">
<meta property="og:url" content="https://jaalonso.github.io/exercitium/posts/2015/05/12-el_teorema_de_midy/">
<meta property="og:description" content="El ejercicio de hoy tiene como objetivo comprobar la veracidad del Teorema de Midy:

Sea a/p una fracción, donde a &lt; p y p &gt; 5 es un número primo. Si esta fracción tiene una expansión decimal periódic">
<meta property="og:image" content="https://jaalonso.github.io/exercitium/images/exercitium.jpg">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2015-05-12T06:00:00+02:00">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@Jose_A_Alonso">
<meta name="twitter:creator" content="@Jose_A_Alonso">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>
    <div id="container">
            <header id="header"><h1 id="brand"><a href="../../../../" title="Exercitium" rel="home">

        <span id="blog-title">Exercitium</span>
    </a></h1>
    <div>Ejercicios de programación con Haskell y Python</div>

        
            <nav id="menu"><ul>
<li><a href="https://jaalonso.github.io/">José A. Alonso</a></li>
                <li><a href="../../../../archive.html">Archivo</a></li>
                <li><a href="../../../../categories/">Etiquetas</a></li>
                <li><a href="../../../../about/">Acerca de</a></li>
                <li><a href="../../../../rss.xml">RSS</a></li>

    
    
    
    </ul></nav></header><main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">El teorema de Midy</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    José A. Alonso
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2015-05-12T06:00:00+02:00" itemprop="datePublished" title="12-05-2015">12-05-2015</time></a>
            </p>
        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>El ejercicio de hoy tiene como objetivo comprobar la veracidad del <a href="https://sselbergg.wordpress.com/2013/10/06/el-teorema-de-midy/">Teorema de Midy</a>:</p>
<blockquote>
<p>Sea a/p una fracción, donde a &lt; p y p &gt; 5 es un número primo. Si esta fracción tiene una expansión decimal periódica, donde la cantidad de dígitos en el período es par, entonces podemos partir el período en dos mitades, cuya suma es un número formado únicamente por nueves.</p>
<p>Por ejemplo, 2/7 = 0'285714285714... El período es 285714, cuya longitud es par (6). Lo partimos por la mitad y las sumamos: 285+714 = 999.</p>
</blockquote>
<p>Definir la función</p>
<div class="code"><pre class="code literal-block"><span class="nf">teoremaMidy</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Bool</span>
</pre></div>

<p>tal que (teoremaMidy n) se verifica si para todo todo número primo p menor que n y mayor que 5 y todo número natural menor que p tales que la cantidad de dígitos en el período de a/p es par, entonces podemos partir el período de a/p en dos mitades, cuya suma es un número formado únicamente por nueves. Por ejemplo,</p>
<div class="code"><pre class="code literal-block"><span class="nf">teoremaMidy</span><span class="w"> </span><span class="mi">200</span><span class="w">  </span><span class="o">==</span><span class="w">  </span><span class="kt">True</span>
</pre></div>

<p>Además, comprobar el teorema de Midy usando QuickCheck.</p>
<hr>
<!-- TEASER_END --><h3>Soluciones</h3>
<div class="code"><pre class="code literal-block"><span class="kr">import</span><span class="w"> </span><span class="nn">Data.List</span><span class="w"> </span><span class="p">(</span><span class="nf">genericTake</span><span class="p">)</span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Data.Numbers.Primes</span><span class="w"> </span><span class="p">(</span><span class="nf">primes</span><span class="p">,</span><span class="w"> </span><span class="nf">isPrime</span><span class="p">)</span>
<span class="kr">import</span><span class="w"> </span><span class="nn">Test.QuickCheck</span>

<span class="nf">teoremaMidy</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Bool</span>
<span class="nf">teoremaMidy</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="ow">=</span>
<span class="w">    </span><span class="n">all</span><span class="w"> </span><span class="n">conclusionMidy</span><span class="w"> </span><span class="p">[(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="n">takeWhile</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">drop</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="n">primes</span><span class="p">),</span>
<span class="w">                                </span><span class="n">a</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="n">p</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span>
<span class="w">                                </span><span class="n">tienePeriodoDeLongitudPar</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">)]</span>

<span class="c1">-- (tienePeriodoDeLongitudPar (a,p)) se verifica si el período de a/p</span>
<span class="c1">-- (con p un primo mayor que 5 y que a) es de longitud par. Por ejemplo,</span>
<span class="c1">--    tienePeriodoDeLongitudPar (1,7)   ==  True</span>
<span class="c1">--    tienePeriodoDeLongitudPar (1,37)  ==  False</span>
<span class="nf">tienePeriodoDeLongitudPar</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="p">(</span><span class="kt">Integer</span><span class="p">,</span><span class="kt">Integer</span><span class="p">)</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Bool</span>
<span class="nf">tienePeriodoDeLongitudPar</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span>
<span class="w">    </span><span class="n">even</span><span class="w"> </span><span class="p">(</span><span class="n">longitudPeriodo</span><span class="w"> </span><span class="n">p</span><span class="p">)</span>

<span class="c1">-- (expansionDec (a,p)) es la expansión decimal de a/p. Por ejemplo,</span>
<span class="c1">--    take 10 (expansionDec (1,4))    ==  [0,2,5]</span>
<span class="c1">--    take 10 (expansionDec (1,7))    ==  [0,1,4,2,8,5,7,1,4,2]</span>
<span class="c1">--    take 12 (expansionDec (90,7))   ==  [12,8,5,7,1,4,2,8,5,7,1,4]</span>
<span class="c1">--    take 12 (expansionDec (23,14))  ==  [1,6,4,2,8,5,7,1,4,2,8,5]</span>
<span class="nf">expansionDec</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="p">(</span><span class="kt">Integer</span><span class="p">,</span><span class="kt">Integer</span><span class="p">)</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="p">[</span><span class="kt">Integer</span><span class="p">]</span>
<span class="nf">expansionDec</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w">    </span><span class="ow">=</span><span class="w"> </span><span class="p">[</span><span class="n">q</span><span class="p">]</span>
<span class="w">    </span><span class="o">|</span><span class="w"> </span><span class="n">otherwise</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="kt">:</span><span class="w"> </span><span class="n">expansionDec</span><span class="w"> </span><span class="p">(</span><span class="n">r</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="w">    </span><span class="kr">where</span><span class="w"> </span><span class="p">(</span><span class="n">q</span><span class="p">,</span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">quotRem</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span>

<span class="c1">-- (longitudPeriodo p) es la longitud del período de 1/p (y de</span>
<span class="c1">-- cualquier fracción irreducible de denominador p), donde p es un</span>
<span class="c1">-- número primo mayor que 5. Por ejemplo,</span>
<span class="c1">--    longitudPeriodo 7   ==  6</span>
<span class="c1">--    longitudPeriodo 37  ==  3</span>
<span class="c1">--    longitudPeriodo 83  ==  41</span>
<span class="nf">longitudPeriodo</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Integer</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Integer</span>
<span class="nf">longitudPeriodo</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">head</span><span class="w"> </span><span class="p">[</span><span class="n">k</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">k</span><span class="w"> </span><span class="ow">&lt;-</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="o">..</span><span class="p">],</span><span class="w"> </span><span class="mi">10</span><span class="o">^</span><span class="n">k</span><span class="w"> </span><span class="p">`</span><span class="n">mod</span><span class="p">`</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">]</span>

<span class="c1">-- (periodo (a,p)) es el período de a/b (para a &lt; p y p &gt; 5 es primo).</span>
<span class="c1">-- Por ejemplo,</span>
<span class="c1">--    periodo (1,7)   ==  [1,4,2,8,5,7]</span>
<span class="c1">--    periodo (2,7)   ==  [2,8,5,7,1,4]</span>
<span class="c1">--    periodo (6,7)   ==  [8,5,7,1,4,2]</span>
<span class="c1">--    periodo (1,73)  ==  [0,1,3,6,9,8,6,3]</span>
<span class="nf">periodo</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="p">(</span><span class="kt">Integer</span><span class="p">,</span><span class="kt">Integer</span><span class="p">)</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="p">[</span><span class="kt">Integer</span><span class="p">]</span>
<span class="nf">periodo</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">genericTake</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="n">xs</span>
<span class="w">    </span><span class="kr">where</span><span class="w"> </span><span class="p">(</span><span class="kr">_</span><span class="kt">:</span><span class="n">xs</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">expansionDec</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
<span class="w">          </span><span class="n">t</span><span class="w">      </span><span class="ow">=</span><span class="w"> </span><span class="n">longitudPeriodo</span><span class="w"> </span><span class="n">p</span>

<span class="c1">-- (conclusionMidy (a,p)) se verifica si a/p verifica la conclusión del</span>
<span class="c1">-- teorema de Midy; es decir, podemos partir el período de a/p en dos</span>
<span class="c1">-- mitades, cuya suma es un número formado únicamente por nueves. Por</span>
<span class="c1">-- ejemplo,</span>
<span class="c1">--    conclusionMidy (1,7)   ==  True</span>
<span class="c1">--    conclusionMidy (1,37)  ==  False</span>
<span class="nf">conclusionMidy</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="p">(</span><span class="kt">Integer</span><span class="p">,</span><span class="kt">Integer</span><span class="p">)</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Bool</span>
<span class="nf">conclusionMidy</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span>
<span class="w">    </span><span class="n">all</span><span class="w"> </span><span class="p">(</span><span class="o">==</span><span class="mi">9</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="n">zipWith</span><span class="w"> </span><span class="p">(</span><span class="o">+</span><span class="p">)</span><span class="w"> </span><span class="n">ys</span><span class="w"> </span><span class="n">zs</span><span class="p">)</span>
<span class="w">    </span><span class="kr">where</span><span class="w"> </span><span class="n">xs</span><span class="w">      </span><span class="ow">=</span><span class="w"> </span><span class="n">periodo</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>
<span class="w">          </span><span class="p">(</span><span class="n">ys</span><span class="p">,</span><span class="n">zs</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">splitAt</span><span class="w"> </span><span class="p">(</span><span class="n">length</span><span class="w"> </span><span class="n">xs</span><span class="w"> </span><span class="p">`</span><span class="n">div</span><span class="p">`</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="n">xs</span>

<span class="c1">-- ---------------------------------------------------------------------</span>
<span class="c1">-- § Comprobación con QuickCheck                                      --</span>
<span class="c1">-- ---------------------------------------------------------------------</span>

<span class="c1">-- (condicionMidy (a,p)) se verifica si a/p cumple las condiciones del</span>
<span class="c1">-- teorema de Midy. Por ejemplo,</span>
<span class="c1">--    condicionMidy (1,7)   ==  True</span>
<span class="c1">--    condicionMidy (1,37)  ==  False</span>
<span class="nf">condicionMidy</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="p">(</span><span class="kt">Integer</span><span class="p">,</span><span class="kt">Integer</span><span class="p">)</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Bool</span>
<span class="nf">condicionMidy</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span>
<span class="w">    </span><span class="n">a</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">    </span><span class="n">a</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">    </span><span class="n">isPrime</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<span class="w">    </span><span class="n">tienePeriodoDeLongitudPar</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>

<span class="c1">-- La propiedad es</span>
<span class="nf">prop_teoremaMidy</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="p">(</span><span class="kt">Integer</span><span class="p">,</span><span class="kt">Integer</span><span class="p">)</span><span class="w"> </span><span class="ow">-&gt;</span><span class="w"> </span><span class="kt">Property</span>
<span class="nf">prop_teoremaMidy</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="ow">=</span>
<span class="w">    </span><span class="n">condicionMidy</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">==&gt;</span><span class="w"> </span><span class="n">conclusionMidy</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">p</span><span class="p">)</span>

<span class="c1">-- La comprobación es</span>
<span class="c1">--    λ&gt; quickCheck prop_teoremaMidy</span>
<span class="c1">--    *** Gave up! Passed only 24 tests.</span>

<span class="c1">-- En la comprobación se observa que la mayoría de los ejemplos</span>
<span class="c1">-- generados no cumplen la condición del teorema de Midy y sólo 24 de</span>
<span class="c1">-- ellos la cumplen y también la conclusión.</span>

<span class="c1">-- Para aumentar el número de casos en lo que se cumpla la condición, se</span>
<span class="c1">-- puede aumentar el valor de maxSuccess; por ejemplo,</span>
<span class="c1">--    λ&gt; quickCheckWith (stdArgs {maxSuccess=700}) prop_teoremaMidy</span>
<span class="c1">--    *** Gave up! Passed only 137 tests.</span>

<span class="c1">-- Otra forma de conseguirlo es definir un generador de números de Midy</span>
<span class="c1">-- (es decir, de pares (a,p) que cumplan la condición del teorema de</span>
<span class="c1">-- Midy). Por ejemplo,</span>
<span class="c1">--    λ&gt; sample numeroMidy</span>
<span class="c1">--    (15,19)</span>
<span class="c1">--    (5,7)</span>
<span class="c1">--    (1,23)</span>
<span class="c1">--    (7,11)</span>
<span class="nf">numeroMidy</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Gen</span><span class="w"> </span><span class="p">(</span><span class="kt">Integer</span><span class="p">,</span><span class="kt">Integer</span><span class="p">)</span>
<span class="nf">numeroMidy</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">suchThat</span><span class="w"> </span><span class="n">arbitrary</span><span class="w"> </span><span class="n">condicionMidy</span>

<span class="c1">-- La propiedad es</span>
<span class="nf">prop_teoremaMidy2</span><span class="w"> </span><span class="ow">::</span><span class="w"> </span><span class="kt">Property</span>
<span class="nf">prop_teoremaMidy2</span><span class="w"> </span><span class="ow">=</span><span class="w"> </span><span class="n">forAll</span><span class="w"> </span><span class="n">numeroMidy</span><span class="w"> </span><span class="n">conclusionMidy</span>

<span class="c1">-- La comprobación es</span>
<span class="c1">--    λ&gt; quickCheck prop_teoremaMidy2</span>
<span class="c1">--    +++ OK, passed 100 tests.</span>
</pre></div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../11-representacion_decimal_de_numeros_racionales/" rel="prev" title="Representación decimal de números racionales">Publicación anterior</a>
            </li>
            <li class="next">
                <a href="../13-reconocimiento_de_camino_en_un_grafo/" rel="next" title="Reconocimiento de camino en un grafo">Siguiente publicación</a>
            </li>
        </ul></nav></aside></article></main><footer id="footer"><p>Escrito por <a href="https://jaalonso.github.io/">José A. Alonso</a> usando <a href="https://getnikola.com" rel="nofollow">Nikola</a> <br> Esta obra está bajo una 
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a></p>
            
        </footer>
</div>
        

    
    
</body>
</html>
