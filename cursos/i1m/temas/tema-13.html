<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
<head>
<!-- 30 de abril del 2021 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tema 13: Programas interactivos</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="José A. Alonso" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../../../css/estilo-org.css" />
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<p><a href="/"><i class="fa fa-home"></i></a> |
   <a href="/cursos/i1m/">Inicial</a> |
   <a href="/cursos/i1m/temas.html">Temas  </a>
</p>
</div>
<div id="content">
<h1 class="title">Tema 13: Programas interactivos</h1>
<div id="table-of-contents">
<h2>&Iacute;ndice</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org0949ee0">1. Programas interactivos</a></li>
<li><a href="#orgd45c1ec">2. El tipo de las acciones de entrada/salida</a></li>
<li><a href="#org852d3ae">3. Primitivas derivadas</a></li>
<li><a href="#org55d61c1">4. Ejemplos de programas interactivos</a>
<ul>
<li><a href="#org1be21e6">4.1. Juego de adivinación interactivo</a></li>
<li><a href="#org11dff17">4.2. Calculadora aritmética</a></li>
<li><a href="#org30f0b06">4.3. El juego de la vida</a></li>
</ul>
</li>
<li><a href="#org9074043">5. Representación gráfica de funciones con gnuplot</a>
<ul>
<li><a href="#orgf4fc496">5.1. Instalación de programas</a></li>
<li><a href="#org4982bd6">5.2. Uso de gnuplot</a></li>
<li><a href="#org92cc49a">5.3. Representación de funciones con <code>plotFunc</code></a></li>
<li><a href="#orgc05c977">5.4. Rango lineal</a></li>
<li><a href="#orgeaad882">5.5. Atributos de los gráficos</a></li>
<li><a href="#org73b1e2d">5.6. Dibujo de listas de puntos con <code>plotList</code></a></li>
<li><a href="#org5c6d4ff">5.7. Gráficas conjuntas</a></li>
<li><a href="#org93a6f83">5.8. Gráfico de curvas paramétricas</a></li>
<li><a href="#org65ce790">5.9. Representación de superficies con <code>plotFunc3d</code></a></li>
</ul>
</li>
<li><a href="#orge5cba6a">6. Manejo de ficheros</a>
<ul>
<li><a href="#org36fc3a9">6.1. Lectura de ficheros con readFile</a></li>
<li><a href="#orga72d8df">6.2. Escritura en ficheros con <code>writeFile</code></a></li>
</ul>
</li>
<li><a href="#org6d4ceb1">7. Bibliografía</a></li>
</ul>
</div>
</div>

<div id="outline-container-org0949ee0" class="outline-2">
<h2 id="org0949ee0"><span class="section-number-2">1</span> Programas interactivos</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>Los programas por lote no interactúan con los usuarios durante su ejecución.</li>

<li>Los programas interactivos durante su ejecución pueden leer datos del teclado
y escribir resultados en la pantalla.</li>

<li>Problema:
<ul class="org-ul">
<li>Los programas interactivos tienen efectos laterales.</li>
<li>Los programa Haskell no tiene efectos laterales.</li>
</ul></li>

<li>Ejemplo de programa interactivo
<ul class="org-ul">
<li>Especificación: El programa pide una cadena y dice el número de caracteres
que tiene.</li>
<li><p>
Ejemplo de sesión:
</p>
<pre class="example">
λ&gt; longitudCadena
Escribe una cadena: "Hoy es lunes"
La cadena tiene 14 caracteres
</pre></li>
<li><p>
Programa:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">longitudCadena</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">longitudCadena</span> <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span>
  putStr <span style="color: #8b2252;">"Escribe una cadena: "</span>
  xs <span style="color: #a0522d;">&lt;-</span> getLine
  putStr <span style="color: #8b2252;">"La cadena tiene "</span>
  putStr <span style="color: #707183;">(</span>show <span style="color: #7388d6;">(</span>length xs<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
  putStrLn <span style="color: #8b2252;">" caracteres"</span>
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-orgd45c1ec" class="outline-2">
<h2 id="orgd45c1ec"><span class="section-number-2">2</span> El tipo de las acciones de entrada/salida</h2>
<div class="outline-text-2" id="text-2">
<ul class="org-ul">
<li>En Haskell se pueden escribir programas interactivos usando tipos que
distingan las expresiones puras de las <b>acciones</b> impuras que tienen
efectos laterales.</li>

<li><code>IO a</code> es el tipo de las acciones que devuelven un valor del tipo <code>a</code>.</li>

<li>Ejemplos:
<ul class="org-ul">
<li><code>IO Char</code> es el tipo de las acciones que devuelven un carácter.</li>
<li><code>IO ()</code> es el tipo de las acciones que no devuelven ningún valor.</li>
</ul></li>

<li><p>
La acción <code>getChar</code> lee un carácter del teclado, lo muestra en
la pantalla y lo devuelve como valor. Su tipo es
</p>
<pre class="example">
getChar :: IO Char
</pre></li>

<li><p>
La acción <code>putChar c</code> escribe el carácter <code>c</code> en la pantalla y
no devuelve ningún valor. Su tipo es
</p>
<pre class="example">
putChar :: c -&gt; IO ()
</pre></li>

<li><p>
La acción <code>return c</code> devuelve el valor <code>c</code> sin ninguna
interacción. Su tipo es
</p>
<pre class="example">
return :: a -&gt; IO a
</pre></li>

<li><p>
Ejemplo:
</p>
<pre class="example">
λ&gt; putChar 'b'
bλ&gt; it
()
</pre></li>

<li>Una sucesión de acciones puede combinarse en una acción compuesta mediante
expresiones <code>do</code>.</li>

<li><p>
Ejemplo: El procedimiento <code>ejSecuenciacion</code> lee dos caracteres y devuelve el
par formado por ellos. Por ejemplo,
</p>
<pre class="example">
λ&gt; ejSecuenciacion
b f
('b','f')
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">ejSecuenciacion</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">(</span><span style="color: #228b22;">Char</span>,<span style="color: #228b22;">Char</span><span style="color: #707183;">)</span>
<span style="color: #0000ff;">ejSecuenciacion</span> <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span>
   x <span style="color: #a0522d;">&lt;-</span> getChar
   getChar
   y <span style="color: #a0522d;">&lt;-</span> getChar
   return <span style="color: #707183;">(</span>x,y<span style="color: #707183;">)</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org852d3ae" class="outline-2">
<h2 id="org852d3ae"><span class="section-number-2">3</span> Primitivas derivadas</h2>
<div class="outline-text-2" id="text-3">
<ul class="org-ul">
<li><p>
Lectura de cadenas del teclado:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">getLine</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #228b22;">String</span>
<span style="color: #0000ff;">getLine</span> <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span> x <span style="color: #a0522d;">&lt;-</span> getChar
             <span style="color: #a020f0;">if</span> x <span style="color: #a0522d;">==</span> <span style="color: #8b2252;">'\n'</span> <span style="color: #a020f0;">then</span> return <span style="color: #707183;">[]</span>
                <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">do</span> xs <span style="color: #a0522d;">&lt;-</span> getLine
                        return <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
Escritura de cadenas en la pantalla:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">putStr</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">putStr</span> <span style="color: #707183;">[]</span>     <span style="color: #a0522d;">=</span> return <span style="color: #707183;">()</span>
<span style="color: #0000ff;">putStr</span> <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span> putChar x
                   putStr xs
</pre>
</div></li>

<li><p>
Escritura de cadenas en la pantalla y salto de línea:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">putStrLn</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">putStrLn</span> xs <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span> putStr xs
                 putChar <span style="color: #8b2252;">'\n'</span>
</pre>
</div></li>

<li><p>
Ejecución de una lista de acciones. Por ejemplo,
</p>
<pre class="example">
λ&gt; sequence_ [putStrLn "uno", putStrLn "dos"]
uno
dos
λ&gt; it
()
</pre>

<p>
La definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">sequence_</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span><span style="color: #228b22;">IO</span> a<span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">sequence_</span> <span style="color: #707183;">[]</span>     <span style="color: #a0522d;">=</span> return <span style="color: #707183;">()</span>
<span style="color: #0000ff;">sequence_</span> <span style="color: #707183;">(</span>a<span style="color: #228b22;">:</span>as<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span> a
                      sequence_ as
</pre>
</div></li>

<li>Ejemplo de programa con primitivas derivadas
<ul class="org-ul">
<li>Especificación: El programa pide una cadena y dice el número de caracteres
que tiene.</li>
<li><p>
Ejemplo de sesión:
</p>
<pre class="example">
λ&gt; longitudCadena
Escribe una cadena: "Hoy es lunes"
La cadena tiene 14 caracteres
</pre></li>
<li><p>
Programa:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">longitudCadena</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">longitudCadena</span> <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span>
  putStr <span style="color: #8b2252;">"Escribe una cadena: "</span>
  xs <span style="color: #a0522d;">&lt;-</span> getLine
  putStr <span style="color: #8b2252;">"La cadena tiene "</span>
  putStr <span style="color: #707183;">(</span>show <span style="color: #7388d6;">(</span>length xs<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
  putStrLn <span style="color: #8b2252;">" caracteres"</span>
</pre>
</div></li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org55d61c1" class="outline-2">
<h2 id="org55d61c1"><span class="section-number-2">4</span> Ejemplos de programas interactivos</h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org1be21e6" class="outline-3">
<h3 id="org1be21e6"><span class="section-number-3">4.1</span> Juego de adivinación interactivo</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>Descripción: El programa le pide al jugador humano que piense un número entre
1 y 100 y trata de adivinar el número que ha pensado planteándole conjeturas
a las que el jugador humano responde con mayor, menor o exacto según que el
número pensado sea mayor, menor o igual que el número conjeturado por la
máquina.</li>

<li><p>
Ejemplo de sesión:
</p>
<pre class="example">
Main&gt; juego
Piensa un numero entre el 1 y el 100.
Es 50? [mayor/menor/exacto] mayor
Es 75? [mayor/menor/exacto] menor
Es 62? [mayor/menor/exacto] mayor
Es 68? [mayor/menor/exacto] exacto
Fin del juego
</pre></li>

<li><p>
Programa:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">juego</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">juego</span> <span style="color: #a0522d;">=</span>
    <span style="color: #a020f0;">do</span> putStrLn <span style="color: #8b2252;">"Piensa un numero entre el 1 y el 100."</span>
       adivina 1 100
       putStrLn <span style="color: #8b2252;">"Fin del juego"</span>

<span style="color: #0000ff;">adivina</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Int</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Int</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">adivina</span> a b <span style="color: #a0522d;">=</span>
    <span style="color: #a020f0;">do</span> putStr <span style="color: #707183;">(</span><span style="color: #8b2252;">"Es "</span> <span style="color: #a0522d;">++</span> show conjetura <span style="color: #a0522d;">++</span> <span style="color: #8b2252;">"? [mayor/menor/exacto] "</span><span style="color: #707183;">)</span>
       s <span style="color: #a0522d;">&lt;-</span> getLine
       <span style="color: #a020f0;">case</span> s <span style="color: #a020f0;">of</span>
         <span style="color: #8b2252;">"mayor"</span>  <span style="color: #a0522d;">-&gt;</span> adivina <span style="color: #707183;">(</span>conjetura<span style="color: #a0522d;">+</span>1<span style="color: #707183;">)</span> b
         <span style="color: #8b2252;">"menor"</span>  <span style="color: #a0522d;">-&gt;</span> adivina a <span style="color: #707183;">(</span>conjetura<span style="color: #a0522d;">-</span>1<span style="color: #707183;">)</span>
         <span style="color: #8b2252;">"exacto"</span> <span style="color: #a0522d;">-&gt;</span> return <span style="color: #707183;">()</span>
         <span style="color: #a020f0;">_</span>        <span style="color: #a0522d;">-&gt;</span> adivina a b
    <span style="color: #a020f0;">where</span>
      conjetura <span style="color: #a0522d;">=</span> <span style="color: #707183;">(</span>a<span style="color: #a0522d;">+</span>b<span style="color: #707183;">)</span> <span style="color: #a0522d;">`div`</span> 2
</pre>
</div></li>

<li>Descripción: En el segundo juego la máquina genera un número aleatorio entre
1 y 100 y le pide al jugador humano que adivine el número que ha pensado
planteándole conjeturas a las que la máquina responde con mayor, menor o
exacto según que el número pensado sea mayor, menor o igual que el número
conjeturado por el jugador humano.</li>

<li><p>
Ejemplo de sesión:
</p>
<pre class="example">
Main&gt; juego2
Tienes que adivinar un numero entre 1 y 100
Escribe un numero: 50
 es bajo.
Escribe un numero: 75
 es alto.
Escribe un numero: 62
 Exactamente
</pre></li>

<li><p>
Se usa la librería de generación de números aleatorios:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #a020f0;">import</span> <span style="color: #228b22;">System.Random</span> <span style="color: #707183;">(</span>randomRIO<span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
Programa:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">juego2</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">juego2</span> <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span> n <span style="color: #a0522d;">&lt;-</span> randomRIO <span style="color: #707183;">(</span>1<span style="color: #a0522d;">::</span><span style="color: #228b22;">Int</span>,100<span style="color: #707183;">)</span>
            putStrLn <span style="color: #8b2252;">"Tienes que adivinar un numero entre 1 y 100"</span>
            adivina' n

<span style="color: #0000ff;">adivina'</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Int</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">adivina'</span> n <span style="color: #a0522d;">=</span>
    <span style="color: #a020f0;">do</span> putStr <span style="color: #8b2252;">"Escribe un numero: "</span>
       c <span style="color: #a0522d;">&lt;-</span> getLine
       <span style="color: #a020f0;">let</span> x <span style="color: #a0522d;">=</span> read c
       <span style="color: #a020f0;">case</span> <span style="color: #707183;">(</span>compare x n<span style="color: #707183;">)</span> <span style="color: #a020f0;">of</span>
         <span style="color: #228b22;">LT</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #a020f0;">do</span> putStrLn <span style="color: #8b2252;">" es bajo."</span>
                  adivina' n
         <span style="color: #228b22;">GT</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #a020f0;">do</span> putStrLn <span style="color: #8b2252;">" es alto."</span>
                  adivina' n
         <span style="color: #228b22;">EQ</span> <span style="color: #a0522d;">-&gt;</span> putStrLn <span style="color: #8b2252;">" Exactamente"</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org11dff17" class="outline-3">
<h3 id="org11dff17"><span class="section-number-3">4.2</span> Calculadora aritmética</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li><p>
Importaciones
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #a020f0;">import</span> <span style="color: #228b22;">I1M.Analizador</span>
<span style="color: #a020f0;">import</span> <span style="color: #228b22;">System.IO</span>
</pre>
</div></li>

<li><p>
Escritura de caracteres sin eco:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">getCh</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #228b22;">Char</span>
<span style="color: #0000ff;">getCh</span> <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span> hSetEcho stdin <span style="color: #228b22;">False</span>
           c <span style="color: #a0522d;">&lt;-</span> getChar
           hSetEcho stdin <span style="color: #228b22;">True</span>
           return c
</pre>
</div></li>

<li><p>
Limpieza de la pantalla:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">limpiaPantalla</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">limpiaPantalla</span> <span style="color: #a0522d;">=</span> putStr <span style="color: #8b2252;">"\ESC[2J"</span>
</pre>
</div></li>

<li><p>
Escritura en una posición:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #a020f0;">type</span> <span style="color: #228b22;">Pos</span> <span style="color: #a0522d;">=</span> <span style="color: #707183;">(</span><span style="color: #228b22;">Int</span>,<span style="color: #228b22;">Int</span><span style="color: #707183;">)</span>

<span style="color: #0000ff;">irA</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Pos</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">irA</span> <span style="color: #707183;">(</span>x,y<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span> putStr <span style="color: #707183;">(</span><span style="color: #8b2252;">"\ESC["</span> <span style="color: #a0522d;">++</span>
                    show y <span style="color: #a0522d;">++</span> <span style="color: #8b2252;">";"</span> <span style="color: #a0522d;">++</span> show x <span style="color: #a0522d;">++</span>
                    <span style="color: #8b2252;">"H"</span><span style="color: #707183;">)</span>

<span style="color: #0000ff;">escribeEn</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Pos</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">escribeEn</span> p xs <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span> irA p
                    putStr xs
</pre>
</div></li>

<li>En las funciones <code>limpiaPantalla</code> e <code>irA</code> se han usado <a href="http://bit.ly/1PtuTcm">códigos de escape ANSI</a>.</li>

<li><p>
Calculadora
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">calculadora</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">calculadora</span> <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span> limpiaPantalla
                  escribeCalculadora
                limpiar

<span style="color: #0000ff;">escribeCalculadora</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">escribeCalculadora</span> <span style="color: #a0522d;">=</span>
 <span style="color: #a020f0;">do</span> limpiaPantalla
    sequence_ <span style="color: #707183;">[</span>escribeEn <span style="color: #7388d6;">(</span>1,y<span style="color: #7388d6;">)</span> xs
               <span style="color: #a0522d;">|</span> <span style="color: #7388d6;">(</span>y,xs<span style="color: #7388d6;">)</span> <span style="color: #a0522d;">&lt;-</span> zip <span style="color: #7388d6;">[</span>1<span style="color: #a0522d;">..</span>13<span style="color: #7388d6;">]</span> imagenCalculadora<span style="color: #707183;">]</span>
    putStrLn <span style="color: #8b2252;">""</span>

<span style="color: #0000ff;">imagenCalculadora</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span><span style="color: #228b22;">String</span><span style="color: #707183;">]</span>
<span style="color: #0000ff;">imagenCalculadora</span> <span style="color: #a0522d;">=</span> <span style="color: #707183;">[</span><span style="color: #8b2252;">"+---------------+"</span>,
                     <span style="color: #8b2252;">"|               |"</span>,
                     <span style="color: #8b2252;">"+---+---+---+---+"</span>,
                     <span style="color: #8b2252;">"| q | c | d | = |"</span>,
                     <span style="color: #8b2252;">"+---+---+---+---+"</span>,
                     <span style="color: #8b2252;">"| 1 | 2 | 3 | + |"</span>,
                     <span style="color: #8b2252;">"+---+---+---+---+"</span>,
                     <span style="color: #8b2252;">"| 4 | 5 | 6 | - |"</span>,
                     <span style="color: #8b2252;">"+---+---+---+---+"</span>,
                     <span style="color: #8b2252;">"| 7 | 8 | 9 | * |"</span>,
                     <span style="color: #8b2252;">"+---+---+---+---+"</span>,
                     <span style="color: #8b2252;">"| 0 | ( | ) | / |"</span>,
                     <span style="color: #8b2252;">"+---+---+---+---+"</span><span style="color: #707183;">]</span>
</pre>
</div></li>

<li>Los primeros cuatro botones permiten escribir las órdenes:
<ul class="org-ul">
<li><code>q</code> para salir (<code>quit</code>),</li>
<li><code>c</code> para limpiar la agenda (<code>clear</code>),</li>
<li><code>d</code> para borrar un carácter (<code>delete</code>) y</li>
<li><code>=</code> para evaluar una expresión.</li>
</ul></li>

<li><p>
Los restantes botones permiten escribir las expresiones.
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">limpiar</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">limpiar</span> <span style="color: #a0522d;">=</span> calc <span style="color: #8b2252;">""</span>

<span style="color: #0000ff;">calc</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">calc</span> xs <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span> escribeEnPantalla xs
             c <span style="color: #a0522d;">&lt;-</span> getCh
             <span style="color: #a020f0;">if</span> elem c botones
                <span style="color: #a020f0;">then</span> procesa c xs
                <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">do</span> calc xs

<span style="color: #0000ff;">escribeEnPantalla</span> xs <span style="color: #a0522d;">=</span>
    <span style="color: #a020f0;">do</span> escribeEn <span style="color: #707183;">(</span>3,2<span style="color: #707183;">)</span> <span style="color: #8b2252;">"             "</span>
       escribeEn <span style="color: #707183;">(</span>3,2<span style="color: #707183;">)</span> <span style="color: #707183;">(</span>reverse <span style="color: #7388d6;">(</span>take 13 <span style="color: #909183;">(</span>reverse xs<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

<span style="color: #0000ff;">botones</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">String</span>
<span style="color: #0000ff;">botones</span> <span style="color: #a0522d;">=</span> standard <span style="color: #a0522d;">++</span> extra
    <span style="color: #a020f0;">where</span>
      standard <span style="color: #a0522d;">=</span> <span style="color: #8b2252;">"qcd=123+456-789*0()/"</span>
      extra    <span style="color: #a0522d;">=</span> <span style="color: #8b2252;">"QCD \ESC\BS\DEL\n"</span>

<span style="color: #0000ff;">procesa</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Char</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">procesa</span> c xs
   <span style="color: #a0522d;">|</span> elem c <span style="color: #8b2252;">"qQ\ESC"</span>    <span style="color: #a0522d;">=</span> salir
   <span style="color: #a0522d;">|</span> elem c <span style="color: #8b2252;">"dD\BS\DEL"</span> <span style="color: #a0522d;">=</span> borrar xs
   <span style="color: #a0522d;">|</span> elem c <span style="color: #8b2252;">"=\n"</span>       <span style="color: #a0522d;">=</span> evaluar xs
   <span style="color: #a0522d;">|</span> elem c <span style="color: #8b2252;">"cC"</span>        <span style="color: #a0522d;">=</span> limpiar
   <span style="color: #a0522d;">|</span> otherwise          <span style="color: #a0522d;">=</span> agregar c xs

<span style="color: #0000ff;">salir</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">salir</span> <span style="color: #a0522d;">=</span> irA <span style="color: #707183;">(</span>1,14<span style="color: #707183;">)</span>

<span style="color: #0000ff;">borrar</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">borrar</span> <span style="color: #8b2252;">""</span> <span style="color: #a0522d;">=</span> calc <span style="color: #8b2252;">""</span>
<span style="color: #0000ff;">borrar</span> xs <span style="color: #a0522d;">=</span> calc <span style="color: #707183;">(</span>init xs<span style="color: #707183;">)</span>

<span style="color: #0000ff;">evaluar</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">evaluar</span> xs <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">case</span> analiza expr xs <span style="color: #a020f0;">of</span>
             <span style="color: #707183;">[</span><span style="color: #7388d6;">(</span>n,<span style="color: #8b2252;">""</span><span style="color: #7388d6;">)</span><span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> calc <span style="color: #707183;">(</span>show n<span style="color: #707183;">)</span>
             <span style="color: #a020f0;">_</span>        <span style="color: #a0522d;">-&gt;</span> <span style="color: #a020f0;">do</span> calc xs

<span style="color: #0000ff;">agregar</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Char</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">agregar</span> c xs <span style="color: #a0522d;">=</span> calc <span style="color: #707183;">(</span>xs <span style="color: #a0522d;">++</span> <span style="color: #7388d6;">[</span>c<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org30f0b06" class="outline-3">
<h3 id="org30f0b06"><span class="section-number-3">4.3</span> El juego de la vida</h3>
<div class="outline-text-3" id="text-4-3">
</div>
<div id="outline-container-orgb99948d" class="outline-4">
<h4 id="orgb99948d"><span class="section-number-4">4.3.1</span> Descripción del juego de la vida</h4>
<div class="outline-text-4" id="text-4-3-1">
<ul class="org-ul">
<li>El tablero del juego de la vida es una malla formada por cuadrados
("células") que se pliega en todas las direcciones.</li>

<li>Cada célula tiene 8 células vecinas, que son las que están próximas a ella,
incluso en las diagonales.</li>

<li>Las células tienen dos estados: están "vivas" o "muertas".</li>

<li>El estado del tablero evoluciona a lo largo de unidades de tiempo discretas.</li>

<li>Las transiciones dependen del número de células vecinas vivas:
<ul class="org-ul">
<li>Una célula muerta con exactamente 3 células vecinas vivas "nace" (al turno
siguiente estará viva).</li>
<li>Una célula viva con 2 ó 3 células vecinas vivas sigue viva, en otro caso
muere.</li>
</ul></li>

<li><p>
Funciones anteriores
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #a020f0;">import</span> <span style="color: #228b22;">Data.List</span> <span style="color: #707183;">(</span>nub<span style="color: #707183;">)</span>

<span style="color: #a020f0;">type</span> <span style="color: #228b22;">Pos</span> <span style="color: #a0522d;">=</span> <span style="color: #707183;">(</span><span style="color: #228b22;">Int</span>,<span style="color: #228b22;">Int</span><span style="color: #707183;">)</span>

<span style="color: #0000ff;">irA</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Pos</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">irA</span> <span style="color: #707183;">(</span>x,y<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span> putStr <span style="color: #707183;">(</span><span style="color: #8b2252;">"\ESC["</span> <span style="color: #a0522d;">++</span> show y <span style="color: #a0522d;">++</span> <span style="color: #8b2252;">";"</span> <span style="color: #a0522d;">++</span> show x <span style="color: #a0522d;">++</span> <span style="color: #8b2252;">"H"</span><span style="color: #707183;">)</span>

<span style="color: #0000ff;">escribeEn</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Pos</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">escribeEn</span> p xs <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span> irA p
                    putStr xs

limpiaPantalla<span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
limpiaPantalla<span style="color: #a0522d;">=</span> putStr <span style="color: #8b2252;">"\ESC[2J"</span>
</pre>
</div></li>

<li><p>
El tablero del juego de la vida
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #a020f0;">type</span> <span style="color: #228b22;">Tablero</span> <span style="color: #a0522d;">=</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Pos</span><span style="color: #707183;">]</span>

</pre>
</div></li>

<li><p>
Dimensiones:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">ancho</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Int</span>
<span style="color: #0000ff;">ancho</span> <span style="color: #a0522d;">=</span> 5

<span style="color: #0000ff;">alto</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Int</span>
<span style="color: #0000ff;">alto</span> <span style="color: #a0522d;">=</span> 5
</pre>
</div></li>

<li><p>
Ejemplo de tablero:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">ejTablero</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Tablero</span>
<span style="color: #0000ff;">ejTablero</span> <span style="color: #a0522d;">=</span> <span style="color: #707183;">[</span><span style="color: #7388d6;">(</span>2,3<span style="color: #7388d6;">)</span>,<span style="color: #7388d6;">(</span>3,4<span style="color: #7388d6;">)</span>,<span style="color: #7388d6;">(</span>4,2<span style="color: #7388d6;">)</span>,<span style="color: #7388d6;">(</span>4,3<span style="color: #7388d6;">)</span>,<span style="color: #7388d6;">(</span>4,4<span style="color: #7388d6;">)</span><span style="color: #707183;">]</span>

</pre>
</div></li>

<li><p>
Representación del tablero:
</p>
<pre class="example">
 1234
1
2   O
3 O O
4  OO
</pre></li>

<li><p>
<code>(vida n t)</code> simula el juego de la vida a partir del tablero <code>t</code> con un
tiempo entre generaciones proporcional a <code>n</code>. Por ejemplo,
</p>
<pre class="example">
vida 100000 ejTablero
</pre>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">vida</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Int</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Tablero</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">vida</span> n t <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span> limpiaPantalla
              escribeTablero t
              espera n
              vida n <span style="color: #707183;">(</span>siguienteGeneracion t<span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
Escritura del tablero:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">escribeTablero</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Tablero</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">escribeTablero</span> t <span style="color: #a0522d;">=</span> sequence_ <span style="color: #707183;">[</span>escribeEn p <span style="color: #8b2252;">"O"</span> <span style="color: #a0522d;">|</span> p <span style="color: #a0522d;">&lt;-</span> t<span style="color: #707183;">]</span>
</pre>
</div></li>

<li><p>
Espera entre generaciones:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">espera</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Int</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">espera</span> n <span style="color: #a0522d;">=</span> sequence_ <span style="color: #707183;">[</span>return <span style="color: #7388d6;">()</span> <span style="color: #a0522d;">|</span> <span style="color: #a020f0;">_</span> <span style="color: #a0522d;">&lt;-</span> <span style="color: #7388d6;">[</span>1<span style="color: #a0522d;">..</span>n<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span>
</pre>
</div></li>

<li><p>
<code>siguienteGeneracion t)</code> es el tablero de la siguiente generación al tablero
<code>t</code>. Por ejemplo,
</p>
<pre class="example">
λ&gt; siguienteGeneracion ejTablero
[(4,3),(3,4),(4,4),(3,2),(5,3)]
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">siguienteGeneracion</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Tablero</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Tablero</span>
<span style="color: #0000ff;">siguienteGeneracion</span> t <span style="color: #a0522d;">=</span> supervivientes t <span style="color: #a0522d;">++</span> nacimientos t
</pre>
</div></li>

<li><p>
<code>(supervivientes t)</code> es la listas de posiciones de <code>t</code> que sobreviven;
i.e. posiciones con 2 ó 3 vecinos vivos. Por ejemplo,
</p>
<pre class="example">
supervivientes ejTablero  ==  [(4,3),(3,4),(4,4)]
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">supervivientes</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Tablero</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Pos</span><span style="color: #707183;">]</span>
<span style="color: #0000ff;">supervivientes</span> t <span style="color: #a0522d;">=</span> <span style="color: #707183;">[</span>p <span style="color: #a0522d;">|</span> p <span style="color: #a0522d;">&lt;-</span> t,
                        elem <span style="color: #7388d6;">(</span>nVecinosVivos t p<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">[</span>2,3<span style="color: #7388d6;">]</span><span style="color: #707183;">]</span>
</pre>
</div></li>

<li><p>
<code>(nVecinosVivos t c)</code> es el número de vecinos vivos de la célula
<code>c</code> en el tablero <code>t</code>. Por ejemplo,
</p>
<pre class="example">
nVecinosVivos ejTablero (3,3)  ==  5
nVecinosVivos ejTablero (3,4)  ==  3
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">nVecinosVivos</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Tablero</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Pos</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Int</span>
<span style="color: #0000ff;">nVecinosVivos</span> t <span style="color: #a0522d;">=</span> length <span style="color: #a0522d;">.</span> filter <span style="color: #707183;">(</span>tieneVida t<span style="color: #707183;">)</span> <span style="color: #a0522d;">.</span> vecinos
</pre>
</div></li>

<li><p>
<code>(vecinos p)</code> es la lista de los vecinos de la célula en la
posición <code>p</code>. Por ejemplo,
</p>
<pre class="example">
vecinos (2,3) == [(1,2),(2,2),(3,2),(1,3),(3,3),(1,4),(2,4),(3,4)]
vecinos (1,2) == [(5,1),(1,1),(2,1),(5,2),(2,2),(5,3),(1,3),(2,3)]
vecinos (5,2) == [(4,1),(5,1),(1,1),(4,2),(1,2),(4,3),(5,3),(1,3)]
vecinos (2,1) == [(1,5),(2,5),(3,5),(1,1),(3,1),(1,2),(2,2),(3,2)]
vecinos (2,5) == [(1,4),(2,4),(3,4),(1,5),(3,5),(1,1),(2,1),(3,1)]
vecinos (1,1) == [(5,5),(1,5),(2,5),(5,1),(2,1),(5,2),(1,2),(2,2)]
vecinos (5,5) == [(4,4),(5,4),(1,4),(4,5),(1,5),(4,1),(5,1),(1,1)]
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">vecinos</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Pos</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Pos</span><span style="color: #707183;">]</span>
<span style="color: #0000ff;">vecinos</span> <span style="color: #707183;">(</span>x,y<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span> map modular <span style="color: #707183;">[</span><span style="color: #7388d6;">(</span>x<span style="color: #a0522d;">-</span>1,y<span style="color: #a0522d;">-</span>1<span style="color: #7388d6;">)</span>, <span style="color: #7388d6;">(</span>x,y<span style="color: #a0522d;">-</span>1<span style="color: #7388d6;">)</span>, <span style="color: #7388d6;">(</span>x<span style="color: #a0522d;">+</span>1,y<span style="color: #a0522d;">-</span>1<span style="color: #7388d6;">)</span>,
                             <span style="color: #7388d6;">(</span>x<span style="color: #a0522d;">-</span>1,y<span style="color: #7388d6;">)</span>,            <span style="color: #7388d6;">(</span>x<span style="color: #a0522d;">+</span>1,y<span style="color: #7388d6;">)</span>,
                             <span style="color: #7388d6;">(</span>x<span style="color: #a0522d;">-</span>1,y<span style="color: #a0522d;">+</span>1<span style="color: #7388d6;">)</span>, <span style="color: #7388d6;">(</span>x,y<span style="color: #a0522d;">+</span>1<span style="color: #7388d6;">)</span>, <span style="color: #7388d6;">(</span>x<span style="color: #a0522d;">+</span>1,y<span style="color: #a0522d;">+</span>1<span style="color: #7388d6;">)</span><span style="color: #707183;">]</span>
</pre>
</div></li>

<li><p>
<code>(modular p)</code> es la posición correspondiente a <code>p</code> en el tablero considerando
los plegados. Por ejemplo,
</p>
<pre class="example">
modular (6,3)  ==  (1,3)
modular (0,3)  ==  (5,3)
modular (3,6)  ==  (3,1)
modular (3,0)  ==  (3,5)
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">modular</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Pos</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Pos</span>
<span style="color: #0000ff;">modular</span> <span style="color: #707183;">(</span>x,y<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span> <span style="color: #707183;">(</span>1 <span style="color: #a0522d;">+</span> <span style="color: #7388d6;">(</span>x<span style="color: #a0522d;">-</span>1<span style="color: #7388d6;">)</span> <span style="color: #a0522d;">`mod`</span> ancho,
                 1 <span style="color: #a0522d;">+</span> <span style="color: #7388d6;">(</span>y<span style="color: #a0522d;">-</span>1<span style="color: #7388d6;">)</span> <span style="color: #a0522d;">`mod`</span> alto<span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
<code>(tieneVida t p)</code> se verifica si la posición <code>p</code> del tablero <code>t</code> tiene
vida. Por ejemplo,
</p>
<pre class="example">
tieneVida ejTablero (1,1)  ==  False
tieneVida ejTablero (2,3)  ==  True
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">tieneVida</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Tablero</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Pos</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Bool</span>
<span style="color: #0000ff;">tieneVida</span> t p <span style="color: #a0522d;">=</span> elem p t
</pre>
</div></li>

<li><p>
<code>(noTieneVida t p)</code> se verifica si la posición <code>p</code> del tablero <code>t</code> no tiene
vida. Por ejemplo,
</p>
<pre class="example">
noTieneVida ejTablero (1,1)  ==  True
noTieneVida ejTablero (2,3)  ==  False
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">noTieneVida</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Tablero</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Pos</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Bool</span>
<span style="color: #0000ff;">noTieneVida</span> t p <span style="color: #a0522d;">=</span> not <span style="color: #707183;">(</span>tieneVida t p<span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
<code>(nacimientos t)</code> es la lista de los nacimientos de tablero <code>t</code>; i.e. las
posiciones sin vida con 3 vecinos vivos. Por ejemplo,
</p>
<pre class="example">
nacimientos ejTablero  ==  [(3,2),(5,3)]
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">nacimientos'</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Tablero</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Pos</span><span style="color: #707183;">]</span>
<span style="color: #0000ff;">nacimientos'</span> t <span style="color: #a0522d;">=</span> <span style="color: #707183;">[</span><span style="color: #7388d6;">(</span>x,y<span style="color: #7388d6;">)</span> <span style="color: #a0522d;">|</span> x <span style="color: #a0522d;">&lt;-</span> <span style="color: #7388d6;">[</span>1<span style="color: #a0522d;">..</span>ancho<span style="color: #7388d6;">]</span>,
                          y <span style="color: #a0522d;">&lt;-</span> <span style="color: #7388d6;">[</span>1<span style="color: #a0522d;">..</span>alto<span style="color: #7388d6;">]</span>,
                          noTieneVida t <span style="color: #7388d6;">(</span>x,y<span style="color: #7388d6;">)</span>,
                          nVecinosVivos t <span style="color: #7388d6;">(</span>x,y<span style="color: #7388d6;">)</span> <span style="color: #a0522d;">==</span> 3<span style="color: #707183;">]</span>
</pre>
</div></li>

<li><p>
Definición más eficiente de <code>nacimientos</code>
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">nacimientos</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Tablero</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Pos</span><span style="color: #707183;">]</span>
<span style="color: #0000ff;">nacimientos</span> t <span style="color: #a0522d;">=</span> <span style="color: #707183;">[</span>p <span style="color: #a0522d;">|</span> p <span style="color: #a0522d;">&lt;-</span> nub <span style="color: #7388d6;">(</span>concatMap vecinos t<span style="color: #7388d6;">)</span>,
                     noTieneVida t p,
                     nVecinosVivos t p <span style="color: #a0522d;">==</span> 3<span style="color: #707183;">]</span>
</pre>
</div></li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org9074043" class="outline-2">
<h2 id="org9074043"><span class="section-number-2">5</span> Representación gráfica de funciones con gnuplot</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-orgf4fc496" class="outline-3">
<h3 id="orgf4fc496"><span class="section-number-3">5.1</span> Instalación de programas</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li>Se necesita el <a href="http://www.gnuplot.info">programa gnuplot</a> cuya página de descarga se encuentra <a href="http://sourceforge.net/projects/gnuplot/files/gnuplot/5.0.1/">aquí</a>.</li>
<li><p>
Se necesita la <a href="https://hackage.haskell.org/package/gnuplot">librería gnuplot</a> de Haskell que se instala con
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">cabal</span> install gnuplot
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org4982bd6" class="outline-3">
<h3 id="org4982bd6"><span class="section-number-3">5.2</span> Uso de gnuplot</h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li><p>
Para usar la librería gnuplot hay que escribir al principio del fichero
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #a020f0;">import</span> <span style="color: #228b22;">Graphics.Gnuplot.Simple</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org92cc49a" class="outline-3">
<h3 id="org92cc49a"><span class="section-number-3">5.3</span> Representación de funciones con <code>plotFunc</code></h3>
<div class="outline-text-3" id="text-5-3">
<ul class="org-ul">
<li><p>
Representación de la función coseno
<img src="./fig/tema-13-dib0.png" alt="tema-13-dib0.png" /> <br />
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">dib0</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">dib0</span> <span style="color: #a0522d;">=</span> plotFunc <span style="color: #707183;">[]</span> <span style="color: #707183;">[</span>0,0.01<span style="color: #a0522d;">..</span>10 <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Double</span><span style="color: #707183;">]</span> cos
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgc05c977" class="outline-3">
<h3 id="orgc05c977"><span class="section-number-3">5.4</span> Rango lineal</h3>
<div class="outline-text-3" id="text-5-4">
<ul class="org-ul">
<li>(xRango n (a,b)) es la lista de los puntos obtenidos al dividir el</li>
</ul>
<p>
segmento (a,b) en n partes iguales. Por ejemplo,
</p>
<pre class="example">
xRango 5 (0,10)  ==  [0.0,2.0,4.0,6.0,8.0,10.0]
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">rango</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Integer</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">(</span><span style="color: #228b22;">Double</span>,<span style="color: #228b22;">Double</span><span style="color: #707183;">)</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Double</span><span style="color: #707183;">]</span>
<span style="color: #0000ff;">rango</span> n i <span style="color: #a0522d;">=</span> linearScale n i
</pre>
</div>
</div>
</div>

<div id="outline-container-orgeaad882" class="outline-3">
<h3 id="orgeaad882"><span class="section-number-3">5.5</span> Atributos de los gráficos</h3>
<div class="outline-text-3" id="text-5-5">
<ul class="org-ul">
<li><p>
Dibuja la gráfica de la función seno en el fichero ej.eps
<img src="./fig/tema-13-dib1a.png" alt="tema-13-dib1a.png" />
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">dib1a</span> <span style="color: #a0522d;">=</span>
    plotFunc <span style="color: #707183;">[</span><span style="color: #228b22;">EPS</span> <span style="color: #8b2252;">"ej.eps"</span><span style="color: #707183;">]</span> <span style="color: #707183;">(</span>xRango 500 <span style="color: #7388d6;">(</span><span style="color: #a0522d;">-</span>10,10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span> sin
</pre>
</div></li>

<li><p>
Dibuja la gráfica de la función seno con retícula vertical
<img src="./fig/tema-13-dib1b.png" alt="tema-13-dib1b.png" /> <br />
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">dib1b</span> <span style="color: #a0522d;">=</span>
    plotFunc <span style="color: #707183;">[</span><span style="color: #228b22;">Grid</span> <span style="color: #7388d6;">(</span><span style="color: #228b22;">Just</span> <span style="color: #909183;">[</span><span style="color: #8b2252;">"x"</span><span style="color: #909183;">]</span><span style="color: #7388d6;">)</span><span style="color: #707183;">]</span> <span style="color: #707183;">(</span>xRango 500 <span style="color: #7388d6;">(</span><span style="color: #a0522d;">-</span>10,10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span> sin
</pre>
</div></li>

<li><p>
Dibuja la gráfica de la función seno con retícula horizontal
<img src="./fig/tema-13-dib1c.png" alt="tema-13-dib1c.png" /> <br />
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">dib1c</span> <span style="color: #a0522d;">=</span>
    plotFunc <span style="color: #707183;">[</span><span style="color: #228b22;">Grid</span> <span style="color: #7388d6;">(</span><span style="color: #228b22;">Just</span> <span style="color: #909183;">[</span><span style="color: #8b2252;">"y"</span><span style="color: #909183;">]</span><span style="color: #7388d6;">)</span><span style="color: #707183;">]</span> <span style="color: #707183;">(</span>xRango 500 <span style="color: #7388d6;">(</span><span style="color: #a0522d;">-</span>10,10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span> sin
</pre>
</div></li>

<li><p>
Dibuja la gráfica de la función seno con retícula horizontal y vertical
<img src="./fig/tema-13-dib1d.png" alt="tema-13-dib1d.png" /> <br />
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">dib1d</span> <span style="color: #a0522d;">=</span>
    plotFunc <span style="color: #707183;">[</span><span style="color: #228b22;">Grid</span> <span style="color: #7388d6;">(</span><span style="color: #228b22;">Just</span> <span style="color: #909183;">[]</span><span style="color: #7388d6;">)</span><span style="color: #707183;">]</span> <span style="color: #707183;">(</span>xRango 500 <span style="color: #7388d6;">(</span><span style="color: #a0522d;">-</span>10,10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span> sin
</pre>
</div></li>

<li><p>
Dibuja la gráfica de la función seno con título y sin etiqueta
<img src="./fig/tema-13-dib1e.png" alt="tema-13-dib1e.png" /> <br />
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">dib1e</span> <span style="color: #a0522d;">=</span>
    plotFunc <span style="color: #707183;">[</span><span style="color: #228b22;">Title</span> <span style="color: #8b2252;">"La funcion seno"</span>, <span style="color: #228b22;">Key</span> <span style="color: #228b22;">Nothing</span><span style="color: #707183;">]</span>
             <span style="color: #707183;">(</span>xRango 1000 <span style="color: #7388d6;">(</span><span style="color: #a0522d;">-</span>10,10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span> sin
</pre>
</div></li>

<li><p>
Dibuja la gráfica de la función seno con una etiqueta en el eje X
<img src="./fig/tema-13-dib1f.png" alt="tema-13-dib1f.png" /> <br />
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">dib1f</span> <span style="color: #a0522d;">=</span>
    plotFunc <span style="color: #707183;">[</span><span style="color: #228b22;">XLabel</span> <span style="color: #8b2252;">"Eje horizontal"</span><span style="color: #707183;">]</span> <span style="color: #707183;">(</span>xRango 1000 <span style="color: #7388d6;">(</span><span style="color: #a0522d;">-</span>10,10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span> sin
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org73b1e2d" class="outline-3">
<h3 id="org73b1e2d"><span class="section-number-3">5.6</span> Dibujo de listas de puntos con <code>plotList</code></h3>
<div class="outline-text-3" id="text-5-6">
<ul class="org-ul">
<li><p>
Dibuja los 30 primeros términos de la sucesión de Fibonacci:
<img src="./fig/tema-13-dib2.png" alt="tema-13-dib2.png" /> <br />
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">dib2</span> <span style="color: #a0522d;">=</span>
    plotList <span style="color: #707183;">[]</span> <span style="color: #707183;">(</span>take 30 fibs<span style="color: #707183;">)</span>
    <span style="color: #a020f0;">where</span> fibs <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Double</span><span style="color: #707183;">]</span>
          fibs <span style="color: #a0522d;">=</span> 0 <span style="color: #228b22;">:</span> 1 <span style="color: #228b22;">:</span> zipWith <span style="color: #707183;">(</span><span style="color: #a0522d;">+</span><span style="color: #707183;">)</span> fibs <span style="color: #707183;">(</span>tail fibs<span style="color: #707183;">)</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org5c6d4ff" class="outline-3">
<h3 id="org5c6d4ff"><span class="section-number-3">5.7</span> Gráficas conjuntas</h3>
<div class="outline-text-3" id="text-5-7">
<ul class="org-ul">
<li><p>
Dibuja la gráfica de las funciones seno y coseno:
<img src="./fig/tema-13-dib3.png" alt="tema-13-dib3.png" /> <br />
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">dib3</span> <span style="color: #a0522d;">=</span>
    plotFuncs <span style="color: #707183;">[]</span> <span style="color: #707183;">(</span>xRango 1000 <span style="color: #7388d6;">(</span><span style="color: #a0522d;">-</span>10,10<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span> <span style="color: #707183;">[</span>sin, cos<span style="color: #707183;">]</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org93a6f83" class="outline-3">
<h3 id="org93a6f83"><span class="section-number-3">5.8</span> Gráfico de curvas paramétricas</h3>
<div class="outline-text-3" id="text-5-8">
<ul class="org-ul">
<li><p>
Dibuja una función definida en forma paramétrica:
<img src="file:///fig/tema-13-dib4.png" alt="tema-13-dib4.png" /> <br />
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">dib4</span> <span style="color: #a0522d;">=</span>
    plotParamFunc <span style="color: #707183;">[</span><span style="color: #228b22;">Key</span> <span style="color: #228b22;">Nothing</span><span style="color: #707183;">]</span>
                  <span style="color: #707183;">(</span>xRango 1000 <span style="color: #7388d6;">(</span>0,2<span style="color: #a0522d;">*</span>pi<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
                  <span style="color: #707183;">(</span><span style="color: #a0522d;">\</span>t <span style="color: #a0522d;">-&gt;</span> <span style="color: #7388d6;">(</span>12<span style="color: #a0522d;">*</span>sin<span style="color: #909183;">(</span>t<span style="color: #909183;">)</span><span style="color: #a0522d;">-</span>4<span style="color: #a0522d;">*</span>sin<span style="color: #909183;">(</span>3<span style="color: #a0522d;">*</span>t<span style="color: #909183;">)</span>,
                          13<span style="color: #a0522d;">*</span>cos<span style="color: #909183;">(</span>t<span style="color: #909183;">)</span><span style="color: #a0522d;">-</span>5<span style="color: #a0522d;">*</span>cos<span style="color: #909183;">(</span>2<span style="color: #a0522d;">*</span>t<span style="color: #909183;">)</span><span style="color: #a0522d;">-</span>2<span style="color: #a0522d;">*</span>cos<span style="color: #909183;">(</span>3<span style="color: #a0522d;">*</span>t<span style="color: #909183;">)</span><span style="color: #a0522d;">-</span>cos<span style="color: #909183;">(</span>4<span style="color: #a0522d;">*</span>t<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>

</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org65ce790" class="outline-3">
<h3 id="org65ce790"><span class="section-number-3">5.9</span> Representación de superficies con <code>plotFunc3d</code></h3>
<div class="outline-text-3" id="text-5-9">
<ul class="org-ul">
<li><p>
Ejemplo:
<img src="./fig/tema-13-dib5.png" alt="tema-13-dib5.png" /> <br />
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">dib5</span> <span style="color: #a0522d;">=</span>
    plotFunc3d <span style="color: #707183;">[]</span> <span style="color: #707183;">[]</span> xs xs <span style="color: #707183;">(</span><span style="color: #a0522d;">\</span>x y <span style="color: #a0522d;">-&gt;</span> exp<span style="color: #7388d6;">(</span><span style="color: #a0522d;">-</span><span style="color: #909183;">(</span>x<span style="color: #a0522d;">*</span>x<span style="color: #a0522d;">+</span>y<span style="color: #a0522d;">*</span>y<span style="color: #909183;">)</span><span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
    <span style="color: #a020f0;">where</span> xs <span style="color: #a0522d;">=</span> <span style="color: #707183;">[</span><span style="color: #a0522d;">-</span>2,<span style="color: #a0522d;">-</span>1.8<span style="color: #a0522d;">..</span>2<span style="color: #a0522d;">::</span><span style="color: #228b22;">Double</span><span style="color: #707183;">]</span>

</pre>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orge5cba6a" class="outline-2">
<h2 id="orge5cba6a"><span class="section-number-2">6</span> Manejo de ficheros</h2>
<div class="outline-text-2" id="text-6">
</div>
<div id="outline-container-org36fc3a9" class="outline-3">
<h3 id="org36fc3a9"><span class="section-number-3">6.1</span> Lectura de ficheros con readFile</h3>
<div class="outline-text-3" id="text-6-1">
<ul class="org-ul">
<li><p>
Supongamos que el fichero <code>Ejemplo_1.txt</code> tiene el siguiente contenido
</p>
<pre class="example">
Este fichero tiene tres lineas
esta es la segunda y
esta es la tercera.
</pre></li>

<li><p>
El procedimiento de lectura de ficheros:
</p>
<pre class="example">
λ&gt; :type readFile
readFile :: FilePath -&gt; IO String

λ&gt; readFile "Ejemplo_1.txt"
"Este fichero tiene tres lineas\nesta es la segunda y\nesta es la tercera.\n"

λ&gt; putStrLn it
Este fichero tiene tres lineas
esta es la segunda y
esta es la tercera.

λ&gt; cs &lt;- readFile "Ejemplo_1.txt"
λ&gt; putStrLn cs
Este fichero tiene tres lineas
esta es la segunda y
esta es la tercera.
</pre></li>

<li><p>
El procedimiento <code>(muestraContenidoFichero f)</code> muestra en pantalla el
contenido del fichero <code>f</code>. Por ejemplo,
</p>
<pre class="example">
λ&gt; muestraContenidoFichero "Ejemplo_1.txt"
Este fichero tiene tres lineas
esta es la segunda y
esta es la tercera.
</pre>

<p>
El programa es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">muestraContenidoFichero</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FilePath</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">muestraContenidoFichero</span> f <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span>
  cs <span style="color: #a0522d;">&lt;-</span> readFile f
  putStrLn cs
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orga72d8df" class="outline-3">
<h3 id="orga72d8df"><span class="section-number-3">6.2</span> Escritura en ficheros con <code>writeFile</code></h3>
<div class="outline-text-3" id="text-6-2">
<ul class="org-ul">
<li><p>
El procedimiento de escritura de ficheros:
</p>
<pre class="example">
λ&gt; :type writeFile
writeFile :: FilePath -&gt; String -&gt; IO ()
λ&gt; let texto = "Hay\ntres lineas\nde texto"
λ&gt; writeFile "Ejemplo_2.txt" texto
λ&gt; muestraContenidoFichero "Ejemplo_2.txt"
Hay
tres lineas
de texto
</pre></li>

<li><p>
El procedimiento <code>(aMayucula f1 f2)</code> lee el contenido del fichero f1 y
escribe su contenido en mayúscula en el fichero f2. Por ejemplo,
</p>
<pre class="example">
λ&gt; muestraContenidoFichero "Ejemplo_1.txt"
Este fichero tiene tres lineas
esta es la segunda y
esta es la tercera.

λ&gt; aMayuscula "Ejemplo_1.txt" "Ejemplo_3.txt"
λ&gt; muestraContenidoFichero "Ejemplo_3.txt"
ESTE FICHERO TIENE TRES LINEAS
ESTA ES LA SEGUNDA Y
ESTA ES LA TERCERA.
</pre>

<p>
El programa es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #a020f0;">import</span> <span style="color: #228b22;">Data.Char</span> <span style="color: #707183;">(</span>toUpper<span style="color: #707183;">)</span>

<span style="color: #0000ff;">aMayuscula</span> f1 f2 <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span>
  contenido <span style="color: #a0522d;">&lt;-</span> readFile f1
  writeFile f2 <span style="color: #707183;">(</span>map toUpper contenido<span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
El procedimiento <code>(ordenaFichero f1 f2)</code> lee el contenido del fichero
f1 y escribe su contenido ordenado en el fichero f2. Por ejemplo,
</p>
<pre class="example">
λ&gt; muestraContenidoFichero "Ejemplo_4a.txt"
Juan Ramos
Ana Ruiz
Luis Garcia
Blanca Perez

λ&gt; ordenaFichero "Ejemplo_4a.txt" "Ejemplo_4b.txt"
λ&gt; muestraContenidoFichero "Ejemplo_4b.txt"
Ana Ruiz
Blanca Perez
Juan Ramos
Luis Garcia
</pre>

<p>
El programa es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #a020f0;">import</span> <span style="color: #228b22;">Data.List</span> <span style="color: #707183;">(</span>sort<span style="color: #707183;">)</span>

<span style="color: #0000ff;">ordenaFichero</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FilePath</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">FilePath</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">ordenaFichero</span> f1 f2 <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span>
  cs <span style="color: #a0522d;">&lt;-</span> readFile f1
  writeFile f2 <span style="color: #707183;">(</span><span style="color: #7388d6;">(</span>unlines <span style="color: #a0522d;">.</span> sort <span style="color: #a0522d;">.</span> lines<span style="color: #7388d6;">)</span> cs<span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
Las funciones <code>lines</code> y <code>unlines</code>
</p>
<pre class="example">
λ&gt; :type lines
lines :: String -&gt; [String]
λ&gt; :type unlines
unlines :: [String] -&gt; String

λ&gt; unlines ["ayer fue martes", "hoy es miercoles","de enero"]
"ayer fue martes\nhoy es miercoles\nde enero\n"
λ&gt; lines it
["ayer fue martes","hoy es miercoles","de enero"]
</pre></li>

<li><p>
Las funciones <code>words</code> y <code>unwords</code>
</p>
<pre class="example">
λ&gt; :type words
words :: String -&gt; [String]
λ&gt; :type unwords
unwords :: [String] -&gt; String

λ&gt; words "ayer fue   martes"
["ayer","fue","martes"]
λ&gt; unwords it
"ayer fue martes"
</pre></li>

<li><p>
El procedimiento <code>(tablaCuadrados f n)</code> escribe en el fichero <code>f</code> los
cuadrados de los <code>n</code> primeros números. Por ejemplo.
</p>
<pre class="example">
λ&gt; tablaCuadrados "cuadrados.txt" 9
λ&gt; muestraContenidoFichero "cuadrados.txt"
(1,1) (2,4) (3,9) (4,16) (5,25) (6,36) (7,49) (8,64) (9,81)
</pre>

<p>
El programa es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">tablaCuadrados</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FilePath</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Int</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">tablaCuadrados</span> f n <span style="color: #a0522d;">=</span>
  writeFile f <span style="color: #707183;">(</span>listaDeCuadrados n<span style="color: #707183;">)</span>

<span style="color: #0000ff;">listaDeCuadrados</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Int</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">String</span>
<span style="color: #0000ff;">listaDeCuadrados</span> n <span style="color: #a0522d;">=</span>
  unwords <span style="color: #707183;">(</span>map show <span style="color: #7388d6;">[</span><span style="color: #909183;">(</span>x,x<span style="color: #a0522d;">*</span>x<span style="color: #909183;">)</span> <span style="color: #a0522d;">|</span> x <span style="color: #a0522d;">&lt;-</span> <span style="color: #909183;">[</span>1<span style="color: #a0522d;">..</span>n<span style="color: #909183;">]</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
El procedimiento (tablaCuadrados2 f n) escribe en el fichero f los
cuadrados de los n  primeros números, uno por línea. Por ejemplo.
</p>
<pre class="example">
λ&gt; tablaCuadrados2 "cuadrados.txt" 5
λ&gt; muestraContenidoFichero "cuadrados.txt"
(1,1)
(2,4)
(3,9)
(4,16)
(5,25)
</pre>

<p>
El programa es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">tablaCuadrados2</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FilePath</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Int</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">tablaCuadrados2</span> f n <span style="color: #a0522d;">=</span>
  writeFile f <span style="color: #707183;">(</span>listaDeCuadrados2 n<span style="color: #707183;">)</span>

<span style="color: #0000ff;">listaDeCuadrados2</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Int</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">String</span>
<span style="color: #0000ff;">listaDeCuadrados2</span> n <span style="color: #a0522d;">=</span>
  unlines <span style="color: #707183;">(</span>map show <span style="color: #7388d6;">[</span><span style="color: #909183;">(</span>x,x<span style="color: #a0522d;">*</span>x<span style="color: #909183;">)</span> <span style="color: #a0522d;">|</span> x <span style="color: #a0522d;">&lt;-</span> <span style="color: #909183;">[</span>1<span style="color: #a0522d;">..</span>n<span style="color: #909183;">]</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
El procedimiento (tablaLogaritmos f ns) escribe en el fichero f los
cuadrados de los números de ns, uno por línea. Por ejemplo.
</p>
<pre class="example">
λ&gt; tablaLogaritmos "z.txt" [1,3..20]
λ&gt; muestraContenidoFichero "z.txt"
+----+----------------+
| n  | log(n)         |
+----+----------------+
|  1 | 0.000000000000 |
|  3 | 1.098612288668 |
|  5 | 1.609437912434 |
|  7 | 1.945910149055 |
|  9 | 2.197224577336 |
| 11 | 2.397895272798 |
| 13 | 2.564949357462 |
| 15 | 2.708050201102 |
| 17 | 2.833213344056 |
| 19 | 2.944438979166 |
+----+----------------+
</pre>

<p>
El programa es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #a020f0;">import</span> <span style="color: #228b22;">Text.Printf</span>

<span style="color: #0000ff;">tablaLogaritmos</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">FilePath</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Int</span><span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">IO</span> <span style="color: #707183;">()</span>
<span style="color: #0000ff;">tablaLogaritmos</span> f ns <span style="color: #a0522d;">=</span> <span style="color: #a020f0;">do</span>
  writeFile f <span style="color: #707183;">(</span>tablaLogaritmosAux ns<span style="color: #707183;">)</span>

<span style="color: #0000ff;">tablaLogaritmosAux</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Int</span><span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">String</span>
<span style="color: #0000ff;">tablaLogaritmosAux</span> ns <span style="color: #a0522d;">=</span>
     linea
  <span style="color: #a0522d;">++</span> cabecera
  <span style="color: #a0522d;">++</span> linea
  <span style="color: #a0522d;">++</span> concat <span style="color: #707183;">[</span>printf <span style="color: #8b2252;">"| %2d | %.12f |\n"</span> n x
            <span style="color: #a0522d;">|</span> n <span style="color: #a0522d;">&lt;-</span> ns
            , <span style="color: #a020f0;">let</span> x <span style="color: #a0522d;">=</span> log <span style="color: #7388d6;">(</span>fromIntegral n<span style="color: #7388d6;">)</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Double</span><span style="color: #707183;">]</span>
  <span style="color: #a0522d;">++</span> linea

<span style="color: #0000ff;">linea, cabecera</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">String</span>
<span style="color: #0000ff;">linea</span>    <span style="color: #a0522d;">=</span> <span style="color: #8b2252;">"+----+----------------+\n"</span>
<span style="color: #0000ff;">cabecera</span> <span style="color: #a0522d;">=</span> <span style="color: #8b2252;">"| n  | log(n)         |\n"</span>
</pre>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org6d4ceb1" class="outline-2">
<h2 id="org6d4ceb1"><span class="section-number-2">7</span> Bibliografía</h2>
<div class="outline-text-2" id="text-7">
<ul class="org-ul">
<li>J.A. Alonso. <a href="https://github.com/jaalonso/GraficasEnIHaskell">Gráficas con GNUplot en IHaskell</a>.</li>

<li>H. Daumé III. <a href="http://www.cs.utah.edu/~hal/docs/daume02yaht.pdf">Yet another Haskell tutorial</a>, 2006.
<ul class="org-ul">
<li>Cap. 5: Basic Input/Output.</li>
</ul></li>

<li>G. Hutton. <b>Programming in Haskell</b>. Cambridge University Press, 2007.
<ul class="org-ul">
<li>Cap. 9: Interactive programs.</li>
</ul></li>

<li>M. Lipovača <b>¡Aprende Haskell por el bien de todos!</b>
<ul class="org-ul">
<li>Cap. 9.2: <a href="http://bit.ly/1O3XDBW">Ficheros y flujos de datos</a>.</li>
</ul></li>

<li>B. O’Sullivan, J. Goerzen y D. Stewart. <b>Real World Haskell</b>.  O'Reilly, 2009.
<ul class="org-ul">
<li>Cap. 7: <a href="http://bit.ly/1O3XIWi">I/O</a>.</li>
</ul></li>

<li>B.C. Ruiz, F. Gutiérrez, P. Guerrero y J.E. Gallardo. <b>Razonando con Haskell</b>. Thompson, 2004.
<ul class="org-ul">
<li>Cap. 7: Entrada y salida.</li>
</ul></li>

<li>S. Thompson. <b>Haskell: The Craft of Functional Programming</b>, Second Edition. Addison-Wesley, 1999.
<ul class="org-ul">
<li>Cap. 18: Programming with actions.</li>
</ul></li>

<li>Wikipedia <a href="http://bit.ly/1jYBtcj">ANSI escape code</a>.</li>

<li><a href="http://bit.ly/1Z8kVyt">Graphics.Gnuplot.Simple</a>.</li>

<li><a href="http://csnipp.com/s/213">Game of life implemented in Haskell</a>.</li>

<li><a href="https://bitstorm.org/gameoflife/">The game of life</a> (Animación).</li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr>
<center>
<p><a href="/"><i class="fa fa-home"></i></a> |
   <a href="/cursos/i1m/">Inicial</a> |
   <a href="/cursos/i1m/temas.html">Temas  </a>
</p>
</center>
<div id="extras">
  <p><a href="/">José A. Alonso Jiménez</a>
  <p>Sevilla, 30 de abril del 2021</p>
  <p><i class="fa fa-cc"></i> Licencia: <a href="https://creativecommons.org/licenses/by-nc-sa/2.5/es/">Creative Commons</a>.</p>
</div>
</div>
</body>
</html>
