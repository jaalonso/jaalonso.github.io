<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">
<head>
<!-- 03 de mayo del 2024 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Tema 7: Funciones de orden superior</title>
<meta name="author" content="José A. Alonso" />
<meta name="generator" content="Org Mode" />
<style>
  #content { max-width: 60em; margin: auto; }
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #e6e6e6;
    border-radius: 3px;
    background-color: #f2f2f2;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
  }
  pre.src:before {
    display: none;
    position: absolute;
    top: -8px;
    right: 12px;
    padding: 3px;
    color: #555;
    background-color: #f2f2f299;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-authinfo::before { content: 'Authinfo'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { }
</style>
<link rel="stylesheet" type="text/css" href="../../../css/estilo-org.css" />
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body>
<div id="preamble" class="status">
<p><a href="/"><i class="fa fa-home"></i></a> |
   <a href="/cursos/i1m/">Inicial</a> |
   <a href="/cursos/i1m/temas_apuntes_codigos.html">Temas  </a> |
   <a href="/cursos/i1m/manuales.html">Manuales  </a> |
   <a href="/cursos/i1m/ejercicios.html">Ejercicios  </a> |
   <a href="/cursos/i1m/examenes.html">Exámenes  </a> |
   <a href="/cursos/i1m/doc.html">Documentación  </a>
</p>
</div>
<div id="content" class="content">
<h1 class="title">Tema 7: Funciones de orden superior</h1>
<div id="table-of-contents" role="doc-toc">
<h2>&Iacute;ndice</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgf6e3793">1. Funciones de orden superior</a>
<ul>
<li><a href="#orgc54c82c">1.1. Funciones de orden superior</a></li>
<li><a href="#orgc0d7420">1.2. Usos de las funciones de orden superior</a></li>
</ul>
</li>
<li><a href="#org2b8ee3a">2. Procesamiento de listas</a>
<ul>
<li><a href="#org7a68cba">2.1. La función <code>map</code></a></li>
<li><a href="#org38b2fa5">2.2. La función <code>filter</code></a></li>
<li><a href="#orgcc039f2">2.3. Predefinidas de orden superior para procesar listas</a></li>
</ul>
</li>
<li><a href="#orgcda3d02">3. Función de plegado por la derecha: <code>foldr</code></a>
<ul>
<li><a href="#org4e041f3">3.1. Esquema básico de recursión sobre listas</a></li>
<li><a href="#org84251f8">3.2. El patrón <code>foldr</code></a></li>
<li><a href="#org53bf643">3.3. Visión no recursiva de <code>foldr</code></a></li>
<li><a href="#org56ae3d2">3.4. Definición de la longitud mediante <code>foldr</code></a></li>
<li><a href="#org21f46d6">3.5. Definición de la inversa mediante <code>foldr</code></a></li>
<li><a href="#org7fab612">3.6. Definición de la concatenación mediante <code>foldr</code></a></li>
</ul>
</li>
<li><a href="#org1c220b0">4. Función de plegado por la izquierda: <code>foldl</code></a>
<ul>
<li><a href="#org7e1022b">4.1. Definición de suma de lista con acumuladores</a></li>
<li><a href="#org0f99769">4.2. Patrón de definición de recursión con acumulador</a></li>
<li><a href="#org0a507b3">4.3. Definición de <code>foldl</code></a></li>
</ul>
</li>
<li><a href="#orge456d91">5. Composición de funciones</a>
<ul>
<li><a href="#org217d700">5.1. Composición de funciones</a></li>
<li><a href="#orgff26179">5.2. Uso de composición para simplificar definiciones</a></li>
<li><a href="#org9013e57">5.3. Composición de una lista de funciones</a></li>
</ul>
</li>
<li><a href="#org191e9af">6. Caso de estudio: Codificación binaria y transmisión de cadenas</a>
<ul>
<li><a href="#orgfe4f812">6.1. Cambio de bases</a></li>
<li><a href="#org0f9475d">6.2. Codificación y descodificación</a></li>
</ul>
</li>
<li><a href="#org4de5a6c">7. Material complementario</a></li>
<li><a href="#org51da71d">8. Bibliografía</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgf6e3793" class="outline-2">
<h2 id="orgf6e3793"><span class="section-number-2">1.</span> Funciones de orden superior</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgc54c82c" class="outline-3">
<h3 id="orgc54c82c"><span class="section-number-3">1.1.</span> Funciones de orden superior</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li>Una función es <b>de orden superior</b> si toma una función como argumento o
devuelve una función como resultado.</li>

<li><p>
<code>(dosVeces f x)</code> es el resultado de aplicar <code>f</code> a <code>f x</code>. Por ejemplo,
</p>
<pre class="example">
dosVeces (*3) 2           ==  18
dosVeces reverse [2,5,7]  ==  [2,5,7]
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">dosVeces</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">(</span>a <span style="color: #a0522d;">-&gt;</span> a<span style="color: #707183;">)</span> <span style="color: #a0522d;">-&gt;</span> a <span style="color: #a0522d;">-&gt;</span> a
<span style="color: #0000ff;">dosVeces</span> f x <span style="color: #a0522d;">=</span> f <span style="color: #707183;">(</span>f x<span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
Propiedad: <code>dosVeces reverse = id</code>, donde <code>id</code> es la función identidad.
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">id</span> <span style="color: #a0522d;">::</span> a <span style="color: #a0522d;">-&gt;</span> a
<span style="color: #0000ff;">id</span> x <span style="color: #a0522d;">=</span>  x
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgc0d7420" class="outline-3">
<h3 id="orgc0d7420"><span class="section-number-3">1.2.</span> Usos de las funciones de orden superior</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li>Definición de patrones de programación.
<ul class="org-ul">
<li>Aplicación de una función a todos los elementos de una lista.</li>
<li>Filtrado de listas por propiedades.</li>
<li>Patrones de recursión sobre listas.</li>
</ul></li>

<li>Diseño de lenguajes de dominio específico:
<ul class="org-ul">
<li>Lenguajes para procesamiento de mensajes.</li>
<li>Analizadores sintácticos.</li>
<li>Procedimientos de entrada/salida.</li>
</ul></li>

<li>Uso de las propiedades algebraicas de las funciones de orden superior para
razonar sobre programas.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org2b8ee3a" class="outline-2">
<h2 id="org2b8ee3a"><span class="section-number-2">2.</span> Procesamiento de listas</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org7a68cba" class="outline-3">
<h3 id="org7a68cba"><span class="section-number-3">2.1.</span> La función <code>map</code></h3>
<div class="outline-text-3" id="text-2-1">
</div>
<div id="outline-container-orge88b110" class="outline-4">
<h4 id="orge88b110"><span class="section-number-4">2.1.1.</span> La función <code>map</code>: Definición</h4>
<div class="outline-text-4" id="text-2-1-1">
<ul class="org-ul">
<li><p>
<code>(map f xs)</code> es la lista obtenida aplicando <code>f</code> a cada elemento de <code>xs</code>. Por
ejemplo,
</p>
<pre class="example">
map (*2) [3,4,7]     == [6,8,14]
map sqrt [1,2,4]     == [1.0,1.4142135623731,2.0]
map even [1..5]      == [False,True,False,True,False]
</pre></li>

<li><p>
Definición de <code>map</code> por comprensión:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">map</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">(</span>a <span style="color: #a0522d;">-&gt;</span> b<span style="color: #707183;">)</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span>a<span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span>b<span style="color: #707183;">]</span>
<span style="color: #0000ff;">map</span> f xs <span style="color: #a0522d;">=</span>  <span style="color: #707183;">[</span>f x <span style="color: #a0522d;">|</span> x <span style="color: #a0522d;">&lt;-</span> xs<span style="color: #707183;">]</span>
</pre>
</div></li>

<li><p>
Definición de <code>map</code> por recursión:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">map</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">(</span>a <span style="color: #a0522d;">-&gt;</span> b<span style="color: #707183;">)</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span>a<span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span>b<span style="color: #707183;">]</span>
<span style="color: #0000ff;">map</span> <span style="color: #a020f0;">_</span> <span style="color: #707183;">[]</span>     <span style="color: #a0522d;">=</span> <span style="color: #707183;">[]</span>
<span style="color: #0000ff;">map</span> f <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span> f x <span style="color: #228b22;">:</span> map f xs
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgf803f62" class="outline-4">
<h4 id="orgf803f62"><span class="section-number-4">2.1.2.</span> Relación entre <code>sum</code> y <code>map</code></h4>
<div class="outline-text-4" id="text-2-1-2">
<ul class="org-ul">
<li><p>
La función <code>sum</code>:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">sum</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Int</span><span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Int</span>
<span style="color: #0000ff;">sum</span> <span style="color: #707183;">[]</span>     <span style="color: #a0522d;">=</span> 0
<span style="color: #0000ff;">sum</span> <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span> x <span style="color: #a0522d;">+</span> sum xs
</pre>
</div></li>

<li>Propiedad: <code>sum (map (2*) xs) = 2 * sum xs</code></li>

<li><p>
Nota: Para comprobar la propiedad con QuickCheck hay que importar la librería
escribiendo al principio del fichero
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #a020f0;">import</span> <span style="color: #228b22;">Test.QuickCheck</span>
</pre>
</div></li>

<li><p>
La propiedad es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">prop_sum_map</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Int</span><span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Bool</span>
<span style="color: #0000ff;">prop_sum_map</span> xs <span style="color: #a0522d;">=</span> sum <span style="color: #707183;">(</span>map <span style="color: #7388d6;">(</span>2<span style="color: #a0522d;">*</span><span style="color: #7388d6;">)</span> xs<span style="color: #707183;">)</span> <span style="color: #a0522d;">==</span> 2 <span style="color: #a0522d;">*</span> sum xs
</pre>
</div></li>

<li><p>
La comprobación es
</p>
<pre class="example">
λ&gt; quickCheck prop_sum_map
+++ OK, passed 100 tests.
</pre></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org38b2fa5" class="outline-3">
<h3 id="org38b2fa5"><span class="section-number-3">2.2.</span> La función <code>filter</code></h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li><p>
<code>filter p xs</code> es la lista de los elementos de <code>xs</code> que cumplen la propiedad
<code>p</code>. Por ejemplo,
</p>
<pre class="example">
filter even [1,3,5,4,2,6,1] == [4,2,6]
filter (&gt;3) [1,3,5,4,2,6,1] == [5,4,6]
</pre></li>

<li><p>
Definición de <code>filter</code> por comprensión:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">filter</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">(</span>a <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Bool</span><span style="color: #707183;">)</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span>a<span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span>a<span style="color: #707183;">]</span>
<span style="color: #0000ff;">filter</span> p xs <span style="color: #a0522d;">=</span>  <span style="color: #707183;">[</span>x <span style="color: #a0522d;">|</span> x <span style="color: #a0522d;">&lt;-</span> xs, p x<span style="color: #707183;">]</span>
</pre>
</div></li>

<li><p>
Definición de <code>filter</code> por recursión:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">filter</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">(</span>a <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Bool</span><span style="color: #707183;">)</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span>a<span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span>a<span style="color: #707183;">]</span>
<span style="color: #0000ff;">filter</span> <span style="color: #a020f0;">_</span> <span style="color: #707183;">[]</span>                 <span style="color: #a0522d;">=</span> <span style="color: #707183;">[]</span>
<span style="color: #0000ff;">filter</span> p <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span> <span style="color: #a0522d;">|</span> p x       <span style="color: #a0522d;">=</span> x <span style="color: #228b22;">:</span> filter p xs
                <span style="color: #a0522d;">|</span> otherwise <span style="color: #a0522d;">=</span> filter p xs
</pre>
</div></li>
</ul>
</div>

<div id="outline-container-orgf29fd58" class="outline-4">
<h4 id="orgf29fd58"><span class="section-number-4">2.2.1.</span> Uso conjunto de <code>map</code> y <code>filter</code></h4>
<div class="outline-text-4" id="text-2-2-1">
<ul class="org-ul">
<li><p>
<code>sumaCuadradosPares xs</code> es la suma de los cuadrados de los números pares de
la lista <code>xs</code>. Por ejemplo,
</p>
<pre class="example">
sumaCuadradosPares [1..5]  ==  20
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">sumaCuadradosPares</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Int</span><span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Int</span>
<span style="color: #0000ff;">sumaCuadradosPares</span> xs <span style="color: #a0522d;">=</span> sum <span style="color: #707183;">(</span>map <span style="color: #7388d6;">(</span><span style="color: #a0522d;">^</span>2<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>filter even xs<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
Definición por comprensión:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">sumaCuadradosPares'</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Int</span><span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Int</span>
<span style="color: #0000ff;">sumaCuadradosPares'</span> xs <span style="color: #a0522d;">=</span> sum <span style="color: #707183;">[</span>x<span style="color: #a0522d;">^</span>2 <span style="color: #a0522d;">|</span> x <span style="color: #a0522d;">&lt;-</span> xs, even x<span style="color: #707183;">]</span>
</pre>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgcc039f2" class="outline-3">
<h3 id="orgcc039f2"><span class="section-number-3">2.3.</span> Predefinidas de orden superior para procesar listas</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li><p>
<code>all p xs</code> se verifica si todos los elementos de <code>xs</code> cumplen la propiedad
<code>p</code>. Por ejemplo,
</p>
<pre class="example">
all odd [1,3,5]  ==  True
all odd [1,3,6]  ==  False
</pre></li>

<li><p>
<code>any p xs</code> se verifica si algún elemento de <code>xs</code> cumple la propiedad <code>p</code>. Por
ejemplo,
</p>
<pre class="example">
any odd [1,3,5]  ==  True
any odd [2,4,6]  ==  False
</pre></li>

<li><p>
<code>takeWhile p xs</code> es la lista de los elementos iniciales de <code>xs</code> que verifican
el predicado <code>p</code>. Por ejemplo,
</p>
<pre class="example">
takeWhile even [2,4,6,7,8,9] == [2,4,6]
</pre></li>

<li><p>
<code>dropWhile p xs</code> es la lista <code>xs</code> sin los elementos iniciales que verifican
el predicado <code>p</code>. Por ejemplo,
</p>
<pre class="example">
dropWhile even [2,4,6,7,8,9] == [7,8,9]
</pre></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgcda3d02" class="outline-2">
<h2 id="orgcda3d02"><span class="section-number-2">3.</span> Función de plegado por la derecha: <code>foldr</code></h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org4e041f3" class="outline-3">
<h3 id="org4e041f3"><span class="section-number-3">3.1.</span> Esquema básico de recursión sobre listas</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li><p>
Ejemplos de definiciones recursivas:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">sum</span> <span style="color: #707183;">[]</span>         <span style="color: #a0522d;">=</span> 0
<span style="color: #0000ff;">sum</span> <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span>     <span style="color: #a0522d;">=</span> x <span style="color: #a0522d;">+</span> sum xs
<span style="color: #0000ff;">product</span> <span style="color: #707183;">[]</span>     <span style="color: #a0522d;">=</span> 1
<span style="color: #0000ff;">product</span> <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span> x <span style="color: #a0522d;">*</span> product xs
<span style="color: #0000ff;">or</span> <span style="color: #707183;">[]</span>          <span style="color: #a0522d;">=</span> <span style="color: #228b22;">False</span>
<span style="color: #0000ff;">or</span> <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span>      <span style="color: #a0522d;">=</span> x <span style="color: #a0522d;">||</span> or xs
<span style="color: #0000ff;">and</span> <span style="color: #707183;">[]</span>         <span style="color: #a0522d;">=</span> <span style="color: #228b22;">True</span>
<span style="color: #0000ff;">and</span> <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span>     <span style="color: #a0522d;">=</span> x <span style="color: #a0522d;">&amp;&amp;</span> and xs
</pre>
</div></li>

<li><p>
Esquema básico de recursión sobre listas:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">f</span> <span style="color: #707183;">[]</span>     <span style="color: #a0522d;">=</span> v
<span style="color: #0000ff;">f</span> <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span> x <span style="color: #a0522d;">~</span>op<span style="color: #a0522d;">~</span> <span style="color: #707183;">(</span>f xs<span style="color: #707183;">)</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org84251f8" class="outline-3">
<h3 id="org84251f8"><span class="section-number-3">3.2.</span> El patrón <code>foldr</code></h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li><p>
Redefiniciones con el patrón <code>foldr</code>
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">sum</span>     <span style="color: #a0522d;">=</span> foldr <span style="color: #707183;">(</span><span style="color: #a0522d;">+</span><span style="color: #707183;">)</span> 0
<span style="color: #0000ff;">product</span> <span style="color: #a0522d;">=</span> foldr <span style="color: #707183;">(</span><span style="color: #a0522d;">*</span><span style="color: #707183;">)</span> 1
<span style="color: #0000ff;">or</span>      <span style="color: #a0522d;">=</span> foldr <span style="color: #707183;">(</span><span style="color: #a0522d;">||</span><span style="color: #707183;">)</span> <span style="color: #228b22;">False</span>
<span style="color: #0000ff;">and</span>     <span style="color: #a0522d;">=</span> foldr <span style="color: #707183;">(</span><span style="color: #a0522d;">&amp;&amp;</span><span style="color: #707183;">)</span> <span style="color: #228b22;">True</span>
</pre>
</div></li>

<li><p>
Definición del patrón <code>foldr</code>
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">foldr</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">(</span>a <span style="color: #a0522d;">-&gt;</span> b <span style="color: #a0522d;">-&gt;</span> b<span style="color: #707183;">)</span> <span style="color: #a0522d;">-&gt;</span> b <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span>a<span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> b
<span style="color: #0000ff;">foldr</span> f v <span style="color: #707183;">[]</span>     <span style="color: #a0522d;">=</span>  v
<span style="color: #0000ff;">foldr</span> f v <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span>  f x <span style="color: #707183;">(</span>foldr f v xs<span style="color: #707183;">)</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org53bf643" class="outline-3">
<h3 id="org53bf643"><span class="section-number-3">3.3.</span> Visión no recursiva de <code>foldr</code></h3>
<div class="outline-text-3" id="text-3-3">
<ul class="org-ul">
<li><p>
Cálculo con <code>sum</code>:
</p>
<pre class="example">
sum [2,3,5]
= foldr (+) 0 [2,3,5]       [def. de sum]
= foldr (+) 0 2:(3:(5:[]))  [notación de lista]
=             2+(3+(5+0))   [sustituir (:) por (+) y
                                       []  por 0]
= 10~                       [aritmética]
</pre></li>

<li><p>
Cálculo con <code>product</code>:
</p>
<pre class="example">
product [2,3,5]
= foldr (*) 1 [2,3,5]      [def. de sum]
= foldr (*) 1 2:(3:(5:[])) [notación de lista]
=             2*(3*(5*1))  [sustituir (:) por (*) y
                                      []  por 1]
= 30                       [aritmética]
</pre></li>

<li>Cálculo de <code>foldr f v xs</code>
<ul class="org-ul">
<li>Sustituir en <code>xs</code> los <code>(:)</code> por <code>f</code> y <code>[]</code> por <code>v</code>.</li>
</ul></li>
</ul>
</div>
</div>

<div id="outline-container-org56ae3d2" class="outline-3">
<h3 id="org56ae3d2"><span class="section-number-3">3.4.</span> Definición de la longitud mediante <code>foldr</code></h3>
<div class="outline-text-3" id="text-3-4">
<ul class="org-ul">
<li><p>
Ejemplo de cálculo de la longitud:
</p>
<pre class="example">
longitud [2,3,5]
= longitud 2:(3:(5:[]))
=          1+(1+(1+0))      [Sustituciones]
= 3
</pre></li>

<li>Sustituciones:
<ul class="org-ul">
<li>los <code>(:)</code> por <code>(\x y -&gt; 1+y)</code></li>
<li>la <code>[]</code> por <code>0</code></li>
</ul></li>

<li><p>
Definición de <code>length</code> usando <code>foldr</code>
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">longitud</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span>a<span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Int</span>
<span style="color: #0000ff;">longitud</span> <span style="color: #a0522d;">=</span> foldr <span style="color: #707183;">(</span><span style="color: #a0522d;">\</span>x y <span style="color: #a0522d;">-&gt;</span> 1<span style="color: #a0522d;">+</span>y<span style="color: #707183;">)</span> 0
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org21f46d6" class="outline-3">
<h3 id="org21f46d6"><span class="section-number-3">3.5.</span> Definición de la inversa mediante <code>foldr</code></h3>
<div class="outline-text-3" id="text-3-5">
<ul class="org-ul">
<li><p>
Ejemplo de cálculo de la inversa:
</p>
<pre class="example">
inversa [2,3,5]
= inversa 2:(3:(5:[]))
=         (([] ++ [5]) ++ [3]) ++ [2]  [Sustituciones]
= [5,3,2]
</pre></li>

<li>Sustituciones:
<ul class="org-ul">
<li>los <code>(:)</code> por <code>(\x y -&gt; y ++ [x])</code></li>
<li>la <code>[]</code> por <code>[]</code></li>
</ul></li>

<li><p>
Definición de <code>inversa</code> usando <code>foldr</code>
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">inversa</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span>a<span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span>a<span style="color: #707183;">]</span>
<span style="color: #0000ff;">inversa</span> <span style="color: #a0522d;">=</span> foldr <span style="color: #707183;">(</span><span style="color: #a0522d;">\</span>x y <span style="color: #a0522d;">-&gt;</span> y <span style="color: #a0522d;">++</span> <span style="color: #7388d6;">[</span>x<span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> <span style="color: #707183;">[]</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org7fab612" class="outline-3">
<h3 id="org7fab612"><span class="section-number-3">3.6.</span> Definición de la concatenación mediante <code>foldr</code></h3>
<div class="outline-text-3" id="text-3-6">
<ul class="org-ul">
<li><p>
Ejemplo de cálculo de la concatenación:
</p>
<pre class="example">
conc [2,3,5] [7,9]
= conc 2:(3:(5:[])) [7,9]
=      2:(3:(5:[7,9]))       [Sustituciones]
= [2,3,5,7,9]
</pre></li>

<li>Sustituciones:
<ul class="org-ul">
<li>los <code>(:)</code> por <code>(:)</code></li>
<li>la <code>[]</code> por <code>ys</code></li>
</ul></li>

<li><p>
Definición de <code>conc</code> usando <code>foldr</code>
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">conc</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span>a<span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span>a<span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span>a<span style="color: #707183;">]</span>
<span style="color: #0000ff;">conc</span> xs ys <span style="color: #a0522d;">=</span> <span style="color: #707183;">(</span>foldr <span style="color: #7388d6;">(</span><span style="color: #228b22;">:</span><span style="color: #7388d6;">)</span> ys<span style="color: #707183;">)</span> xs
</pre>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org1c220b0" class="outline-2">
<h2 id="org1c220b0"><span class="section-number-2">4.</span> Función de plegado por la izquierda: <code>foldl</code></h2>
<div class="outline-text-2" id="text-4">
</div>
<div id="outline-container-org7e1022b" class="outline-3">
<h3 id="org7e1022b"><span class="section-number-3">4.1.</span> Definición de suma de lista con acumuladores</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li><p>
Definición de <code>suma</code> con acumuladores:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">suma</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Integer</span><span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Integer</span>
<span style="color: #0000ff;">suma</span> <span style="color: #a0522d;">=</span> sumaAux 0
    <span style="color: #a020f0;">where</span> sumaAux v <span style="color: #707183;">[]</span>     <span style="color: #a0522d;">=</span> v
          sumaAux v <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span> sumaAux <span style="color: #707183;">(</span>v<span style="color: #a0522d;">+</span>x<span style="color: #707183;">)</span> xs
</pre>
</div></li>

<li><p>
Cálculo con <code>suma</code>:
</p>
<pre class="example">
suma [2,3,7]
= sumaAux 0 [2,3,7]
= sumaAux (0+2) [3,7]
= sumaAux 2 [3,7]
= sumaAux (2+3) [7]
= sumaAux 5 [7]
= sumaAux (5+7) []
= sumaAux 12 []
= 12
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-org0f99769" class="outline-3">
<h3 id="org0f99769"><span class="section-number-3">4.2.</span> Patrón de definición de recursión con acumulador</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li><p>
Patrón de definición (generalización de <code>sumaAux</code>):
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">f</span> v <span style="color: #707183;">[]</span>     <span style="color: #a0522d;">=</span> v
<span style="color: #0000ff;">f</span> v <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span> f <span style="color: #707183;">(</span>v<span style="color: #a0522d;">*</span>x<span style="color: #707183;">)</span> xs
</pre>
</div></li>

<li><p>
Definición con el patrón <code>foldl</code>:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">suma</span>    <span style="color: #a0522d;">=</span> foldl <span style="color: #707183;">(</span><span style="color: #a0522d;">+</span><span style="color: #707183;">)</span> 0
<span style="color: #0000ff;">product</span> <span style="color: #a0522d;">=</span> foldl <span style="color: #707183;">(</span><span style="color: #a0522d;">*</span><span style="color: #707183;">)</span> 1
<span style="color: #0000ff;">or</span>      <span style="color: #a0522d;">=</span> foldl <span style="color: #707183;">(</span><span style="color: #a0522d;">||</span><span style="color: #707183;">)</span> <span style="color: #228b22;">False</span>
<span style="color: #0000ff;">and</span>     <span style="color: #a0522d;">=</span> foldl <span style="color: #707183;">(</span><span style="color: #a0522d;">&amp;&amp;</span><span style="color: #707183;">)</span> <span style="color: #228b22;">True</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org0a507b3" class="outline-3">
<h3 id="org0a507b3"><span class="section-number-3">4.3.</span> Definición de <code>foldl</code></h3>
<div class="outline-text-3" id="text-4-3">
<ul class="org-ul">
<li><p>
Definición de <code>foldl</code>:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">foldl</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">(</span>a <span style="color: #a0522d;">-&gt;</span> b <span style="color: #a0522d;">-&gt;</span> a<span style="color: #707183;">)</span> <span style="color: #a0522d;">-&gt;</span> a <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span>b <span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> a
<span style="color: #0000ff;">foldl</span> f v <span style="color: #707183;">[]</span>     <span style="color: #a0522d;">=</span>  v
<span style="color: #0000ff;">foldl</span> f v <span style="color: #707183;">(</span>x<span style="color: #228b22;">:</span>xs<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span>  foldl f <span style="color: #707183;">(</span>f v x <span style="color: #707183;">)</span> xs
</pre>
</div></li>

<li><p>
Diferencia entre <code>foldr</code> y <code>foldl</code>:
</p>
<pre class="example">
(foldr (-) 0) [3,4,2] =     3-(4-(2-0)) = 1
(foldl (-) 0) [3,4,2] = ((0-3)-4)-2     = -9
</pre></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orge456d91" class="outline-2">
<h2 id="orge456d91"><span class="section-number-2">5.</span> Composición de funciones</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org217d700" class="outline-3">
<h3 id="org217d700"><span class="section-number-3">5.1.</span> Composición de funciones</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li><p>
Definición de la composición de dos funciones:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #707183;">(</span><span style="color: #0000ff;">.</span><span style="color: #707183;">)</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">(</span>b <span style="color: #a0522d;">-&gt;</span> c<span style="color: #707183;">)</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">(</span>a <span style="color: #a0522d;">-&gt;</span> b<span style="color: #707183;">)</span> <span style="color: #a0522d;">-&gt;</span> a <span style="color: #a0522d;">-&gt;</span> c
f <span style="color: #0000ff;">.</span> g  <span style="color: #a0522d;">=</span> <span style="color: #a0522d;">\</span>x <span style="color: #a0522d;">-&gt;</span> f <span style="color: #707183;">(</span>g x<span style="color: #707183;">)</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgff26179" class="outline-3">
<h3 id="orgff26179"><span class="section-number-3">5.2.</span> Uso de composición para simplificar definiciones</h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li><p>
Definiciones sin composición:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">par</span> n                 <span style="color: #a0522d;">=</span> not <span style="color: #707183;">(</span>impar n<span style="color: #707183;">)</span>
<span style="color: #0000ff;">doVeces</span> f x           <span style="color: #a0522d;">=</span> f <span style="color: #707183;">(</span>f x <span style="color: #707183;">)</span>
<span style="color: #0000ff;">sumaCuadradosPares</span> ns <span style="color: #a0522d;">=</span> sum <span style="color: #707183;">(</span>map <span style="color: #7388d6;">(</span><span style="color: #a0522d;">^</span>2<span style="color: #7388d6;">)</span> <span style="color: #7388d6;">(</span>filter even ns<span style="color: #7388d6;">)</span><span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
Definiciones con composición:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">par</span>                <span style="color: #a0522d;">=</span> not <span style="color: #a0522d;">.</span> impar
<span style="color: #0000ff;">dosVeces</span> f         <span style="color: #a0522d;">=</span> f <span style="color: #a0522d;">.</span> f
<span style="color: #0000ff;">sumaCuadradosPares</span> <span style="color: #a0522d;">=</span> sum <span style="color: #a0522d;">.</span> map <span style="color: #707183;">(</span><span style="color: #a0522d;">^</span>2<span style="color: #707183;">)</span> <span style="color: #a0522d;">.</span> filter even
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-org9013e57" class="outline-3">
<h3 id="org9013e57"><span class="section-number-3">5.3.</span> Composición de una lista de funciones</h3>
<div class="outline-text-3" id="text-5-3">
<ul class="org-ul">
<li><p>
La función identidad:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">id</span> <span style="color: #a0522d;">::</span> a <span style="color: #a0522d;">-&gt;</span> a
<span style="color: #0000ff;">id</span> <span style="color: #a0522d;">=</span> <span style="color: #a0522d;">\</span>x <span style="color: #a0522d;">-&gt;</span> x
</pre>
</div></li>

<li><p>
<code>(composicionLista fs)</code> es la composición de la lista de funciones <code>fs</code>. Por
ejemplo,
</p>
<pre class="example">
composicionLista [(*2),(^2)] 3       ==  18
composicionLista [(^2),(*2)] 3       ==  36
composicionLista [(/9),(^2),(*2)] 3  ==  4.0
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">composicionLista</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span>a <span style="color: #a0522d;">-&gt;</span> a<span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">(</span>a <span style="color: #a0522d;">-&gt;</span> a<span style="color: #707183;">)</span>
<span style="color: #0000ff;">composicionLista</span> <span style="color: #a0522d;">=</span>  foldr <span style="color: #707183;">(</span><span style="color: #a0522d;">.</span><span style="color: #707183;">)</span> id
</pre>
</div></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org191e9af" class="outline-2">
<h2 id="org191e9af"><span class="section-number-2">6.</span> Caso de estudio: Codificación binaria y transmisión de cadenas</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li>Objetivos:
<ul class="org-ul">
<li>Definir una función que convierta una cadena en una lista de ceros y unos
junto con otra función que realice la conversión opuesta.</li>
<li>Simular la transmisión de cadenas mediante ceros y unos.</li>
</ul></li>

<li>Los números binarios se representan mediante listas de bits en orden
inverso. Un <b>bit</b> es cero o uno. Por ejemplo, el número 1101 se representa por
[1,0,1,1].</li>

<li>El tipo <code>Bit</code> es el de los bits.</li>
</ul>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #a020f0;">type</span> <span style="color: #228b22;">Bit</span> <span style="color: #a0522d;">=</span> <span style="color: #228b22;">Int</span>
</pre>
</div>
</div>

<div id="outline-container-orgfe4f812" class="outline-3">
<h3 id="orgfe4f812"><span class="section-number-3">6.1.</span> Cambio de bases</h3>
<div class="outline-text-3" id="text-6-1">
</div>
<div id="outline-container-org71f492b" class="outline-4">
<h4 id="org71f492b"><span class="section-number-4">6.1.1.</span> Cambio de bases: De binario a decimal</h4>
<div class="outline-text-4" id="text-6-1-1">
<ul class="org-ul">
<li><p>
<code>(bin2int x)</code> es el número decimal correspondiente al número binario <code>x</code>. Por
ejemplo,
</p>
<pre class="example">
bin2int [1,0,1,1]  ==  13
</pre>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">bin2int</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Bit</span><span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Int</span>
<span style="color: #0000ff;">bin2int</span> <span style="color: #a0522d;">=</span>  foldr <span style="color: #707183;">(</span><span style="color: #a0522d;">\</span>x y <span style="color: #a0522d;">-&gt;</span> x <span style="color: #a0522d;">+</span> 2<span style="color: #a0522d;">*</span>y<span style="color: #707183;">)</span> 0
</pre>
</div></li>

<li><p>
El cálculo es
</p>
<pre class="example">
bin2int [1,0,1,1]
= bin2int 1:(0:(1:(1:[])))
=         1+2*(0+2*(1+2*(1+2*0)))
= 13
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-orgfb3805c" class="outline-4">
<h4 id="orgfb3805c"><span class="section-number-4">6.1.2.</span> Cambio de base: De decimal a binario</h4>
<div class="outline-text-4" id="text-6-1-2">
<ul class="org-ul">
<li><p>
<code>(int2bin x)</code> es el número binario correspondiente al número decimal <code>x</code>. Por
ejemplo,
</p>
<pre class="example">
int2bin 13  ==  [1,0,1,1]
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">int2bin</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Int</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Bit</span><span style="color: #707183;">]</span>
<span style="color: #0000ff;">int2bin</span> n <span style="color: #a0522d;">|</span> n <span style="color: #a0522d;">&lt;</span> 2     <span style="color: #a0522d;">=</span> <span style="color: #707183;">[</span>n<span style="color: #707183;">]</span>
          <span style="color: #a0522d;">|</span> otherwise <span style="color: #a0522d;">=</span> n <span style="color: #a0522d;">~</span>mod<span style="color: #a0522d;">~</span> 2 <span style="color: #228b22;">:</span> int2bin <span style="color: #707183;">(</span>n <span style="color: #a0522d;">~</span>div<span style="color: #a0522d;">~</span> 2<span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
El cálculo es
</p>
<pre class="example">
int2bin 13
= 13 ~mod~ 2 : int2bin (13 ~div~ 2)
= 1 : int2bin (6 ~div~ 2)
= 1 : (6 ~mod~ 2 : int2bin (6 ~div~ 2))
= 1 : (0 : int2bin 3)
= 1 : (0 : (3 ~mod~ 2 : int2bin (3 ~div~ 2)))
= 1 : (0 : (1 : int2bin 1))
= 1 : (0 : (1 : (1 : int2bin 0)))
= 1 : (0 : (1 : (1 : [])))
= [1,0,1,1]
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-org52980a2" class="outline-4">
<h4 id="org52980a2"><span class="section-number-4">6.1.3.</span> Cambio de base: Comprobación de propiedades</h4>
<div class="outline-text-4" id="text-6-1-3">
<ul class="org-ul">
<li><p>
Propiedad: Al pasar un número natural a binario con <code>int2bin</code> y el resultado
a decimal con <code>bin2int</code> se obtiene el número inicial.
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">prop_int_bin</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">Int</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Bool</span>
<span style="color: #0000ff;">prop_int_bin</span> x <span style="color: #a0522d;">=</span>
  bin2int <span style="color: #707183;">(</span>int2bin y<span style="color: #707183;">)</span> <span style="color: #a0522d;">==</span> y
  <span style="color: #a020f0;">where</span> y <span style="color: #a0522d;">=</span> abs x
</pre>
</div></li>

<li><p>
Comprobación:
</p>
<pre class="example">
λ&gt; quickCheck prop_int_bin
+++ OK, passed 100 tests.
</pre></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org0f9475d" class="outline-3">
<h3 id="org0f9475d"><span class="section-number-3">6.2.</span> Codificación y descodificación</h3>
<div class="outline-text-3" id="text-6-2">
</div>
<div id="outline-container-org4b2bf49" class="outline-4">
<h4 id="org4b2bf49"><span class="section-number-4">6.2.1.</span> Creación de octetos</h4>
<div class="outline-text-4" id="text-6-2-1">
<ul class="org-ul">
<li>Un <b>octeto</b> es un grupo de ocho bits.</li>

<li><p>
<code>(creaOcteto bs)</code> es el octeto correspondiente a la lista de bits <code>bs</code>; es
decir, los 8 primeros elementos de <code>bs</code> si su longitud es mayor o igual que
8 y la lista de 8 elemento añadiendo ceros al final de <code>bs</code> en caso
contrario. Por ejemplo,
</p>
<pre class="example">
λ&gt; creaOcteto [1,0,1,1,0,0,1,1,1,0,0,0]
[1,0,1,1,0,0,1,1]
λ&gt; creaOcteto [1,0,1,1]
[1,0,1,1,0,0,0,0]
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">creaOcteto</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Bit</span><span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Bit</span><span style="color: #707183;">]</span>
<span style="color: #0000ff;">creaOcteto</span> bs <span style="color: #a0522d;">=</span> take 8 <span style="color: #707183;">(</span>bs <span style="color: #a0522d;">++</span> repeat 0<span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
<code>(repeat x)</code> es una lista infinita cuyo único elemento es <code>x</code>. Por ejemplo,
</p>
<pre class="example">
take 3 (repeat 5) == [5,5,5]
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-org510b33c" class="outline-4">
<h4 id="org510b33c"><span class="section-number-4">6.2.2.</span> Codificación</h4>
<div class="outline-text-4" id="text-6-2-2">
<ul class="org-ul">
<li><p>
<code>(codifica c)</code> es la codificación de la cadena <code>c</code> como una lista de bits
obtenida convirtiendo cada carácter en un número Unicode, convirtiendo cada
uno de dichos números en un octeto y concatenando los octetos para obtener
una lista de bits. Por ejemplo,
</p>
<pre class="example">
λ&gt; codifica "abc"
[1,0,0,0,0,1,1,0,0,1,0,0,0,1,1,0,1,1,0,0,0,1,1,0]
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">codifica</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Bit</span><span style="color: #707183;">]</span>
<span style="color: #0000ff;">codifica</span> <span style="color: #a0522d;">=</span>  concat <span style="color: #a0522d;">.</span> map <span style="color: #707183;">(</span>creaOcteto <span style="color: #a0522d;">.</span> int2bin <span style="color: #a0522d;">.</span> ord<span style="color: #707183;">)</span>
</pre>
</div></li>

<li><p>
<code>(concat xss)</code> es la lista obtenida concatenando la lista de listas
<code>xss</code>. Por ejemplo,
</p>
<pre class="example">
concat [[1,5],[2],[4,5,3]] == [1,5,2,4,5,3]
</pre></li>

<li><p>
Ejemplo de codificación:
</p>
<pre class="example">
codifica "abc"
= concat . map (creaOcteto . int2bin . ord) "abc"
= concat . map (creaOcteto . int2bin . ord) ['a','b','c']
= concat [creaOcteto . int2bin . ord 'a',
          creaOcteto . int2bin . ord 'b',
          creaOcteto . int2bin . ord 'c']
= concat [creaOcteto [1,0,0,0,0,1,1],
          creaOcteto [0,1,0,0,0,1,1],
          creaOcteto [1,1,0,0,0,1,1]]
= concat [[1,0,0,0,0,1,1,0],
          [0,1,0,0,0,1,1,0],
          [1,1,0,0,0,1,1,0]]
= [1,0,0,0,0,1,1,0,0,1,0,0,0,1,1,0,1,1,0,0,0,1,1,0]
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-org5c28bd8" class="outline-4">
<h4 id="org5c28bd8"><span class="section-number-4">6.2.3.</span> Separación de octetos</h4>
<div class="outline-text-4" id="text-6-2-3">
<ul class="org-ul">
<li><p>
<code>(separaOctetos bs)</code> es la lista obtenida separando la lista de bits <code>bs</code> en
listas de 8 elementos. Por ejemplo,
</p>
<pre class="example">
λ&gt; separaOctetos [1,0,0,0,0,1,1,0,0,1,0,0,0,1,1,0]
[[1,0,0,0,0,1,1,0],[0,1,0,0,0,1,1,0]]
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">separaOctetos</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Bit</span><span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #707183;">[</span><span style="color: #7388d6;">[</span><span style="color: #228b22;">Bit</span><span style="color: #7388d6;">]</span><span style="color: #707183;">]</span>
<span style="color: #0000ff;">separaOctetos</span> <span style="color: #707183;">[]</span> <span style="color: #a0522d;">=</span> <span style="color: #707183;">[]</span>
<span style="color: #0000ff;">separaOctetos</span> bs <span style="color: #a0522d;">=</span> take 8 bs <span style="color: #228b22;">:</span> separaOctetos <span style="color: #707183;">(</span>drop 8 bs<span style="color: #707183;">)</span>
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orgaf7fa6e" class="outline-4">
<h4 id="orgaf7fa6e"><span class="section-number-4">6.2.4.</span> Descodificación</h4>
<div class="outline-text-4" id="text-6-2-4">
<ul class="org-ul">
<li><p>
<code>(descodifica bs)</code> es la cadena correspondiente a la lista de bits
<code>bs</code>. Por ejemplo,
</p>
<pre class="example">
λ&gt; descodifica [1,0,0,0,0,1,1,0,0,1,0,0,0,1,1,0,1,1,0,0,0,1,1,0]
"abc"
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">descodifica</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">[</span><span style="color: #228b22;">Bit</span><span style="color: #707183;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">String</span>
<span style="color: #0000ff;">descodifica</span> <span style="color: #a0522d;">=</span>  map <span style="color: #707183;">(</span>chr <span style="color: #a0522d;">.</span> bin2int<span style="color: #707183;">)</span> <span style="color: #a0522d;">.</span> separaOctetos
</pre>
</div></li>

<li><p>
Ejemplo de cálculo:
</p>
<pre class="example">
descodifica [1,0,0,0,0,1,1,0,0,1,0,0,0,1,1,0,1,1,0,0,0,1,1,0]
= (map (chr . bin2int) . separaOctetos)
  [1,0,0,0,0,1,1,0,0,1,0,0,0,1,1,0,1,1,0,0,0,1,1,0]
= map (chr . bin2int) [[1,0,0,0,0,1,1,0],[0,1,0,0,0,1,1,0],[1,1,0,0,0,1,1,0]]
= [(chr . bin2int) [1,0,0,0,0,1,1,0],
   (chr . bin2int) [0,1,0,0,0,1,1,0],
   (chr . bin2int) [1,1,0,0,0,1,1,0]]
= [chr 97, chr 98, chr 99]
= "abc"
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-org2fa28a4" class="outline-4">
<h4 id="org2fa28a4"><span class="section-number-4">6.2.5.</span> Transmisión</h4>
<div class="outline-text-4" id="text-6-2-5">
<ul class="org-ul">
<li>Los canales de transmisión pueden representarse mediante funciones que
transforman cadenas de bits en cadenas de bits.</li>

<li><p>
<code>(transmite c t)</code> es la cadena obtenida transmitiendo la cadena <code>t</code> a través
del canal <code>c</code>. Por ejemplo,
</p>
<pre class="example">
λ&gt; transmite id "Texto por canal correcto"
"Texto por canal correcto"
</pre>

<p>
Su definición es
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">transmite</span> <span style="color: #a0522d;">::</span> <span style="color: #707183;">(</span><span style="color: #7388d6;">[</span><span style="color: #228b22;">Bit</span><span style="color: #7388d6;">]</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #7388d6;">[</span><span style="color: #228b22;">Bit</span><span style="color: #7388d6;">]</span><span style="color: #707183;">)</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">String</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">String</span>
<span style="color: #0000ff;">transmite</span> canal <span style="color: #a0522d;">=</span>  descodifica <span style="color: #a0522d;">.</span> canal <span style="color: #a0522d;">.</span> codifica
</pre>
</div></li>
</ul>
</div>
</div>

<div id="outline-container-orga8dedf2" class="outline-4">
<h4 id="orga8dedf2"><span class="section-number-4">6.2.6.</span> Corrección de la transmisión</h4>
<div class="outline-text-4" id="text-6-2-6">
<ul class="org-ul">
<li><p>
Propiedad: Al trasmitir cualquier cadena por el canal identidad se obtiene la
cadena.
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #0000ff;">prop_transmite</span> <span style="color: #a0522d;">::</span> <span style="color: #228b22;">ASCIIString</span> <span style="color: #a0522d;">-&gt;</span> <span style="color: #228b22;">Bool</span>
<span style="color: #0000ff;">prop_transmite</span> <span style="color: #707183;">(</span><span style="color: #228b22;">ASCIIString</span> cs<span style="color: #707183;">)</span> <span style="color: #a0522d;">=</span> transmite id cs <span style="color: #a0522d;">==</span> cs
</pre>
</div></li>

<li><p>
Comprobación de la corrección:
</p>
<pre class="example">
λ&gt; quickCheck prop_transmite
+++ OK, passed 100 tests.
</pre></li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-org4de5a6c" class="outline-2">
<h2 id="org4de5a6c"><span class="section-number-2">7.</span> Material complementario</h2>
<div class="outline-text-2" id="text-7">
<p>
El código del tema se encuentra en este <a href="https://github.com/jaalonso/I1M-Cod-Temas/blob/master/src/Tema_7.hs">enlace</a>.
</p>

<p>
Este tema también se encuentra en los siguientes formatos:
</p>
<ul class="org-ul">
<li>Como <a href="./tema-7.pdf">transparencias en PDF</a>.</li>
<li>Como <a href="https://mybinder.org/v2/gh/jaalonso/Temas_interactivos_de_PF_con_Haskell/master?filepath=temas/Tema-07.ipynb">libro interactivo en IHaskell sobre Jupyter</a>.</li>
<li>Como vídeos de clase: <a href="https://youtu.be/FAVMGLJfRYI">vídeo 1</a> y <a href="https://youtu.be/pWOdjXrkHj4">vídeo 2</a>.</li>
</ul>
</div>
</div>

<div id="outline-container-org51da71d" class="outline-2">
<h2 id="org51da71d"><span class="section-number-2">8.</span> Bibliografía</h2>
<div class="outline-text-2" id="text-8">
<ul class="org-ul">
<li>R. Bird. <b>Introducción a la programación funcional con Haskell</b>. Prentice
Hall, 2000.
<ul class="org-ul">
<li>Cap. 4: Listas.</li>
</ul></li>

<li>G. Hutton. <b>Programming in Haskell</b>. Cambridge University Press, 2007.
<ul class="org-ul">
<li>Cap. 7: Higher-order functions.</li>
</ul></li>

<li>B.C. Ruiz, F. Gutiérrez, P. Guerrero y J.E. Gallardo. <b>Razonando con
Haskell</b>. Thompson, 2004.
<ul class="org-ul">
<li>Cap. 8: Funciones de orden superior y polimorfismo.</li>
</ul></li>

<li>S. Thompson. <b>Haskell: The Craft of Functional Programming</b>, Second
Edition. Addison-Wesley, 1999.
<ul class="org-ul">
<li>Cap. 9: Generalization: patterns of computation.</li>
<li>Cap. 10: Functions as values.</li>
</ul></li>
</ul>
</div>
</div>
</div>
<div id="postamble" class="status">
<hr>
<center>
<p><a href="/"><i class="fa fa-home"></i></a> |
   <a href="/cursos/i1m/">Inicial</a> |
   <a href="/cursos/i1m/temas_apuntes_codigos.html">Temas  </a> |
   <a href="/cursos/i1m/manuales.html">Manuales  </a> |
   <a href="/cursos/i1m/ejercicios.html">Ejercicios  </a> |
   <a href="/cursos/i1m/examenes.html">Exámenes  </a> |
   <a href="/cursos/i1m/doc.html">Documentación  </a>
</p>
</center>
<div id="extras">
  <p><a href="/">José A. Alonso Jiménez</a>
  <p>Sevilla, 03 de mayo del 2024</p>
  <p><i class="fa fa-cc"></i> Licencia: <a href="https://creativecommons.org/licenses/by-nc-sa/2.5/es/">Creative Commons</a>.</p>
</div>
</div>
</body>
</html>