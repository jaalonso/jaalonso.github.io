<!DOCTYPE html>
<html prefix="
og: http://ogp.me/ns# article: http://ogp.me/ns/article#
" lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>La semana en Calculemus (23 de junio de 2024) | Vestigium</title>
<link href="../../../../assets/css/rst.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/code.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/theme.css" rel="stylesheet" type="text/css">
<link href="../../../../assets/css/custom.css" rel="stylesheet" type="text/css">
<link href="https://fonts.googleapis.com/css2?family=Merriweather&amp;family=Open+Sans&amp;family=Source+Code+Pro:wght@400;600&amp;display=swap" rel="stylesheet">
<link href="../../../../assets/css/extras.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="es" href="../../../../rss.xml">
<link rel="canonical" href="https://jaalonso.github.io/vestigium/posts/2024/06/23-la-semana-en-calculemus-23-de-junio-de-2024/">
<link rel="icon" href="../../../../favicon.png" sizes="48x48">
<!--[if lt IE 9]><script src="../../../../assets/js/html5.js"></script><![endif]--><meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://jaalonso.github.io/vestigium/meta-twitter.png">
<meta name="twitter:title" content="La semana en Calculemus (23 de junio de 2024) | Vestigium">
<meta name="author" content="José A. Alonso">
<link rel="prev" href="../23-lecturas_compartidas_el_22-jun-24/" title="Lecturas compartidas el 23 de junio de 2024" type="text/html">
<meta property="og:site_name" content="Vestigium">
<meta property="og:title" content="La semana en Calculemus (23 de junio de 2024)">
<meta property="og:url" content="https://jaalonso.github.io/vestigium/posts/2024/06/23-la-semana-en-calculemus-23-de-junio-de-2024/">
<meta property="og:description" content="Esta semana he publicado en Calculemus las demostraciones con Lean4 de las siguientes propiedades:

1. Las funciones biyectivas tienen inversa
2. La equipotencia es una relación reflexiva
3. La invers">
<meta property="og:image" content="https://jaalonso.github.io/vestigium/favicon.png">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2024-06-23T12:00:00+02:00">
<meta property="article:tag" content="IsabelleHOL">
<meta property="article:tag" content="ITP">
<meta property="article:tag" content="Lean4">
<meta property="article:tag" content="Math">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Ir al contenido principal</a>
    <div id="container">
            <header id="header"><h1 id="brand"><a href="../../../../" title="Vestigium" rel="home">

        <span id="blog-title">Vestigium</span>
    </a></h1>
    <div>Cuaderno de Investigación en Lógica Computacional</div>

        
            <nav id="menu"><ul>
<li><a href="https://jaalonso.github.io/">José A. Alonso</a></li>
                <li><a href="../../../../archive.html">Archivo</a></li>
                <li><a href="../../../../categories/">Etiquetas</a></li>
                <li><a href="../../../../about/">Acerca de</a></li>
                <li><a href="../../../../rss.xml">RSS</a></li>

    
    
    
    </ul></nav></header><main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">La semana en Calculemus (23 de junio de 2024)</a></h1>

        <div class="metadata">
            <p class="byline author vcard p-author h-card"><span class="byline-name fn p-name" itemprop="author">
                    José A. Alonso
            </span></p>
            <p class="dateline">
            <a href="." rel="bookmark">
            <time class="published dt-published" datetime="2024-06-23T12:00:00+02:00" itemprop="datePublished" title="23-06-2024">23-06-2024</time></a>
            </p>
        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>Esta semana he publicado en <a href="https://jaalonso.github.io/calculemus">Calculemus</a> las demostraciones con Lean4 de las siguientes propiedades:</p>
<ul>
<li><a href="#ej1">1. Las funciones biyectivas tienen inversa</a></li>
<li><a href="#ej2">2. La equipotencia es una relación reflexiva</a></li>
<li><a href="#ej3">3. La inversa de una función es biyectiva</a></li>
<li><a href="#ej4">4. La equipotencia es una relación simétrica</a></li>
<li><a href="#ej5">5. La composición de funciones biyectivas es biyectiva</a></li>
</ul>
<p>A continuación se muestran las soluciones.</p>
<!-- TEASER_END -->
<p><a name="ej1"></a></p>
<h2>1. Las funciones biyectivas tienen inversa</h2>
<p>En Lean4 se puede definir que \(g\) es una inversa de \(f\) por</p>
<div class="code"><pre class="code literal-block">   <span class="kd">def</span> <span class="n">inversa</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span>
     <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span>
</pre></div>

<p>y que \(f\) tiene inversa por</p>
<div class="code"><pre class="code literal-block">   <span class="kd">def</span> <span class="n">tiene_inversa</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
     <span class="bp">∃</span> <span class="n">g</span><span class="o">,</span> <span class="n">inversa</span> <span class="n">f</span> <span class="n">g</span>
</pre></div>

<p>Demostrar con Lean4 que si la función \(f\) es biyectiva, entonces \(f\) tiene inversa.</p>
<p>Para ello, completar la siguiente teoría de Lean4:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>
<span class="kn">open</span> <span class="n">Function</span>

<span class="kd">variable</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">_</span><span class="o">}</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">inversa</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">tiene_inversa</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">∃</span> <span class="n">g</span><span class="o">,</span> <span class="n">inversa</span> <span class="n">g</span> <span class="n">f</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">tiene_inversa</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="gr">sorry</span>
</pre></div>

<!-- TEASER_END -->

<h3>1.1. Demostración en lenguaje natural</h3>
<p>Sea \(f: X → Y\) biyectiva. Entonces, \(f\) es suprayectiva y se puede definir la función \(g: Y → X\) tal que
\[ g(y) = x, \text{donde \(x\) es un elemento de \(X\) tal que \(f(x) = y\) \]
Por tanto,
\[ (∀y ∈ Y)[f(g(y)) = y] \tag{1} \]</p>
<p>Veamos que \(g\) es inversa de \(f\); es decir, que se verifican
\begin{align}
   &amp;(∀y ∈ Y)[(f ∘ g) y = y] \tag{2} \\
   &amp;(∀x ∈ X)[(g ∘ f) x = x] \tag{3}
\end{align}</p>
<p>La propiedad (2) se tiene por (1) y la definición de composición.</p>
<p>Para demostrar (3), sea \(x ∈ X\). Entonces, por (1),
\[ f(g(f(x))) = f(x) \]
y, por ser f inyectiva,
\[ g(f(x)) = x \]
Luego,
\[ (g ∘ f)(x) = x \]</p>
<h3>1.2. Demostraciones con Lean4</h3>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>
<span class="kn">open</span> <span class="n">Function</span>

<span class="kd">variable</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">_</span><span class="o">}</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">inversa</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">tiene_inversa</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">∃</span> <span class="n">g</span><span class="o">,</span> <span class="n">inversa</span> <span class="n">g</span> <span class="n">f</span>

<span class="c1">-- 1ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">tiene_inversa</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">hf</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">hfiny</span><span class="o">,</span> <span class="n">hfsup</span><span class="o">⟩</span>
  <span class="c1">-- hfiny : Injective f</span>
  <span class="c1">-- hfsup : Surjective f</span>
  <span class="n">choose</span> <span class="n">g</span> <span class="n">hg</span> <span class="n">using</span> <span class="n">hfsup</span>
  <span class="c1">-- g : Y → X</span>
  <span class="c1">-- hg : ∀ (b : Y), f (g b) = b</span>
  <span class="n">use</span> <span class="n">g</span>
  <span class="c1">-- ⊢ inversa g f</span>
  <span class="n">constructor</span>
  <span class="bp">.</span> <span class="c1">-- ⊢ ∀ (x : Y), (f ∘ g) x = x</span>
    <span class="n">exact</span> <span class="n">hg</span>
  <span class="bp">.</span> <span class="c1">-- ⊢ ∀ (y : X), (g ∘ f) y = y</span>
    <span class="n">intro</span> <span class="n">a</span>
    <span class="c1">-- a : X</span>
    <span class="c1">-- ⊢ (g ∘ f) a = a</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">comp_apply</span><span class="o">]</span>
    <span class="c1">-- ⊢ g (f a) = a</span>
    <span class="n">apply</span> <span class="n">hfiny</span>
    <span class="c1">-- ⊢ f (g (f a)) = f a</span>
    <span class="n">rw</span> <span class="o">[</span><span class="n">hg</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">)]</span>

<span class="c1">-- 2ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">tiene_inversa</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">hf</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">hfiny</span><span class="o">,</span> <span class="n">hfsup</span><span class="o">⟩</span>
    <span class="c1">-- hfiny : Injective f</span>
    <span class="c1">-- hfsup : Surjective f</span>
  <span class="n">choose</span> <span class="n">g</span> <span class="n">hg</span> <span class="n">using</span> <span class="n">hfsup</span>
  <span class="c1">-- g : Y → X</span>
  <span class="c1">-- hg : ∀ (b : Y), f (g b) = b</span>
  <span class="n">use</span> <span class="n">g</span>
  <span class="c1">-- ⊢ inversa g f</span>
  <span class="n">constructor</span>
  <span class="bp">.</span> <span class="c1">-- ⊢ ∀ (x : Y), (f ∘ g) x = x</span>
    <span class="n">exact</span> <span class="n">hg</span>
  <span class="bp">.</span> <span class="c1">-- ⊢ ∀ (y : X), (g ∘ f) y = y</span>
    <span class="n">intro</span> <span class="n">a</span>
    <span class="c1">-- a : X</span>
    <span class="c1">-- ⊢ (g ∘ f) a = a</span>
    <span class="n">exact</span> <span class="bp">@</span><span class="n">hfiny</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span> <span class="n">a</span> <span class="o">(</span><span class="n">hg</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span>

<span class="c1">-- 3ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">tiene_inversa</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">hf</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">hfiny</span><span class="o">,</span> <span class="n">hfsup</span><span class="o">⟩</span>
  <span class="c1">-- hfiny : Injective f</span>
  <span class="c1">-- hfsup : Surjective f</span>
  <span class="n">choose</span> <span class="n">g</span> <span class="n">hg</span> <span class="n">using</span> <span class="n">hfsup</span>
  <span class="c1">-- g : Y → X</span>
  <span class="c1">-- hg : ∀ (b : Y), f (g b) = b</span>
  <span class="n">use</span> <span class="n">g</span>
  <span class="c1">-- ⊢ inversa g f</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">hg</span><span class="o">,</span> <span class="k">fun</span> <span class="n">a</span> <span class="bp">↦</span> <span class="bp">@</span><span class="n">hfiny</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span> <span class="n">a</span> <span class="o">(</span><span class="n">hg</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))⟩</span>

<span class="c1">-- 4ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">tiene_inversa</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">hf</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">hfiny</span><span class="o">,</span> <span class="n">hfsup</span><span class="o">⟩</span>
  <span class="c1">-- hfiny : Injective f</span>
  <span class="c1">-- hfsup : Surjective f</span>
  <span class="n">choose</span> <span class="n">g</span> <span class="n">hg</span> <span class="n">using</span> <span class="n">hfsup</span>
  <span class="c1">-- g : Y → X</span>
  <span class="c1">-- hg : ∀ (b : Y), f (g b) = b</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">g</span><span class="o">,</span> <span class="o">⟨</span><span class="n">hg</span><span class="o">,</span> <span class="k">fun</span> <span class="n">a</span> <span class="bp">↦</span> <span class="bp">@</span><span class="n">hfiny</span> <span class="o">(</span><span class="n">g</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))</span> <span class="n">a</span> <span class="o">(</span><span class="n">hg</span> <span class="o">(</span><span class="n">f</span> <span class="n">a</span><span class="o">))⟩⟩</span>

<span class="c1">-- 5ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">tiene_inversa</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">cases'</span> <span class="o">(</span><span class="n">bijective_iff_has_inverse.mp</span> <span class="n">hf</span><span class="o">)</span> <span class="k">with</span> <span class="n">g</span> <span class="n">hg</span>
  <span class="c1">-- g : Y → X</span>
  <span class="c1">-- hg : LeftInverse g f ∧ Function.RightInverse g f</span>
  <span class="n">aesop</span> <span class="o">(</span><span class="n">add</span> <span class="n">norm</span> <span class="n">unfold</span> <span class="o">[</span><span class="n">tiene_inversa</span><span class="o">,</span> <span class="n">inversa</span><span class="o">])</span>

<span class="c1">-- Lemas usados</span>
<span class="c1">-- ============</span>

<span class="c1">-- variable (g : Y → X)</span>
<span class="c1">-- variable (x : X)</span>
<span class="c1">-- #check (bijective_iff_has_inverse : Bijective f ↔ ∃ g, LeftInverse g f ∧ RightInverse g f)</span>
<span class="c1">-- #check (comp_apply : (g ∘ f) x = g (f x))</span>
</pre></div>

<p>Se puede interactuar con las demostraciones anteriores en <a href="https://live.lean-lang.org/#url=https://raw.githubusercontent.com/jaalonso/Calculemus2/main/src/Las_funciones_biyectivas_tienen_inversa.lean">Lean 4 Web</a>.</p>
<h3>1.3. Demostraciones con Isabelle/HOL</h3>
<div class="code"><pre class="code literal-block"><span class="k">theory</span><span class="w"> </span><span class="n">Las_funciones_biyectivas_tienen_inversa</span>
<span class="kp">imports</span><span class="w"> </span><span class="n">Main</span>
<span class="k">begin</span>

<span class="k">definition</span><span class="w"> </span><span class="n">inversa</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"('a ⇒ 'b) ⇒ ('b ⇒ 'a) ⇒ bool"</span><span class="w"> </span><span class="kp">where</span>
<span class="w">  </span><span class="s">"inversa f g ⟷ (∀ x. (g ∘ f) x = x) ∧ (∀ y. (f ∘ g) y = y)"</span>

<span class="k">definition</span><span class="w"> </span><span class="n">tiene_inversa</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"('a ⇒ 'b) ⇒ bool"</span><span class="w"> </span><span class="kp">where</span>
<span class="w">  </span><span class="s">"tiene_inversa f ⟷ (∃ g. inversa f g)"</span>

<span class="c">(* 1ª demostración *)</span>

<span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"bij f"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w">   </span><span class="s">"tiene_inversa f"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">-</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="s">"surj f"</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_is_surj</span><span class="o">)</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">obtain</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="kp">where</span><span class="w"> </span><span class="n">hg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">"∀y. f (g y) = y"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">metis</span><span class="w"> </span><span class="n">surjD</span><span class="o">)</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="s">"inversa f g"</span>
<span class="w">  </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">unfold</span><span class="w"> </span><span class="n">inversa_def;</span><span class="w"> </span><span class="n">intro</span><span class="w"> </span><span class="n">conjI</span><span class="o">)</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="s">"∀x. (g ∘ f) x = x"</span>
<span class="w">    </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">allI</span><span class="o">)</span>
<span class="w">      </span><span class="k">fix</span><span class="w"> </span><span class="n">x</span>
<span class="w">      </span><span class="k">have</span><span class="w"> </span><span class="s">"inj f"</span>
<span class="w">        </span><span class="k">using</span><span class="w"> </span><span class="s">‹bij f›</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_is_inj</span><span class="o">)</span>
<span class="w">      </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"(g ∘ f) x = x"</span>
<span class="w">      </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">injD</span><span class="o">)</span>
<span class="w">        </span><span class="k">have</span><span class="w"> </span><span class="s">"f ((g ∘ f) x) = f (g (f x))"</span>
<span class="w">          </span><span class="k">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">        </span><span class="k">also</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"… = f x"</span>
<span class="w">          </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">hg</span><span class="o">)</span>
<span class="w">        </span><span class="k">finally</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"f ((g ∘ f) x) = f x"</span>
<span class="w">          </span><span class="k">by</span><span class="w"> </span><span class="n">this</span>
<span class="w">      </span><span class="k">qed</span>
<span class="w">    </span><span class="k">qed</span>
<span class="w">    </span><span class="k">next</span>
<span class="w">      </span><span class="k">show</span><span class="w"> </span><span class="s">"∀y. (f ∘ g) y = y"</span>
<span class="w">        </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">hg</span><span class="o">)</span>
<span class="w">  </span><span class="k">qed</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"tiene_inversa f"</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">tiene_inversa_def</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">blast</span>
<span class="k">qed</span>

<span class="c">(* 2ª demostración *)</span>

<span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"bij f"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w">   </span><span class="s">"tiene_inversa f"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">-</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="s">"surj f"</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_is_surj</span><span class="o">)</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">obtain</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="kp">where</span><span class="w"> </span><span class="n">hg</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">"∀y. f (g y) = y"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">metis</span><span class="w"> </span><span class="n">surjD</span><span class="o">)</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="s">"inversa f g"</span>
<span class="w">  </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">unfold</span><span class="w"> </span><span class="n">inversa_def;</span><span class="w"> </span><span class="n">intro</span><span class="w"> </span><span class="n">conjI</span><span class="o">)</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="s">"∀x. (g ∘ f) x = x"</span>
<span class="w">    </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">allI</span><span class="o">)</span>
<span class="w">      </span><span class="k">fix</span><span class="w"> </span><span class="n">x</span>
<span class="w">      </span><span class="k">have</span><span class="w"> </span><span class="s">"inj f"</span>
<span class="w">        </span><span class="k">using</span><span class="w"> </span><span class="s">‹bij f›</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_is_inj</span><span class="o">)</span>
<span class="w">      </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"(g ∘ f) x = x"</span>
<span class="w">      </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">injD</span><span class="o">)</span>
<span class="w">        </span><span class="k">have</span><span class="w"> </span><span class="s">"f ((g ∘ f) x) = f (g (f x))"</span>
<span class="w">          </span><span class="k">by</span><span class="w"> </span><span class="n">simp</span>
<span class="w">        </span><span class="k">also</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"… = f x"</span>
<span class="w">          </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">hg</span><span class="o">)</span>
<span class="w">        </span><span class="k">finally</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"f ((g ∘ f) x) = f x"</span>
<span class="w">          </span><span class="k">by</span><span class="w"> </span><span class="n">this</span>
<span class="w">      </span><span class="k">qed</span>
<span class="w">    </span><span class="k">qed</span>
<span class="w">  </span><span class="k">next</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="s">"∀y. (f ∘ g) y = y"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">hg</span><span class="o">)</span>
<span class="w">  </span><span class="k">qed</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"tiene_inversa f"</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">tiene_inversa_def</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">auto</span>
<span class="k">qed</span>

<span class="c">(* 3ª demostración *)</span>

<span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"bij f"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w">   </span><span class="s">"tiene_inversa f"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">-</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="s">"inversa f (inv f)"</span>
<span class="w">  </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">unfold</span><span class="w"> </span><span class="n">inversa_def;</span><span class="w"> </span><span class="n">intro</span><span class="w"> </span><span class="n">conjI</span><span class="o">)</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="s">"∀x. (inv f ∘ f) x = x"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="s">‹bij f›</span><span class="w"> </span><span class="n">bij_is_inj</span><span class="o">)</span>
<span class="w">  </span><span class="k">next</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="s">"∀y. (f ∘ inv f) y = y"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="s">‹bij f›</span><span class="w"> </span><span class="n">bij_is_surj</span><span class="w"> </span><span class="n">surj_f_inv_f</span><span class="o">)</span>
<span class="w">  </span><span class="k">qed</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"tiene_inversa f"</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">tiene_inversa_def</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">auto</span>
<span class="k">qed</span>

<span class="k">end</span>
</pre></div>

<p><a name="ej2"></a></p>
<h2>2. La equipotencia es una relación reflexiva</h2>
<p>Dos conjuntos \(A\) y \(B\) son equipotentes (y se denota por \(A ≃ B\)) si existe una aplicación biyectiva entre ellos. La equipotencia se puede definir en Lean por</p>
<div class="code"><pre class="code literal-block">   <span class="kd">def</span> <span class="n">es_equipotente</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">_</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
     <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">,</span> <span class="n">Bijective</span> <span class="n">g</span>

   <span class="kn">local</span> <span class="kd">infixr</span><span class="o">:</span><span class="mi">50</span> <span class="s2">" ⋍ "</span> <span class="bp">=&gt;</span> <span class="n">es_equipotente</span>
</pre></div>

<p>Demostrar que la relación de equipotencia es reflexiva.</p>
<p>Para ello, completar la siguiente teoría de Lean4:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>

<span class="kn">open</span> <span class="n">Function</span>

<span class="kd">def</span> <span class="n">es_equipotente</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">_</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">,</span> <span class="n">Bijective</span> <span class="n">g</span>

<span class="kn">local</span> <span class="kd">infixr</span><span class="o">:</span><span class="mi">50</span> <span class="s2">" ⋍ "</span> <span class="bp">=&gt;</span> <span class="n">es_equipotente</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">Reflexive</span> <span class="o">(</span><span class="bp">.</span> <span class="bp">⋍</span> <span class="bp">.</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="gr">sorry</span>
</pre></div>

<!-- TEASER_END -->

<h3>2.1. Demostración en lenguaje natural</h3>
<p>Tenemos que demostrar que para cualquier conjunto \(X\), se tiene que \(X\) es equipotente con \(X\). Para demostrarlo basta considerar que la función identidad en \(X\) es una biyección de \(X\) en \(X\).</p>
<h3>2.2. Demostraciones con Lean4</h3>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>

<span class="kn">open</span> <span class="n">Function</span>

<span class="kd">def</span> <span class="n">es_equipotente</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">_</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">,</span> <span class="n">Bijective</span> <span class="n">g</span>

<span class="kn">local</span> <span class="kd">infixr</span><span class="o">:</span><span class="mi">50</span> <span class="s2">" ⋍ "</span> <span class="bp">=&gt;</span> <span class="n">es_equipotente</span>

<span class="c1">-- 1ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">Reflexive</span> <span class="o">(</span><span class="bp">.</span> <span class="bp">⋍</span> <span class="bp">.</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">intro</span> <span class="n">X</span>
  <span class="c1">-- ⊢ X ⋍ X</span>
  <span class="n">use</span> <span class="n">id</span>
  <span class="c1">-- ⊢ Bijective id</span>
  <span class="n">exact</span> <span class="n">bijective_id</span>

<span class="c1">-- 2ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">Reflexive</span> <span class="o">(</span><span class="bp">.</span> <span class="bp">⋍</span> <span class="bp">.</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">intro</span> <span class="n">X</span>
  <span class="c1">-- ⊢ X ⋍ X</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">id</span><span class="o">,</span> <span class="n">bijective_id</span><span class="o">⟩</span>

<span class="c1">-- 3ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">Reflexive</span> <span class="o">(</span><span class="bp">.</span> <span class="bp">⋍</span> <span class="bp">.</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">fun</span> <span class="n">_</span> <span class="bp">↦</span> <span class="o">⟨</span><span class="n">id</span><span class="o">,</span> <span class="n">bijective_id</span><span class="o">⟩</span>

<span class="c1">-- Lemas usados</span>
<span class="c1">-- ============</span>

<span class="c1">-- #check (bijective_id : Bijective id)</span>
</pre></div>

<p>Se puede interactuar con las demostraciones anteriores en <a href="https://live.lean-lang.org/#url=https://raw.githubusercontent.com/jaalonso/Calculemus2/main/src/La_equipotencia_es_una_relacion_reflexiva.lean">Lean 4 Web</a>.</p>
<h3>2.3. Demostraciones con Isabelle/HOL</h3>
<div class="code"><pre class="code literal-block"><span class="k">theory</span><span class="w"> </span><span class="n">La_equipotencia_es_una_relacion_reflexiva</span>
<span class="kp">imports</span><span class="w"> </span><span class="n">Main</span><span class="w"> </span><span class="s">"HOL-Library.Equipollence"</span>
<span class="k">begin</span>

<span class="c">(* 1ª demostración *)</span>

<span class="kn">lemma</span><span class="w"> </span><span class="s">"reflp (≈)"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">reflpI</span><span class="o">)</span>
<span class="w">  </span><span class="k">fix</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'a set"</span>
<span class="w">  </span><span class="k">have</span><span class="w"> </span><span class="s">"bij_betw id x x"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="o">:</span><span class="w"> </span><span class="n">bij_betw_id</span><span class="o">)</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"∃f. bij_betw f x x"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="o">:</span><span class="w"> </span><span class="n">exI</span><span class="o">)</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"x ≈ x"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="o">:</span><span class="w"> </span><span class="n">eqpoll_def</span><span class="o">)</span>
<span class="k">qed</span>

<span class="c">(* 2ª demostración *)</span>

<span class="kn">lemma</span><span class="w"> </span><span class="s">"reflp (≈)"</span>
<span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="o">:</span><span class="w"> </span><span class="n">reflpI</span><span class="w"> </span><span class="n">eqpoll_refl</span><span class="o">)</span>

<span class="c">(* 3ª demostración *)</span>

<span class="kn">lemma</span><span class="w"> </span><span class="s">"reflp (≈)"</span>
<span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">reflpI</span><span class="o">)</span>

<span class="k">end</span>
</pre></div>

<p><a name="ej3"></a></p>
<h2>3. La inversa de una función es biyectiva</h2>
<p>En Lean4 se puede definir que \(g\) es una inversa de \(f\) por</p>
<div class="code"><pre class="code literal-block">   <span class="kd">def</span> <span class="n">inversa</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span>
     <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span>
</pre></div>

<p>Demostrar que si \(g\) es una inversa de \(f\), entonces \(g\) es biyectiva.</p>
<p>Para ello, completar la siguiente teoría de Lean4:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>
<span class="kn">open</span> <span class="n">Function</span>

<span class="kd">variable</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">_</span><span class="o">}</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">inversa</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">inversa</span> <span class="n">g</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="gr">sorry</span>
</pre></div>

<!-- TEASER_END -->

<h3>3.1. Demostración en lenguaje natural</h3>
<p>Para demostrar que \(g: Y → X\) es biyectiva, basta probar que existe una
\(h\) que es inversa de \(g\) por la izquierda y por la derecha; es
decir,
\begin{align}
   &amp;(∀y ∈ Y)[(h ∘ g)(y) = y] \tag{1} \newline
   &amp;(∀x ∈ X)[(g ∘ h)(x) = x] \tag{2}
\end{align}</p>
<p>Puesto que \(g\) es una inversa de \(f\), entonces
\begin{align}
   &amp;(∀x ∈ X)[(g ∘ f)(x) = x] \tag{3} \newline
   &amp;(∀y ∈ Y)[(f ∘ g)(y) = y] \tag{4}
\end{align}</p>
<p>Tomando \(f\) como \(h\), (1) se verifica por (4) y (2) se verifica por (3).</p>
<h3>3.2. Demostraciones con Lean4</h3>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>
<span class="kn">open</span> <span class="n">Function</span>

<span class="kd">variable</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">_</span><span class="o">}</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span>
<span class="kd">variable</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">inversa</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span>

<span class="c1">-- 1ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">inversa</span> <span class="n">g</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">hg</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">⟩</span>
  <span class="c1">-- h1 : ∀ (x : Y), (f ∘ g) x = x</span>
  <span class="c1">-- h2 : ∀ (y : X), (g ∘ f) y = y</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">bijective_iff_has_inverse</span><span class="o">]</span>
  <span class="c1">-- ⊢ ∃ g_1, LeftInverse g_1 g ∧ Function.RightInverse g_1 g</span>
  <span class="n">use</span> <span class="n">f</span>
  <span class="c1">-- ⊢ LeftInverse f g ∧ Function.RightInverse f g</span>
  <span class="n">constructor</span>
  <span class="bp">.</span> <span class="c1">-- ⊢ LeftInverse f g</span>
    <span class="n">exact</span> <span class="n">h1</span>
  <span class="bp">.</span> <span class="c1">-- ⊢ Function.RightInverse f g</span>
    <span class="n">exact</span> <span class="n">h2</span>

<span class="c1">-- 2ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">inversa</span> <span class="n">g</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">hg</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">⟩</span>
  <span class="c1">-- h1 : ∀ (x : Y), (f ∘ g) x = x</span>
  <span class="c1">-- h2 : ∀ (y : X), (g ∘ f) y = y</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">bijective_iff_has_inverse</span><span class="o">]</span>
  <span class="c1">-- ⊢ ∃ g_1, LeftInverse g_1 g ∧ Function.RightInverse g_1 g</span>
  <span class="n">use</span> <span class="n">f</span>
  <span class="c1">-- ⊢ LeftInverse f g ∧ Function.RightInverse f g</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">⟩</span>

<span class="c1">-- 3ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">inversa</span> <span class="n">g</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">rcases</span> <span class="n">hg</span> <span class="k">with</span> <span class="o">⟨</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">⟩</span>
  <span class="c1">-- h1 : ∀ (x : Y), (f ∘ g) x = x</span>
  <span class="c1">-- h2 : ∀ (y : X), (g ∘ f) y = y</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">bijective_iff_has_inverse</span><span class="o">]</span>
  <span class="c1">-- ⊢ ∃ g_1, LeftInverse g_1 g ∧ Function.RightInverse g_1 g</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">f</span><span class="o">,</span> <span class="o">⟨</span><span class="n">h1</span><span class="o">,</span> <span class="n">h2</span><span class="o">⟩⟩</span>

<span class="c1">-- 4ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">inversa</span> <span class="n">g</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">bijective_iff_has_inverse</span><span class="o">]</span>
  <span class="c1">-- ⊢ ∃ g_1, LeftInverse g_1 g ∧ Function.RightInverse g_1 g</span>
  <span class="n">use</span> <span class="n">f</span>
  <span class="c1">-- ⊢ LeftInverse f g ∧ Function.RightInverse f g</span>
  <span class="n">exact</span> <span class="n">hg</span>

<span class="c1">-- 5ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">inversa</span> <span class="n">g</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">bijective_iff_has_inverse</span><span class="o">]</span>
  <span class="c1">-- ⊢ ∃ g_1, LeftInverse g_1 g ∧ Function.RightInverse g_1 g</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">f</span><span class="o">,</span> <span class="n">hg</span><span class="o">⟩</span>

<span class="c1">-- 6ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">inversa</span> <span class="n">g</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">apply</span> <span class="n">bijective_iff_has_inverse.mpr</span>
  <span class="c1">-- ⊢ ∃ g_1, LeftInverse g_1 g ∧ Function.RightInverse g_1 g</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">f</span><span class="o">,</span> <span class="n">hg</span><span class="o">⟩</span>

<span class="c1">-- Lemas usados</span>
<span class="c1">-- ============</span>

<span class="c1">-- #check (bijective_iff_has_inverse : Bijective f ↔ ∃ g, LeftInverse g f ∧ RightInverse g f)</span>
</pre></div>

<p>Se puede interactuar con las demostraciones anteriores en <a href="https://live.lean-lang.org/#url=https://raw.githubusercontent.com/jaalonso/Calculemus2/main/src/La_inversa_de_una_funcion_biyectiva_es_biyectiva.lean">Lean 4 Web</a>.</p>
<h3>3.3. Demostraciones con Isabelle/HOL</h3>
<div class="code"><pre class="code literal-block"><span class="k">theory</span><span class="w"> </span><span class="n">La_inversa_de_una_funcion_biyectiva_es_biyectiva</span>
<span class="kp">imports</span><span class="w"> </span><span class="n">Main</span>
<span class="k">begin</span>

<span class="k">definition</span><span class="w"> </span><span class="n">inversa</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"('a ⇒ 'b) ⇒ ('b ⇒ 'a) ⇒ bool"</span><span class="w"> </span><span class="kp">where</span>
<span class="w">  </span><span class="s">"inversa f g ⟷ (∀ x. (g ∘ f) x = x) ∧ (∀ y. (f ∘ g) y = y)"</span>

<span class="c">(* 1ª demostración *)</span>

<span class="kn">lemma</span>
<span class="w">  </span><span class="kp">fixes</span><span class="w">   </span><span class="n">f</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'a ⇒ 'b"</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"inversa g f"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w">   </span><span class="s">"bij g"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bijI</span><span class="o">)</span>
<span class="w">  </span><span class="k">show</span><span class="w"> </span><span class="s">"inj g"</span>
<span class="w">  </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">injI</span><span class="o">)</span>
<span class="w">    </span><span class="k">fix</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span>
<span class="w">    </span><span class="k">assume</span><span class="w"> </span><span class="s">"g x = g y"</span>
<span class="w">    </span><span class="k">have</span><span class="w"> </span><span class="n">h1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">"∀ y. (f ∘ g) y = y"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">meson</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="n">inversa_def</span><span class="o">)</span>
<span class="w">    </span><span class="k">then</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"x = (f ∘ g) x"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="o">:</span><span class="w"> </span><span class="n">allE</span><span class="o">)</span>
<span class="w">    </span><span class="k">also</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"… = f (g x)"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="o">:</span><span class="w"> </span><span class="n">o_apply</span><span class="o">)</span>
<span class="w">    </span><span class="k">also</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"… = f (g y)"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="o">:</span><span class="w"> </span><span class="s">‹g x = g y›</span><span class="o">)</span>
<span class="w">    </span><span class="k">also</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"… = (f ∘ g) y"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="o">:</span><span class="w"> </span><span class="n">o_apply</span><span class="o">)</span>
<span class="w">    </span><span class="k">also</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"… = y"</span>
<span class="w">      </span><span class="k">using</span><span class="w"> </span><span class="n">h1</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="o">:</span><span class="w"> </span><span class="n">allE</span><span class="o">)</span>
<span class="w">    </span><span class="k">finally</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"x = y"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="n">this</span>
<span class="w">  </span><span class="k">qed</span>
<span class="k">next</span>
<span class="w">  </span><span class="k">show</span><span class="w"> </span><span class="s">"surj g"</span>
<span class="w">  </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">surjI</span><span class="o">)</span>
<span class="w">    </span><span class="k">fix</span><span class="w"> </span><span class="n">x</span>
<span class="w">    </span><span class="k">have</span><span class="w"> </span><span class="n">h2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">"∀ x. (g ∘ f) x = x"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">meson</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="n">inversa_def</span><span class="o">)</span>
<span class="w">    </span><span class="k">then</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"(g ∘ f) x = x"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="o">:</span><span class="w"> </span><span class="n">allE</span><span class="o">)</span>
<span class="w">    </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"g (f x) = x"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="o">:</span><span class="w"> </span><span class="n">o_apply</span><span class="o">)</span>
<span class="w">  </span><span class="k">qed</span>
<span class="k">qed</span>

<span class="c">(* 2ª demostración *)</span>

<span class="kn">lemma</span>
<span class="w">  </span><span class="kp">fixes</span><span class="w">   </span><span class="n">f</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'a ⇒ 'b"</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"inversa g f"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w">   </span><span class="s">"bij g"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bijI</span><span class="o">)</span>
<span class="w">  </span><span class="k">show</span><span class="w"> </span><span class="s">"inj g"</span>
<span class="w">  </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">injI</span><span class="o">)</span>
<span class="w">    </span><span class="k">fix</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span>
<span class="w">    </span><span class="k">assume</span><span class="w"> </span><span class="s">"g x = g y"</span>
<span class="w">    </span><span class="k">have</span><span class="w"> </span><span class="n">h1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">"∀ y. (f ∘ g) y = y"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">meson</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="n">inversa_def</span><span class="o">)</span>
<span class="w">    </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"x = y"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">metis</span><span class="w"> </span><span class="s">‹g x = g y›</span><span class="w"> </span><span class="n">o_apply</span><span class="o">)</span>
<span class="w">  </span><span class="k">qed</span>
<span class="k">next</span>
<span class="w">  </span><span class="k">show</span><span class="w"> </span><span class="s">"surj g"</span>
<span class="w">  </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">surjI</span><span class="o">)</span>
<span class="w">    </span><span class="k">fix</span><span class="w"> </span><span class="n">x</span>
<span class="w">    </span><span class="k">have</span><span class="w"> </span><span class="n">h2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s">"∀ x. (g ∘ f) x = x"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">meson</span><span class="w"> </span><span class="n">assms</span><span class="w"> </span><span class="n">inversa_def</span><span class="o">)</span>
<span class="w">    </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"g (f x) = x"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="o">:</span><span class="w"> </span><span class="n">o_apply</span><span class="o">)</span>
<span class="w">  </span><span class="k">qed</span>
<span class="k">qed</span>

<span class="k">end</span>
</pre></div>

<p><a name="ej4"></a></p>
<h2>4. La equipotencia es una relación simétrica</h2>
<p>Dos conjuntos \(A\) y \(B\) son equipotentes (y se denota por \(A ≃ B\)) si existe una aplicación biyectiva entre ellos. La equipotencia se puede definir en Lean4 por</p>
<div class="code"><pre class="code literal-block">   <span class="kd">def</span> <span class="n">es_equipotente</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">_</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
     <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">,</span> <span class="n">Bijective</span> <span class="n">g</span>

   <span class="kn">local</span> <span class="kd">infixr</span><span class="o">:</span><span class="mi">50</span> <span class="s2">" ⋍ "</span> <span class="bp">=&gt;</span> <span class="n">es_equipotente</span>
</pre></div>

<p>Demostrar con Lean4 que la relación de equipotencia es simétrica.</p>
<p>Para ello, completar la siguiente teoría de Lean4:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>

<span class="kn">open</span> <span class="n">Function</span>

<span class="kd">def</span> <span class="n">es_equipotente</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">_</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">,</span> <span class="n">Bijective</span> <span class="n">g</span>

<span class="kn">local</span> <span class="kd">infixr</span><span class="o">:</span><span class="mi">50</span> <span class="s2">" ⋍ "</span> <span class="bp">=&gt;</span> <span class="n">es_equipotente</span>

<span class="kd">def</span> <span class="n">inversa</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">tiene_inversa</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">∃</span> <span class="n">g</span><span class="o">,</span> <span class="n">inversa</span> <span class="n">g</span> <span class="n">f</span>

<span class="kd">lemma</span> <span class="n">aux1</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">tiene_inversa</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">cases'</span> <span class="o">(</span><span class="n">bijective_iff_has_inverse.mp</span> <span class="n">hf</span><span class="o">)</span> <span class="k">with</span> <span class="n">g</span> <span class="n">hg</span>
  <span class="c1">-- g : Y → X</span>
  <span class="c1">-- hg : LeftInverse g f ∧ Function.RightInverse g f</span>
  <span class="n">aesop</span> <span class="o">(</span><span class="n">add</span> <span class="n">norm</span> <span class="n">unfold</span> <span class="o">[</span><span class="n">tiene_inversa</span><span class="o">,</span> <span class="n">inversa</span><span class="o">])</span>

<span class="kd">lemma</span> <span class="n">aux2</span>
  <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">inversa</span> <span class="n">g</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">bijective_iff_has_inverse</span><span class="o">]</span>
  <span class="c1">-- ⊢ ∃ g_1, LeftInverse g_1 g ∧ Function.RightInverse g_1 g</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">f</span><span class="o">,</span> <span class="n">hg</span><span class="o">⟩</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">Symmetric</span> <span class="o">(</span><span class="bp">.</span> <span class="bp">⋍</span> <span class="bp">.</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="gr">sorry</span>
</pre></div>

<!-- TEASER_END -->

<h3>4.1. Demostración en lenguaje natural</h3>
<p>Sean \(A\) y \(B\) tales que \(A ⋍ B\). Entonces, existe \(f: A → B\) biyectiva. Por tanto, f tiene una inversa \(g: B → A\) que también es biyectiva. Luego, \(B ⋍ A\).</p>
<h3>4.2. Demostraciones con Lean4</h3>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>

<span class="kn">open</span> <span class="n">Function</span>

<span class="kd">def</span> <span class="n">es_equipotente</span> <span class="o">(</span><span class="n">A</span> <span class="n">B</span> <span class="o">:</span> <span class="kt">Type</span> <span class="n">_</span><span class="o">)</span> <span class="o">:</span> <span class="kt">Prop</span> <span class="o">:=</span>
  <span class="bp">∃</span> <span class="n">g</span> <span class="o">:</span> <span class="n">A</span> <span class="bp">→</span> <span class="n">B</span><span class="o">,</span> <span class="n">Bijective</span> <span class="n">g</span>

<span class="kn">local</span> <span class="kd">infixr</span><span class="o">:</span><span class="mi">50</span> <span class="s2">" ⋍ "</span> <span class="bp">=&gt;</span> <span class="n">es_equipotente</span>

<span class="kd">def</span> <span class="n">inversa</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">(</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">X</span><span class="o">)</span> <span class="o">:=</span>
  <span class="o">(</span><span class="bp">∀</span> <span class="n">x</span><span class="o">,</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="n">x</span> <span class="bp">=</span> <span class="n">x</span><span class="o">)</span> <span class="bp">∧</span> <span class="o">(</span><span class="bp">∀</span> <span class="n">y</span><span class="o">,</span> <span class="o">(</span><span class="n">f</span> <span class="bp">∘</span> <span class="n">g</span><span class="o">)</span> <span class="n">y</span> <span class="bp">=</span> <span class="n">y</span><span class="o">)</span>

<span class="kd">def</span> <span class="n">tiene_inversa</span> <span class="o">(</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">)</span> <span class="o">:=</span>
  <span class="bp">∃</span> <span class="n">g</span><span class="o">,</span> <span class="n">inversa</span> <span class="n">g</span> <span class="n">f</span>

<span class="kd">lemma</span> <span class="n">aux1</span>
  <span class="o">(</span><span class="n">hf</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">tiene_inversa</span> <span class="n">f</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">cases'</span> <span class="o">(</span><span class="n">bijective_iff_has_inverse.mp</span> <span class="n">hf</span><span class="o">)</span> <span class="k">with</span> <span class="n">g</span> <span class="n">hg</span>
  <span class="c1">-- g : Y → X</span>
  <span class="c1">-- hg : LeftInverse g f ∧ Function.RightInverse g f</span>
  <span class="n">aesop</span> <span class="o">(</span><span class="n">add</span> <span class="n">norm</span> <span class="n">unfold</span> <span class="o">[</span><span class="n">tiene_inversa</span><span class="o">,</span> <span class="n">inversa</span><span class="o">])</span>

<span class="kd">lemma</span> <span class="n">aux2</span>
  <span class="o">(</span><span class="n">hg</span> <span class="o">:</span> <span class="n">inversa</span> <span class="n">g</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">rw</span> <span class="o">[</span><span class="n">bijective_iff_has_inverse</span><span class="o">]</span>
  <span class="c1">-- ⊢ ∃ g_1, LeftInverse g_1 g ∧ Function.RightInverse g_1 g</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">f</span><span class="o">,</span> <span class="n">hg</span><span class="o">⟩</span>

<span class="c1">-- 1ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">Symmetric</span> <span class="o">(</span><span class="bp">.</span> <span class="bp">⋍</span> <span class="bp">.</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">unfold</span> <span class="n">Symmetric</span>
  <span class="c1">-- ⊢ ∀ ⦃x y : Type ?u.17753⦄, (fun x x_1 =&gt; x ⋍ x_1) x y → (fun x x_1 =&gt; x ⋍ x_1) y x</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hxy</span>
  <span class="c1">-- x y : Type ?u.17753</span>
  <span class="c1">-- hxy : x ⋍ y</span>
  <span class="c1">-- ⊢ y ⋍ x</span>
  <span class="n">unfold</span> <span class="n">es_equipotente</span> <span class="n">at</span> <span class="bp">*</span>
  <span class="c1">-- hxy : ∃ g, Bijective g</span>
  <span class="c1">-- ⊢ ∃ g, Bijective g</span>
  <span class="n">cases'</span> <span class="n">hxy</span> <span class="k">with</span> <span class="n">f</span> <span class="n">hf</span>
  <span class="c1">-- f : x → y</span>
  <span class="c1">-- hf : Bijective f</span>
  <span class="k">have</span> <span class="n">h1</span> <span class="o">:</span> <span class="n">tiene_inversa</span> <span class="n">f</span> <span class="o">:=</span> <span class="n">aux1</span> <span class="n">hf</span>
  <span class="n">cases'</span> <span class="n">h1</span> <span class="k">with</span> <span class="n">g</span> <span class="n">hg</span>
  <span class="c1">-- g : y → x</span>
  <span class="c1">-- hg : inversa g f</span>
  <span class="n">use</span> <span class="n">g</span>
  <span class="c1">-- ⊢ Bijective g</span>
  <span class="n">exact</span> <span class="n">aux2</span> <span class="n">hg</span>

<span class="c1">-- 2ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">Symmetric</span> <span class="o">(</span><span class="bp">.</span> <span class="bp">⋍</span> <span class="bp">.</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">intros</span> <span class="n">x</span> <span class="n">y</span> <span class="n">hxy</span>
  <span class="c1">-- x y : Type ?u.17965</span>
  <span class="c1">-- hxy : x ⋍ y</span>
  <span class="c1">-- ⊢ y ⋍ x</span>
  <span class="n">cases'</span> <span class="n">hxy</span> <span class="k">with</span> <span class="n">f</span> <span class="n">hf</span>
  <span class="c1">-- f : x → y</span>
  <span class="c1">-- hf : Bijective f</span>
  <span class="n">cases'</span> <span class="o">(</span><span class="n">aux1</span> <span class="n">hf</span><span class="o">)</span> <span class="k">with</span> <span class="n">g</span> <span class="n">hg</span>
  <span class="c1">-- g : y → x</span>
  <span class="c1">-- hg : inversa g f</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">g</span><span class="o">,</span> <span class="n">aux2</span> <span class="n">hg</span><span class="o">⟩</span>

<span class="c1">-- 3ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span> <span class="o">:</span> <span class="n">Symmetric</span> <span class="o">(</span><span class="bp">.</span> <span class="bp">⋍</span> <span class="bp">.</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">rintro</span> <span class="n">x</span> <span class="n">y</span> <span class="o">⟨</span><span class="n">f</span><span class="o">,</span> <span class="n">hf</span><span class="o">⟩</span>
  <span class="c1">-- x y : Type ?u.18159</span>
  <span class="c1">-- f : x → y</span>
  <span class="c1">-- hf : Bijective f</span>
  <span class="c1">-- ⊢ y ⋍ x</span>
  <span class="n">cases'</span> <span class="o">(</span><span class="n">aux1</span> <span class="n">hf</span><span class="o">)</span> <span class="k">with</span> <span class="n">g</span> <span class="n">hg</span>
  <span class="c1">-- g : y → x</span>
  <span class="c1">-- hg : inversa g f</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">g</span><span class="o">,</span> <span class="n">aux2</span> <span class="n">hg</span><span class="o">⟩</span>

<span class="c1">-- Lemas usados</span>
<span class="c1">-- ============</span>

<span class="c1">-- variable (α β : Type _)</span>
<span class="c1">-- variable (f : α → β)</span>
<span class="c1">-- #check (bijective_iff_has_inverse : Bijective f ↔ ∃ g, LeftInverse g f ∧ RightInverse g f)</span>
</pre></div>

<p>Se puede interactuar con las demostraciones anteriores en <a href="https://live.lean-lang.org/#url=https://raw.githubusercontent.com/jaalonso/Calculemus2/main/src/La_equipotencia_es_una_relacion_simetrica.lean">Lean 4 Web</a>.</p>
<h3>4.3. Demostraciones con Isabelle/HOL</h3>
<div class="code"><pre class="code literal-block"><span class="k">theory</span><span class="w"> </span><span class="n">La_equipotencia_es_una_relacion_simetrica</span>
<span class="kp">imports</span><span class="w"> </span><span class="n">Main</span><span class="w"> </span><span class="s">"HOL-Library.Equipollence"</span>
<span class="k">begin</span>

<span class="c">(* 1ª demostración *)</span>

<span class="kn">lemma</span><span class="w"> </span><span class="s">"symp (≈)"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">sympI</span><span class="o">)</span>
<span class="w">  </span><span class="k">fix</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">"'a set"</span>
<span class="w">  </span><span class="k">assume</span><span class="w"> </span><span class="s">"x ≈ y"</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">obtain</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="kp">where</span><span class="w"> </span><span class="s">"bij_betw f x y"</span>
<span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">eqpoll_def</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">blast</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"bij_betw (the_inv_into x f) y x"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_betw_the_inv_into</span><span class="o">)</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">have</span><span class="w"> </span><span class="s">"∃g. bij_betw g y x"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="n">auto</span>
<span class="w">  </span><span class="k">then</span><span class="w"> </span><span class="k">show</span><span class="w"> </span><span class="s">"y ≈ x"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">only</span><span class="o">:</span><span class="w"> </span><span class="n">eqpoll_def</span><span class="o">)</span>
<span class="k">qed</span>

<span class="c">(* 2ª demostración *)</span>

<span class="kn">lemma</span><span class="w"> </span><span class="s">"symp (≈)"</span>
<span class="w">  </span><span class="k">unfolding</span><span class="w"> </span><span class="n">eqpoll_def</span><span class="w"> </span><span class="n">symp_def</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">bij_betw_the_inv_into</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">auto</span>

<span class="c">(* 3ª demostración *)</span>

<span class="kn">lemma</span><span class="w"> </span><span class="s">"symp (≈)"</span>
<span class="w">  </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">simp</span><span class="w"> </span><span class="n">add</span><span class="o">:</span><span class="w"> </span><span class="n">eqpoll_sym</span><span class="w"> </span><span class="n">sympI</span><span class="o">)</span>

<span class="k">end</span>
</pre></div>

<p><a name="ej5"></a></p>
<h2>5. La composición de funciones biyectivas es biyectiva</h2>
<p>Demostrar con Lean4 que la composición de dos funciones biyectivas es una función biyectiva.</p>
<p>Para ello, completar la siguiente teoría de Lean4:</p>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>
<span class="kn">open</span> <span class="n">Function</span>

<span class="kd">variable</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">}</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">}</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">Hf</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">(</span><span class="n">Hg</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span> <span class="gr">sorry</span>
</pre></div>

<!-- TEASER_END -->

<h3>5.1. Demostración en lenguaje natural</h3>
<p>Sean \(f: X → Y\) y \(g: Y → Z\). En ejercicios anteriores hemos demostrados
los siguientes lemas:</p>
<ul>
<li>Lema 1: Si \(f\) y \(g\) son inyectiva, entonces también lo es \(g ∘ f\).</li>
<li>Lema 2: Si \(f\) y \(g\) son suprayectiva, entonces también lo es \(g ∘ f\).</li>
</ul>
<p>Supongamos que \(f\) y \(g\) son biyectivas. Entonces, son inyectivas y suprayectivas. Luego, por los lemas 1 y 2, \(g ∘ f\) es inyectiva y suprayectiva. Por tanto, \(g ∘ f\) es biyectiva.</p>
<h3>5.2. Demostraciones con Lean4</h3>
<div class="code"><pre class="code literal-block"><span class="kn">import</span> <span class="n">Mathlib.Tactic</span>
<span class="kn">open</span> <span class="n">Function</span>

<span class="kd">variable</span> <span class="o">{</span><span class="n">X</span> <span class="n">Y</span> <span class="n">Z</span> <span class="o">:</span> <span class="kt">Type</span><span class="o">}</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">f</span> <span class="o">:</span> <span class="n">X</span> <span class="bp">→</span> <span class="n">Y</span><span class="o">}</span>
<span class="kd">variable</span> <span class="o">{</span><span class="n">g</span> <span class="o">:</span> <span class="n">Y</span> <span class="bp">→</span> <span class="n">Z</span><span class="o">}</span>

<span class="c1">-- 1ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">Hf</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">(</span><span class="n">Hg</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">cases'</span> <span class="n">Hf</span> <span class="k">with</span> <span class="n">Hfi</span> <span class="n">Hfs</span>
  <span class="c1">-- Hfi : Injective f</span>
  <span class="c1">-- Hfs : Surjective f</span>
  <span class="n">cases'</span> <span class="n">Hg</span> <span class="k">with</span> <span class="n">Hgi</span> <span class="n">Hgs</span>
  <span class="c1">-- Hgi : Injective g</span>
  <span class="c1">-- Hgs : Surjective g</span>
  <span class="n">constructor</span>
  <span class="bp">.</span> <span class="c1">-- ⊢ Injective (g ∘ f)</span>
    <span class="n">apply</span> <span class="n">Injective.comp</span>
    <span class="bp">.</span> <span class="c1">-- ⊢ Injective g</span>
      <span class="n">exact</span> <span class="n">Hgi</span>
    <span class="bp">.</span> <span class="c1">-- ⊢ Injective f</span>
      <span class="n">exact</span> <span class="n">Hfi</span>
  <span class="bp">.</span> <span class="n">apply</span> <span class="n">Surjective.comp</span>
    <span class="bp">.</span> <span class="c1">-- ⊢ Surjective g</span>
      <span class="n">exact</span> <span class="n">Hgs</span>
    <span class="bp">.</span> <span class="c1">-- ⊢ Surjective f</span>
      <span class="n">exact</span> <span class="n">Hfs</span>

<span class="c1">-- 2ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">Hf</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">(</span><span class="n">Hg</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">cases'</span> <span class="n">Hf</span> <span class="k">with</span> <span class="n">Hfi</span> <span class="n">Hfs</span>
  <span class="c1">-- Hfi : Injective f</span>
  <span class="c1">-- Hfs : Surjective f</span>
  <span class="n">cases'</span> <span class="n">Hg</span> <span class="k">with</span> <span class="n">Hgi</span> <span class="n">Hgs</span>
  <span class="c1">-- Hgi : Injective g</span>
  <span class="c1">-- Hgs : Surjective g</span>
  <span class="n">constructor</span>
  <span class="bp">.</span> <span class="c1">-- ⊢ Injective (g ∘ f)</span>
    <span class="n">exact</span> <span class="n">Injective.comp</span> <span class="n">Hgi</span> <span class="n">Hfi</span>
  <span class="bp">.</span> <span class="c1">-- ⊢ Surjective (g ∘ f)</span>
    <span class="n">exact</span> <span class="n">Surjective.comp</span> <span class="n">Hgs</span> <span class="n">Hfs</span>

<span class="c1">-- 3ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">Hf</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">(</span><span class="n">Hg</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">cases'</span> <span class="n">Hf</span> <span class="k">with</span> <span class="n">Hfi</span> <span class="n">Hfs</span>
  <span class="c1">-- Hfi : Injective f</span>
  <span class="c1">-- Hfs : Surjective f</span>
  <span class="n">cases'</span> <span class="n">Hg</span> <span class="k">with</span> <span class="n">Hgi</span> <span class="n">Hgs</span>
  <span class="c1">-- Hgi : Injective g</span>
  <span class="c1">-- Hgs : Surjective g</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">Injective.comp</span> <span class="n">Hgi</span> <span class="n">Hfi</span><span class="o">,</span>
         <span class="n">Surjective.comp</span> <span class="n">Hgs</span> <span class="n">Hfs</span><span class="o">⟩</span>

<span class="c1">-- 4ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span> <span class="o">:</span>
  <span class="n">Bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">Bijective</span> <span class="n">g</span> <span class="bp">→</span> <span class="n">Bijective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="kd">by</span>
  <span class="n">rintro</span> <span class="o">⟨</span><span class="n">Hfi</span><span class="o">,</span> <span class="n">Hfs</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">Hgi</span><span class="o">,</span> <span class="n">Hgs</span><span class="o">⟩</span>
  <span class="c1">-- Hfi : Injective f</span>
  <span class="c1">-- Hfs : Surjective f</span>
  <span class="c1">-- Hgi : Injective g</span>
  <span class="c1">-- Hgs : Surjective g</span>
  <span class="n">exact</span> <span class="o">⟨</span><span class="n">Injective.comp</span> <span class="n">Hgi</span> <span class="n">Hfi</span><span class="o">,</span>
         <span class="n">Surjective.comp</span> <span class="n">Hgs</span> <span class="n">Hfs</span><span class="o">⟩</span>

<span class="c1">-- 5ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span> <span class="o">:</span>
  <span class="n">Bijective</span> <span class="n">f</span> <span class="bp">→</span> <span class="n">Bijective</span> <span class="n">g</span> <span class="bp">→</span> <span class="n">Bijective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="k">fun</span> <span class="o">⟨</span><span class="n">Hfi</span><span class="o">,</span> <span class="n">Hfs</span><span class="o">⟩</span> <span class="o">⟨</span><span class="n">Hgi</span><span class="o">,</span> <span class="n">Hgs</span><span class="o">⟩</span> <span class="bp">↦</span> <span class="o">⟨</span><span class="n">Injective.comp</span> <span class="n">Hgi</span> <span class="n">Hfi</span><span class="o">,</span>
                             <span class="n">Surjective.comp</span> <span class="n">Hgs</span> <span class="n">Hfs</span><span class="o">⟩</span>

<span class="c1">-- 6ª demostración</span>
<span class="c1">-- ===============</span>

<span class="kd">example</span>
  <span class="o">(</span><span class="n">Hf</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">f</span><span class="o">)</span>
  <span class="o">(</span><span class="n">Hg</span> <span class="o">:</span> <span class="n">Bijective</span> <span class="n">g</span><span class="o">)</span>
  <span class="o">:</span> <span class="n">Bijective</span> <span class="o">(</span><span class="n">g</span> <span class="bp">∘</span> <span class="n">f</span><span class="o">)</span> <span class="o">:=</span>
<span class="n">Bijective.comp</span> <span class="n">Hg</span> <span class="n">Hf</span>

<span class="c1">-- Lemas usados</span>
<span class="c1">-- ============</span>

<span class="c1">-- #check (Bijective.comp : Bijective g → Bijective f → Bijective (g ∘ f))</span>
<span class="c1">-- #check (Injective.comp : Injective g → Injective f → Injective (g ∘ f))</span>
<span class="c1">-- #check (Surjective.comp : Surjective g → Surjective f → Surjective (g ∘ f))</span>
</pre></div>

<p>Se puede interactuar con las demostraciones anteriores en <a href="https://live.lean-lang.org/#url=https://raw.githubusercontent.com/jaalonso/Calculemus2/main/src/La_composicion_de_funciones_biyectivas_es_biyectiva.lean">Lean 4 Web</a>.</p>
<h3>5.3. Demostraciones con Isabelle/HOL</h3>
<div class="code"><pre class="code literal-block"><span class="k">theory</span><span class="w"> </span><span class="n">La_composicion_de_funciones_biyectivas_es_biyectiva</span>
<span class="kp">imports</span><span class="w"> </span><span class="n">Main</span>
<span class="k">begin</span>

<span class="c">(* 1ª demostración *)</span>

<span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"bij f"</span>
<span class="w">          </span><span class="s">"bij g"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w">   </span><span class="s">"bij (g ∘ f)"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bijI</span><span class="o">)</span>
<span class="w">  </span><span class="k">show</span><span class="w"> </span><span class="s">"inj (g ∘ f)"</span>
<span class="w">  </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">inj_compose</span><span class="o">)</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="s">"inj g"</span>
<span class="w">      </span><span class="k">using</span><span class="w"> </span><span class="s">‹bij g›</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_is_inj</span><span class="o">)</span>
<span class="w">  </span><span class="k">next</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="s">"inj f"</span>
<span class="w">      </span><span class="k">using</span><span class="w"> </span><span class="s">‹bij f›</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_is_inj</span><span class="o">)</span>
<span class="w">  </span><span class="k">qed</span>
<span class="k">next</span>
<span class="w">  </span><span class="k">show</span><span class="w"> </span><span class="s">"surj (g ∘ f)"</span>
<span class="w">  </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">comp_surj</span><span class="o">)</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="s">"surj f"</span>
<span class="w">      </span><span class="k">using</span><span class="w"> </span><span class="s">‹bij f›</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_is_surj</span><span class="o">)</span>
<span class="w">  </span><span class="k">next</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="s">"surj g"</span>
<span class="w">      </span><span class="k">using</span><span class="w"> </span><span class="s">‹bij g›</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_is_surj</span><span class="o">)</span>
<span class="w">  </span><span class="k">qed</span>
<span class="k">qed</span>

<span class="c">(* 2ª demostración *)</span>

<span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"bij f"</span>
<span class="w">          </span><span class="s">"bij g"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w">   </span><span class="s">"bij (g ∘ f)"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bijI</span><span class="o">)</span>
<span class="w">  </span><span class="k">show</span><span class="w"> </span><span class="s">"inj (g ∘ f)"</span>
<span class="w">  </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">inj_compose</span><span class="o">)</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="s">"inj g"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_is_inj</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="s">‹bij g›</span><span class="o">])</span>
<span class="w">  </span><span class="k">next</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="s">"inj f"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_is_inj</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="s">‹bij f›</span><span class="o">])</span>
<span class="w">  </span><span class="k">qed</span>
<span class="k">next</span>
<span class="w">  </span><span class="k">show</span><span class="w"> </span><span class="s">"surj (g ∘ f)"</span>
<span class="w">  </span><span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">comp_surj</span><span class="o">)</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="s">"surj f"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_is_surj</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="s">‹bij f›</span><span class="o">])</span>
<span class="w">  </span><span class="k">next</span>
<span class="w">    </span><span class="k">show</span><span class="w"> </span><span class="s">"surj g"</span>
<span class="w">      </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_is_surj</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="s">‹bij g›</span><span class="o">])</span>
<span class="w">  </span><span class="k">qed</span>
<span class="k">qed</span>

<span class="c">(* 3ª demostración *)</span>

<span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"bij f"</span>
<span class="w">          </span><span class="s">"bij g"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w">   </span><span class="s">"bij (g ∘ f)"</span>
<span class="k">proof</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bijI</span><span class="o">)</span>
<span class="w">  </span><span class="k">show</span><span class="w"> </span><span class="s">"inj (g ∘ f)"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">inj_compose</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="n">bij_is_inj</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="s">‹bij g›</span><span class="o">]</span>
<span class="w">                             </span><span class="n">bij_is_inj</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="s">‹bij f›</span><span class="o">]])</span>
<span class="k">next</span>
<span class="w">  </span><span class="k">show</span><span class="w"> </span><span class="s">"surj (g ∘ f)"</span>
<span class="w">    </span><span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">comp_surj</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="n">bij_is_surj</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="s">‹bij f›</span><span class="o">]</span>
<span class="w">                           </span><span class="n">bij_is_surj</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="s">‹bij g›</span><span class="o">]])</span>
<span class="k">qed</span>

<span class="c">(* 4ª demostración *)</span>

<span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"bij f"</span>
<span class="w">          </span><span class="s">"bij g"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w">   </span><span class="s">"bij (g ∘ f)"</span>
<span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bijI</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="n">inj_compose</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="n">bij_is_inj</span><span class="w">  </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="s">‹bij g›</span><span class="o">]</span>
<span class="w">                                  </span><span class="n">bij_is_inj</span><span class="w">  </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="s">‹bij f›</span><span class="o">]]</span>
<span class="w">                  </span><span class="n">comp_surj</span><span class="w">   </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="n">bij_is_surj</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="s">‹bij f›</span><span class="o">]</span>
<span class="w">                                  </span><span class="n">bij_is_surj</span><span class="w"> </span><span class="o">[</span><span class="n">OF</span><span class="w"> </span><span class="s">‹bij g›</span><span class="o">]]])</span>

<span class="c">(* 5ª demostración *)</span>

<span class="kn">lemma</span>
<span class="w">  </span><span class="kp">assumes</span><span class="w"> </span><span class="s">"bij f"</span>
<span class="w">          </span><span class="s">"bij g"</span>
<span class="w">  </span><span class="kp">shows</span><span class="w">   </span><span class="s">"bij (g ∘ f)"</span>
<span class="k">using</span><span class="w"> </span><span class="n">assms</span>
<span class="k">by</span><span class="w"> </span><span class="o">(</span><span class="n">rule</span><span class="w"> </span><span class="n">bij_comp</span><span class="o">)</span>

<span class="c">(* Nota: Auto solve indica la demostración anterior. *)</span>

<span class="k">end</span>
</pre></div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../../categories/isabellehol/" rel="tag">IsabelleHOL</a></li>
            <li><a class="tag p-category" href="../../../../categories/itp/" rel="tag">ITP</a></li>
            <li><a class="tag p-category" href="../../../../categories/lean4/" rel="tag">Lean4</a></li>
            <li><a class="tag p-category" href="../../../../categories/math/" rel="tag">Math</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../23-lecturas_compartidas_el_22-jun-24/" rel="prev" title="Lecturas compartidas el 23 de junio de 2024">Publicación anterior</a>
            </li>
        </ul></nav></aside><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha384-3lJUsx1TJHt7BA4udB5KPnDrlkO8T6J6v/op7ui0BbCjvZ9WqV4Xm6DTP6kQ/iBH" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true
    },
    displayAlign: 'center', // Change this to 'left' if you want left-aligned equations.
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}}
    }
});
</script></article></main><footer id="footer"><p>Escrito por <a href="https://jaalonso.github.io/">José A. Alonso</a> usando <a href="https://getnikola.com" rel="nofollow">Nikola</a> <br> Esta obra está bajo una 
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a></p>
            
        </footer>
</div>
        

    
    
</body>
</html>
